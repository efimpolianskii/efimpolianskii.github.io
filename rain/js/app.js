!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=328)}({105:function(t,e,n){"use strict";n(106);var r=n(22);n.d(e,"a",(function(){return r.a}))},106:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){return"production"}},16:function(t,e,n){"use strict";var r=n(105),i={playlist:"ajax/playlist",userlinks:"ajax/userLinks",articles:"ajax/articles",sospeso:"ajax/sospeso",auth:"ajax/authorization",subscribewithgoogle:"ajax/SubscribeWithGoogle",onair:"".concat(r.a,"/export/schedule/json/onair.json"),audiostream:"/ajax/videos/getAudio",sendcode:"/profile/applycode/",alpha:"ajax/alpha",makeitbetter:"ajax/makeItBetter",eaglesignature:"/videos/eaglesignature/id",getArticleTeleshow:"ajax/menuTeleshow",ppaoffer:"/ajax/purchase/ppaoffer",quickReg:"/quickreg/",omissionSend:"/site/omission/",adddevice:"/profile/adddevice/",deviceLinkStatus:"/ajax/user/deviceLinkStatus",setOfMaterials:"/recommended/setmaterials"},o=[],a={},s=function(t){for(var e=$.Deferred(),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var s="".concat(JSON.stringify(r));return a[s]=a[s]||[],-1!==o.indexOf(s)?(a[s].push(e),e):(o.push(s),t.apply(void 0,r).then((function(t){var e=o.indexOf(s);return a[s].forEach((function(e){return e.resolve(t)})),o.splice(e,1),delete a[s],t}),(function(t){var e=o.indexOf(s);return a[s].forEach((function(t){return t.reject(data)})),o.splice(e,1),delete a[s],t})))},c=function(t){var e=t.path,n=t.action,r=t.token,i=t.input,o=void 0===i?"":i;if([n,r].includes(void 0))return"Invalid property path";var a="".concat(e,"/").concat(n.toLowerCase(),"/").concat(r,"/").concat(o,"/").replace("//","/");return"/".concat(a)};function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var l=+new Date,f={get:function(t){var e;if(!t)return!1;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return $.when((e=$).get.apply(e,[t].concat(r))).then((function(t){if("object"===u(t))return t;try{return JSON.parse(t)}catch(e){return{response:t,success:!1,error:"error JSON Parse"}}}))},post:function(t){var e;if(!t)return!1;for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return $.when((e=$).post.apply(e,[t].concat(r))).then((function(t){return"object"===u(t)?t:JSON.parse(t)}))},beaconSend:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return navigator.sendBeacon?$.when(navigator.sendBeacon(t,n)):f.post.apply(f,[t].concat(n))}};e.a={playlist:function(t){var e=t.action,n=t.token,r=t.input;if(!n)throw Error("Invalid tonke ".concat(n));return f.get("/".concat(i.playlist,"/").concat(e,"/").concat(n,"/").concat(r,"/"))},userLinksData:function(t){var e=t.action,n=t.token,r=void 0===n?l:n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a={group:1,type:"article"},u=c({path:i.userlinks,action:e,token:r});return s(f.get,u,Object.assign(a,o))},authUser:function(t){var e=t.action,n=t.token,r=void 0===n?l:n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=c({path:i.auth,action:e,token:r});return f.post(a,o)},articleData:function(t){var e=t.action,n=t.token,r=void 0===n?l:n,o=t.input,a=c({path:i.articles,action:{list:"getList"}[e]||e,token:r,input:o});return s(f.get,a)},onAirData:function(){var t="".concat(i.onair);return s(f.get,t)},subscribeWithGoogle:function(t,e){var n=t.action,r=t.token,o=void 0===r?l:r,a=t.input,s=c({path:i.subscribewithgoogle,action:n,input:a,token:o});return"UserLinkComplete"===n?f.beaconSend(s):f.post(s,e)},getAudiostream:function(t){var e=t.action,n="".concat(i.audiostream,"/").concat(e,"/");return f.get(n)},getPopularArticles:function(t){var e=t.url,n=t.parentId,r=t.count,i=t.days,o="".concat(e,"?parent_id=").concat(n,"&count=").concat(r,"&days=").concat(i);return f.get(o)},sendCode:function(t){var e=t.input,n=i.sendcode;return f.post(n,e)},alpha:function(t){var e=t.action,n=void 0===e?"proxy":e,r=t.input,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=c({path:i.alpha,action:n,token:l,input:r});return s(f.get,a,o).then((function(t){return t}))},makeItBetter:function(t){var e=t.action,n=void 0===e?"get":e,r=t.input,o=void 0===r?"default":r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=c({path:i.makeitbetter,action:n,token:l,input:o});return s(f.get,u,a)},updateVideoSignature:function(t,e){var n="".concat(i.eaglesignature,"/").concat(t,"/");return f.post(n,e)},getArticleTeleshowData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"getList",e=arguments.length>1?arguments[1]:void 0,n=c({path:i.getArticleTeleshow,action:t,token:l});return s(f.get,n,e)},getPpaOffer:function(t,e,n){var r="".concat(i.ppaoffer,"/").concat(e,"/").concat(t,"/");return f.get(r,n)},quickRegUser:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{"User[firstname]":"","User[email]":""},e="".concat(i.quickReg);return f.post(e,t)},omissionSendData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="".concat(i.omissionSend);return f.post(e,t)},addDevice:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.YII_CSRF_TOKEN,n=void 0===e?"":e,r=t.linking_code,o=void 0===r?"":r,a="".concat(i.adddevice);return f.post(a,{YII_CSRF_TOKEN:n,linking_code:o})},checkLinkingDevice:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.code,n=void 0===e?"":e,r="".concat(i.deviceLinkStatus,"/").concat(n,"/");return f.post(r,{})},getSetOfMaterialsItems:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e="".concat(i.setOfMaterials);return f.get(e,t)}}},204:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(){var t={};return{apply:function(){$("[data-svg]").each((function(){t[$(this).attr("data-svg")]=null})),_.each(t,(function(t,e){var n;n=e,$.get(n,(function(t,e,r){$('[data-svg="'+n+'"]').each((function(){0==$(this).find("svg").length&&$(this).append(r.responseText)}))}))}))}}}},22:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="https://tvrain.tv"},235:function(t,e,n){var r,i,o,a,s;r=n(338),i=n(310).utf8,o=n(339),a=n(310).bin,(s=function(t,e){t.constructor==String?t=e&&"binary"===e.encoding?a.stringToBytes(t):i.stringToBytes(t):o(t)?t=Array.prototype.slice.call(t,0):Array.isArray(t)||(t=t.toString());for(var n=r.bytesToWords(t),c=8*t.length,u=1732584193,l=-271733879,f=-1732584194,d=271733878,h=0;h<n.length;h++)n[h]=16711935&(n[h]<<8|n[h]>>>24)|4278255360&(n[h]<<24|n[h]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var p=s._ff,v=s._gg,m=s._hh,y=s._ii;for(h=0;h<n.length;h+=16){var g=u,b=l,_=f,w=d;u=p(u,l,f,d,n[h+0],7,-680876936),d=p(d,u,l,f,n[h+1],12,-389564586),f=p(f,d,u,l,n[h+2],17,606105819),l=p(l,f,d,u,n[h+3],22,-1044525330),u=p(u,l,f,d,n[h+4],7,-176418897),d=p(d,u,l,f,n[h+5],12,1200080426),f=p(f,d,u,l,n[h+6],17,-1473231341),l=p(l,f,d,u,n[h+7],22,-45705983),u=p(u,l,f,d,n[h+8],7,1770035416),d=p(d,u,l,f,n[h+9],12,-1958414417),f=p(f,d,u,l,n[h+10],17,-42063),l=p(l,f,d,u,n[h+11],22,-1990404162),u=p(u,l,f,d,n[h+12],7,1804603682),d=p(d,u,l,f,n[h+13],12,-40341101),f=p(f,d,u,l,n[h+14],17,-1502002290),u=v(u,l=p(l,f,d,u,n[h+15],22,1236535329),f,d,n[h+1],5,-165796510),d=v(d,u,l,f,n[h+6],9,-1069501632),f=v(f,d,u,l,n[h+11],14,643717713),l=v(l,f,d,u,n[h+0],20,-373897302),u=v(u,l,f,d,n[h+5],5,-701558691),d=v(d,u,l,f,n[h+10],9,38016083),f=v(f,d,u,l,n[h+15],14,-660478335),l=v(l,f,d,u,n[h+4],20,-405537848),u=v(u,l,f,d,n[h+9],5,568446438),d=v(d,u,l,f,n[h+14],9,-1019803690),f=v(f,d,u,l,n[h+3],14,-187363961),l=v(l,f,d,u,n[h+8],20,1163531501),u=v(u,l,f,d,n[h+13],5,-1444681467),d=v(d,u,l,f,n[h+2],9,-51403784),f=v(f,d,u,l,n[h+7],14,1735328473),u=m(u,l=v(l,f,d,u,n[h+12],20,-1926607734),f,d,n[h+5],4,-378558),d=m(d,u,l,f,n[h+8],11,-2022574463),f=m(f,d,u,l,n[h+11],16,1839030562),l=m(l,f,d,u,n[h+14],23,-35309556),u=m(u,l,f,d,n[h+1],4,-1530992060),d=m(d,u,l,f,n[h+4],11,1272893353),f=m(f,d,u,l,n[h+7],16,-155497632),l=m(l,f,d,u,n[h+10],23,-1094730640),u=m(u,l,f,d,n[h+13],4,681279174),d=m(d,u,l,f,n[h+0],11,-358537222),f=m(f,d,u,l,n[h+3],16,-722521979),l=m(l,f,d,u,n[h+6],23,76029189),u=m(u,l,f,d,n[h+9],4,-640364487),d=m(d,u,l,f,n[h+12],11,-421815835),f=m(f,d,u,l,n[h+15],16,530742520),u=y(u,l=m(l,f,d,u,n[h+2],23,-995338651),f,d,n[h+0],6,-198630844),d=y(d,u,l,f,n[h+7],10,1126891415),f=y(f,d,u,l,n[h+14],15,-1416354905),l=y(l,f,d,u,n[h+5],21,-57434055),u=y(u,l,f,d,n[h+12],6,1700485571),d=y(d,u,l,f,n[h+3],10,-1894986606),f=y(f,d,u,l,n[h+10],15,-1051523),l=y(l,f,d,u,n[h+1],21,-2054922799),u=y(u,l,f,d,n[h+8],6,1873313359),d=y(d,u,l,f,n[h+15],10,-30611744),f=y(f,d,u,l,n[h+6],15,-1560198380),l=y(l,f,d,u,n[h+13],21,1309151649),u=y(u,l,f,d,n[h+4],6,-145523070),d=y(d,u,l,f,n[h+11],10,-1120210379),f=y(f,d,u,l,n[h+2],15,718787259),l=y(l,f,d,u,n[h+9],21,-343485551),u=u+g>>>0,l=l+b>>>0,f=f+_>>>0,d=d+w>>>0}return r.endian([u,l,f,d])})._ff=function(t,e,n,r,i,o,a){var s=t+(e&n|~e&r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},s._gg=function(t,e,n,r,i,o,a){var s=t+(e&r|n&~r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},s._hh=function(t,e,n,r,i,o,a){var s=t+(e^n^r)+(i>>>0)+a;return(s<<o|s>>>32-o)+e},s._ii=function(t,e,n,r,i,o,a){var s=t+(n^(e|~r))+(i>>>0)+a;return(s<<o|s>>>32-o)+e},s._blocksize=16,s._digestsize=16,t.exports=function(t,e){if(null==t)throw new Error("Illegal argument "+t);var n=r.wordsToBytes(s(t,e));return e&&e.asBytes?n:e&&e.asString?a.bytesToString(n):r.bytesToHex(n)}},236:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},305:function(t,e,n){(function(t){t.exports=function(){"use strict";var e,n;function r(){return e.apply(null,arguments)}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function o(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function a(t){return void 0===t}function s(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function c(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function u(t,e){var n,r=[];for(n=0;n<t.length;++n)r.push(e(t[n],n));return r}function l(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function f(t,e){for(var n in e)l(e,n)&&(t[n]=e[n]);return l(e,"toString")&&(t.toString=e.toString),l(e,"valueOf")&&(t.valueOf=e.valueOf),t}function d(t,e,n,r){return Ee(t,e,n,r,!0).utc()}function h(t){return null==t._pf&&(t._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),t._pf}function p(t){if(null==t._isValid){var e=h(t),r=n.call(e.parsedDateParts,(function(t){return null!=t})),i=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&r);if(t._strict&&(i=i&&0===e.charsLeftOver&&0===e.unusedTokens.length&&void 0===e.bigHour),null!=Object.isFrozen&&Object.isFrozen(t))return i;t._isValid=i}return t._isValid}function v(t){var e=d(NaN);return null!=t?f(h(e),t):h(e).userInvalidated=!0,e}n=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),n=e.length>>>0,r=0;r<n;r++)if(r in e&&t.call(this,e[r],r,e))return!0;return!1};var m=r.momentProperties=[];function y(t,e){var n,r,i;if(a(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),a(e._i)||(t._i=e._i),a(e._f)||(t._f=e._f),a(e._l)||(t._l=e._l),a(e._strict)||(t._strict=e._strict),a(e._tzm)||(t._tzm=e._tzm),a(e._isUTC)||(t._isUTC=e._isUTC),a(e._offset)||(t._offset=e._offset),a(e._pf)||(t._pf=h(e)),a(e._locale)||(t._locale=e._locale),m.length>0)for(n=0;n<m.length;n++)a(i=e[r=m[n]])||(t[r]=i);return t}var g=!1;function b(t){y(this,t),this._d=new Date(null!=t._d?t._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===g&&(g=!0,r.updateOffset(this),g=!1)}function _(t){return t instanceof b||null!=t&&null!=t._isAMomentObject}function w(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function k(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=w(e)),n}function E(t,e,n){var r,i=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(r=0;r<i;r++)(n&&t[r]!==e[r]||!n&&k(t[r])!==k(e[r]))&&a++;return a+o}function S(t){!1===r.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}function O(t,e){var n=!0;return f((function(){if(null!=r.deprecationHandler&&r.deprecationHandler(null,t),n){for(var i,o=[],a=0;a<arguments.length;a++){if(i="","object"==typeof arguments[a]){for(var s in i+="\n["+a+"] ",arguments[0])i+=s+": "+arguments[0][s]+", ";i=i.slice(0,-2)}else i=arguments[a];o.push(i)}S(t+"\nArguments: "+Array.prototype.slice.call(o).join("")+"\n"+(new Error).stack),n=!1}return e.apply(this,arguments)}),e)}var T,P={};function C(t,e){null!=r.deprecationHandler&&r.deprecationHandler(t,e),P[t]||(S(e),P[t]=!0)}function A(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function N(t,e){var n,r=f({},t);for(n in e)l(e,n)&&(o(t[n])&&o(e[n])?(r[n]={},f(r[n],t[n]),f(r[n],e[n])):null!=e[n]?r[n]=e[n]:delete r[n]);for(n in t)l(t,n)&&!l(e,n)&&o(t[n])&&(r[n]=f({},r[n]));return r}function D(t){null!=t&&this.set(t)}r.suppressDeprecationWarnings=!1,r.deprecationHandler=null,T=Object.keys?Object.keys:function(t){var e,n=[];for(e in t)l(t,e)&&n.push(e);return n};var R={};function I(t,e){var n=t.toLowerCase();R[n]=R[n+"s"]=R[e]=t}function j(t){return"string"==typeof t?R[t]||R[t.toLowerCase()]:void 0}function x(t){var e,n,r={};for(n in t)l(t,n)&&(e=j(n))&&(r[e]=t[n]);return r}var M={};function L(t,e){M[t]=e}function V(t,e,n){var r=""+Math.abs(t),i=e-r.length;return(t>=0?n?"+":"":"-")+Math.pow(10,Math.max(0,i)).toString().substr(1)+r}var Y=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,B=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,$={},U={};function H(t,e,n,r){var i=r;"string"==typeof r&&(i=function(){return this[r]()}),t&&(U[t]=i),e&&(U[e[0]]=function(){return V(i.apply(this,arguments),e[1],e[2])}),n&&(U[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),t)})}function F(t,e){return t.isValid()?(e=W(e,t.localeData()),$[e]=$[e]||function(t){var e,n,r,i=t.match(Y);for(e=0,n=i.length;e<n;e++)U[i[e]]?i[e]=U[i[e]]:i[e]=(r=i[e]).match(/\[[\s\S]/)?r.replace(/^\[|\]$/g,""):r.replace(/\\/g,"");return function(e){var r,o="";for(r=0;r<n;r++)o+=A(i[r])?i[r].call(e,t):i[r];return o}}(e),$[e](t)):t.localeData().invalidDate()}function W(t,e){var n=5;function r(t){return e.longDateFormat(t)||t}for(B.lastIndex=0;n>=0&&B.test(t);)t=t.replace(B,r),B.lastIndex=0,n-=1;return t}var q=/\d/,G=/\d\d/,z=/\d{3}/,J=/\d{4}/,K=/[+-]?\d{6}/,Z=/\d\d?/,Q=/\d\d\d\d?/,X=/\d\d\d\d\d\d?/,tt=/\d{1,3}/,et=/\d{1,4}/,nt=/[+-]?\d{1,6}/,rt=/\d+/,it=/[+-]?\d+/,ot=/Z|[+-]\d\d:?\d\d/gi,at=/Z|[+-]\d\d(?::?\d\d)?/gi,st=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,ct={};function ut(t,e,n){ct[t]=A(e)?e:function(t,r){return t&&n?n:e}}function lt(t,e){return l(ct,t)?ct[t](e._strict,e._locale):new RegExp(ft(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,(function(t,e,n,r,i){return e||n||r||i}))))}function ft(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var dt={};function ht(t,e){var n,r=e;for("string"==typeof t&&(t=[t]),s(e)&&(r=function(t,n){n[e]=k(t)}),n=0;n<t.length;n++)dt[t[n]]=r}function pt(t,e){ht(t,(function(t,n,r,i){r._w=r._w||{},e(t,r._w,r,i)}))}function vt(t,e,n){null!=e&&l(dt,t)&&dt[t](e,n._a,n,t)}function mt(t){return yt(t)?366:365}function yt(t){return t%4==0&&t%100!=0||t%400==0}H("Y",0,0,(function(){var t=this.year();return t<=9999?""+t:"+"+t})),H(0,["YY",2],0,(function(){return this.year()%100})),H(0,["YYYY",4],0,"year"),H(0,["YYYYY",5],0,"year"),H(0,["YYYYYY",6,!0],0,"year"),I("year","y"),L("year",1),ut("Y",it),ut("YY",Z,G),ut("YYYY",et,J),ut("YYYYY",nt,K),ut("YYYYYY",nt,K),ht(["YYYYY","YYYYYY"],0),ht("YYYY",(function(t,e){e[0]=2===t.length?r.parseTwoDigitYear(t):k(t)})),ht("YY",(function(t,e){e[0]=r.parseTwoDigitYear(t)})),ht("Y",(function(t,e){e[0]=parseInt(t,10)})),r.parseTwoDigitYear=function(t){return k(t)+(k(t)>68?1900:2e3)};var gt,bt=_t("FullYear",!0);function _t(t,e){return function(n){return null!=n?(kt(this,t,n),r.updateOffset(this,e),this):wt(this,t)}}function wt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function kt(t,e,n){t.isValid()&&!isNaN(n)&&("FullYear"===e&&yt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](n,t.month(),Et(n,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](n))}function Et(t,e){if(isNaN(t)||isNaN(e))return NaN;var n=(e%12+12)%12;return t+=(e-n)/12,1===n?yt(t)?29:28:31-n%7%2}gt=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},H("M",["MM",2],"Mo",(function(){return this.month()+1})),H("MMM",0,0,(function(t){return this.localeData().monthsShort(this,t)})),H("MMMM",0,0,(function(t){return this.localeData().months(this,t)})),I("month","M"),L("month",8),ut("M",Z),ut("MM",Z,G),ut("MMM",(function(t,e){return e.monthsShortRegex(t)})),ut("MMMM",(function(t,e){return e.monthsRegex(t)})),ht(["M","MM"],(function(t,e){e[1]=k(t)-1})),ht(["MMM","MMMM"],(function(t,e,n,r){var i=n._locale.monthsParse(t,r,n._strict);null!=i?e[1]=i:h(n).invalidMonth=t}));var St=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ot="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Tt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Pt(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)o=d([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(o,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(o,"").toLocaleLowerCase();return n?"MMM"===e?-1!==(i=gt.call(this._shortMonthsParse,a))?i:null:-1!==(i=gt.call(this._longMonthsParse,a))?i:null:"MMM"===e?-1!==(i=gt.call(this._shortMonthsParse,a))||-1!==(i=gt.call(this._longMonthsParse,a))?i:null:-1!==(i=gt.call(this._longMonthsParse,a))||-1!==(i=gt.call(this._shortMonthsParse,a))?i:null}function Ct(t,e){var n;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=k(e);else if(!s(e=t.localeData().monthsParse(e)))return t;return n=Math.min(t.date(),Et(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t}function At(t){return null!=t?(Ct(this,t),r.updateOffset(this,!0),this):wt(this,"Month")}var Nt=st,Dt=st;function Rt(){function t(t,e){return e.length-t.length}var e,n,r=[],i=[],o=[];for(e=0;e<12;e++)n=d([2e3,e]),r.push(this.monthsShort(n,"")),i.push(this.months(n,"")),o.push(this.months(n,"")),o.push(this.monthsShort(n,""));for(r.sort(t),i.sort(t),o.sort(t),e=0;e<12;e++)r[e]=ft(r[e]),i[e]=ft(i[e]);for(e=0;e<24;e++)o[e]=ft(o[e]);this._monthsRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+i.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+r.join("|")+")","i")}function It(t,e,n,r,i,o,a){var s;return t<100&&t>=0?(s=new Date(t+400,e,n,r,i,o,a),isFinite(s.getFullYear())&&s.setFullYear(t)):s=new Date(t,e,n,r,i,o,a),s}function jt(t){var e;if(t<100&&t>=0){var n=Array.prototype.slice.call(arguments);n[0]=t+400,e=new Date(Date.UTC.apply(null,n)),isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t)}else e=new Date(Date.UTC.apply(null,arguments));return e}function xt(t,e,n){var r=7+e-n;return-(7+jt(t,0,r).getUTCDay()-e)%7+r-1}function Mt(t,e,n,r,i){var o,a,s=1+7*(e-1)+(7+n-r)%7+xt(t,r,i);return s<=0?a=mt(o=t-1)+s:s>mt(t)?(o=t+1,a=s-mt(t)):(o=t,a=s),{year:o,dayOfYear:a}}function Lt(t,e,n){var r,i,o=xt(t.year(),e,n),a=Math.floor((t.dayOfYear()-o-1)/7)+1;return a<1?r=a+Vt(i=t.year()-1,e,n):a>Vt(t.year(),e,n)?(r=a-Vt(t.year(),e,n),i=t.year()+1):(i=t.year(),r=a),{week:r,year:i}}function Vt(t,e,n){var r=xt(t,e,n),i=xt(t+1,e,n);return(mt(t)-r+i)/7}function Yt(t,e){return t.slice(e,7).concat(t.slice(0,e))}H("w",["ww",2],"wo","week"),H("W",["WW",2],"Wo","isoWeek"),I("week","w"),I("isoWeek","W"),L("week",5),L("isoWeek",5),ut("w",Z),ut("ww",Z,G),ut("W",Z),ut("WW",Z,G),pt(["w","ww","W","WW"],(function(t,e,n,r){e[r.substr(0,1)]=k(t)})),H("d",0,"do","day"),H("dd",0,0,(function(t){return this.localeData().weekdaysMin(this,t)})),H("ddd",0,0,(function(t){return this.localeData().weekdaysShort(this,t)})),H("dddd",0,0,(function(t){return this.localeData().weekdays(this,t)})),H("e",0,0,"weekday"),H("E",0,0,"isoWeekday"),I("day","d"),I("weekday","e"),I("isoWeekday","E"),L("day",11),L("weekday",11),L("isoWeekday",11),ut("d",Z),ut("e",Z),ut("E",Z),ut("dd",(function(t,e){return e.weekdaysMinRegex(t)})),ut("ddd",(function(t,e){return e.weekdaysShortRegex(t)})),ut("dddd",(function(t,e){return e.weekdaysRegex(t)})),pt(["dd","ddd","dddd"],(function(t,e,n,r){var i=n._locale.weekdaysParse(t,r,n._strict);null!=i?e.d=i:h(n).invalidWeekday=t})),pt(["d","e","E"],(function(t,e,n,r){e[r]=k(t)}));var Bt="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),$t="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ut="Su_Mo_Tu_We_Th_Fr_Sa".split("_");function Ht(t,e,n){var r,i,o,a=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)o=d([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(o,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(o,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(o,"").toLocaleLowerCase();return n?"dddd"===e?-1!==(i=gt.call(this._weekdaysParse,a))?i:null:"ddd"===e?-1!==(i=gt.call(this._shortWeekdaysParse,a))?i:null:-1!==(i=gt.call(this._minWeekdaysParse,a))?i:null:"dddd"===e?-1!==(i=gt.call(this._weekdaysParse,a))||-1!==(i=gt.call(this._shortWeekdaysParse,a))||-1!==(i=gt.call(this._minWeekdaysParse,a))?i:null:"ddd"===e?-1!==(i=gt.call(this._shortWeekdaysParse,a))||-1!==(i=gt.call(this._weekdaysParse,a))||-1!==(i=gt.call(this._minWeekdaysParse,a))?i:null:-1!==(i=gt.call(this._minWeekdaysParse,a))||-1!==(i=gt.call(this._weekdaysParse,a))||-1!==(i=gt.call(this._shortWeekdaysParse,a))?i:null}var Ft=st,Wt=st,qt=st;function Gt(){function t(t,e){return e.length-t.length}var e,n,r,i,o,a=[],s=[],c=[],u=[];for(e=0;e<7;e++)n=d([2e3,1]).day(e),r=this.weekdaysMin(n,""),i=this.weekdaysShort(n,""),o=this.weekdays(n,""),a.push(r),s.push(i),c.push(o),u.push(r),u.push(i),u.push(o);for(a.sort(t),s.sort(t),c.sort(t),u.sort(t),e=0;e<7;e++)s[e]=ft(s[e]),c[e]=ft(c[e]),u[e]=ft(u[e]);this._weekdaysRegex=new RegExp("^("+u.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+c.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+a.join("|")+")","i")}function zt(){return this.hours()%12||12}function Jt(t,e){H(t,0,0,(function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)}))}function Kt(t,e){return e._meridiemParse}H("H",["HH",2],0,"hour"),H("h",["hh",2],0,zt),H("k",["kk",2],0,(function(){return this.hours()||24})),H("hmm",0,0,(function(){return""+zt.apply(this)+V(this.minutes(),2)})),H("hmmss",0,0,(function(){return""+zt.apply(this)+V(this.minutes(),2)+V(this.seconds(),2)})),H("Hmm",0,0,(function(){return""+this.hours()+V(this.minutes(),2)})),H("Hmmss",0,0,(function(){return""+this.hours()+V(this.minutes(),2)+V(this.seconds(),2)})),Jt("a",!0),Jt("A",!1),I("hour","h"),L("hour",13),ut("a",Kt),ut("A",Kt),ut("H",Z),ut("h",Z),ut("k",Z),ut("HH",Z,G),ut("hh",Z,G),ut("kk",Z,G),ut("hmm",Q),ut("hmmss",X),ut("Hmm",Q),ut("Hmmss",X),ht(["H","HH"],3),ht(["k","kk"],(function(t,e,n){var r=k(t);e[3]=24===r?0:r})),ht(["a","A"],(function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t})),ht(["h","hh"],(function(t,e,n){e[3]=k(t),h(n).bigHour=!0})),ht("hmm",(function(t,e,n){var r=t.length-2;e[3]=k(t.substr(0,r)),e[4]=k(t.substr(r)),h(n).bigHour=!0})),ht("hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=k(t.substr(0,r)),e[4]=k(t.substr(r,2)),e[5]=k(t.substr(i)),h(n).bigHour=!0})),ht("Hmm",(function(t,e,n){var r=t.length-2;e[3]=k(t.substr(0,r)),e[4]=k(t.substr(r))})),ht("Hmmss",(function(t,e,n){var r=t.length-4,i=t.length-2;e[3]=k(t.substr(0,r)),e[4]=k(t.substr(r,2)),e[5]=k(t.substr(i))}));var Zt,Qt=_t("Hours",!0),Xt={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ot,monthsShort:Tt,week:{dow:0,doy:6},weekdays:Bt,weekdaysMin:Ut,weekdaysShort:$t,meridiemParse:/[ap]\.?m?\.?/i},te={},ee={};function ne(t){return t?t.toLowerCase().replace("_","-"):t}function re(e){var n=null;if(!te[e]&&void 0!==t&&t&&t.exports)try{n=Zt._abbr,function(){var t=new Error("Cannot find module 'undefined'");throw t.code="MODULE_NOT_FOUND",t}(),ie(n)}catch(t){}return te[e]}function ie(t,e){var n;return t&&((n=a(e)?ae(t):oe(t,e))?Zt=n:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+t+" not found. Did you forget to load it?")),Zt._abbr}function oe(t,e){if(null!==e){var n,r=Xt;if(e.abbr=t,null!=te[t])C("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=te[t]._config;else if(null!=e.parentLocale)if(null!=te[e.parentLocale])r=te[e.parentLocale]._config;else{if(null==(n=re(e.parentLocale)))return ee[e.parentLocale]||(ee[e.parentLocale]=[]),ee[e.parentLocale].push({name:t,config:e}),null;r=n._config}return te[t]=new D(N(r,e)),ee[t]&&ee[t].forEach((function(t){oe(t.name,t.config)})),ie(t),te[t]}return delete te[t],null}function ae(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return Zt;if(!i(t)){if(e=re(t))return e;t=[t]}return function(t){for(var e,n,r,i,o=0;o<t.length;){for(e=(i=ne(t[o]).split("-")).length,n=(n=ne(t[o+1]))?n.split("-"):null;e>0;){if(r=re(i.slice(0,e).join("-")))return r;if(n&&n.length>=e&&E(i,n,!0)>=e-1)break;e--}o++}return Zt}(t)}function se(t){var e,n=t._a;return n&&-2===h(t).overflow&&(e=n[1]<0||n[1]>11?1:n[2]<1||n[2]>Et(n[0],n[1])?2:n[3]<0||n[3]>24||24===n[3]&&(0!==n[4]||0!==n[5]||0!==n[6])?3:n[4]<0||n[4]>59?4:n[5]<0||n[5]>59?5:n[6]<0||n[6]>999?6:-1,h(t)._overflowDayOfYear&&(e<0||e>2)&&(e=2),h(t)._overflowWeeks&&-1===e&&(e=7),h(t)._overflowWeekday&&-1===e&&(e=8),h(t).overflow=e),t}function ce(t,e,n){return null!=t?t:null!=e?e:n}function ue(t){var e,n,i,o,a,s=[];if(!t._d){for(i=function(t){var e=new Date(r.now());return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}(t),t._w&&null==t._a[2]&&null==t._a[1]&&function(t){var e,n,r,i,o,a,s,c;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)o=1,a=4,n=ce(e.GG,t._a[0],Lt(Se(),1,4).year),r=ce(e.W,1),((i=ce(e.E,1))<1||i>7)&&(c=!0);else{o=t._locale._week.dow,a=t._locale._week.doy;var u=Lt(Se(),o,a);n=ce(e.gg,t._a[0],u.year),r=ce(e.w,u.week),null!=e.d?((i=e.d)<0||i>6)&&(c=!0):null!=e.e?(i=e.e+o,(e.e<0||e.e>6)&&(c=!0)):i=o}r<1||r>Vt(n,o,a)?h(t)._overflowWeeks=!0:null!=c?h(t)._overflowWeekday=!0:(s=Mt(n,r,i,o,a),t._a[0]=s.year,t._dayOfYear=s.dayOfYear)}(t),null!=t._dayOfYear&&(a=ce(t._a[0],i[0]),(t._dayOfYear>mt(a)||0===t._dayOfYear)&&(h(t)._overflowDayOfYear=!0),n=jt(a,0,t._dayOfYear),t._a[1]=n.getUTCMonth(),t._a[2]=n.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=s[e]=i[e];for(;e<7;e++)t._a[e]=s[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[3]&&0===t._a[4]&&0===t._a[5]&&0===t._a[6]&&(t._nextDay=!0,t._a[3]=0),t._d=(t._useUTC?jt:It).apply(null,s),o=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[3]=24),t._w&&void 0!==t._w.d&&t._w.d!==o&&(h(t).weekdayMismatch=!0)}}var le=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,fe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,de=/Z|[+-]\d\d(?::?\d\d)?/,he=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],pe=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],ve=/^\/?Date\((\-?\d+)/i;function me(t){var e,n,r,i,o,a,s=t._i,c=le.exec(s)||fe.exec(s);if(c){for(h(t).iso=!0,e=0,n=he.length;e<n;e++)if(he[e][1].exec(c[1])){i=he[e][0],r=!1!==he[e][2];break}if(null==i)return void(t._isValid=!1);if(c[3]){for(e=0,n=pe.length;e<n;e++)if(pe[e][1].exec(c[3])){o=(c[2]||" ")+pe[e][0];break}if(null==o)return void(t._isValid=!1)}if(!r&&null!=o)return void(t._isValid=!1);if(c[4]){if(!de.exec(c[4]))return void(t._isValid=!1);a="Z"}t._f=i+(o||"")+(a||""),we(t)}else t._isValid=!1}var ye=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function ge(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}var be={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function _e(t){var e,n,r,i,o,a,s,c=ye.exec(t._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(c){var u=(e=c[4],n=c[3],r=c[2],i=c[5],o=c[6],a=c[7],s=[ge(e),Tt.indexOf(n),parseInt(r,10),parseInt(i,10),parseInt(o,10)],a&&s.push(parseInt(a,10)),s);if(!function(t,e,n){return!t||$t.indexOf(t)===new Date(e[0],e[1],e[2]).getDay()||(h(n).weekdayMismatch=!0,n._isValid=!1,!1)}(c[1],u,t))return;t._a=u,t._tzm=function(t,e,n){if(t)return be[t];if(e)return 0;var r=parseInt(n,10),i=r%100;return(r-i)/100*60+i}(c[8],c[9],c[10]),t._d=jt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),h(t).rfc2822=!0}else t._isValid=!1}function we(t){if(t._f!==r.ISO_8601)if(t._f!==r.RFC_2822){t._a=[],h(t).empty=!0;var e,n,i,o,a,s=""+t._i,c=s.length,u=0;for(i=W(t._f,t._locale).match(Y)||[],e=0;e<i.length;e++)o=i[e],(n=(s.match(lt(o,t))||[])[0])&&((a=s.substr(0,s.indexOf(n))).length>0&&h(t).unusedInput.push(a),s=s.slice(s.indexOf(n)+n.length),u+=n.length),U[o]?(n?h(t).empty=!1:h(t).unusedTokens.push(o),vt(o,n,t)):t._strict&&!n&&h(t).unusedTokens.push(o);h(t).charsLeftOver=c-u,s.length>0&&h(t).unusedInput.push(s),t._a[3]<=12&&!0===h(t).bigHour&&t._a[3]>0&&(h(t).bigHour=void 0),h(t).parsedDateParts=t._a.slice(0),h(t).meridiem=t._meridiem,t._a[3]=function(t,e,n){var r;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?((r=t.isPM(n))&&e<12&&(e+=12),r||12!==e||(e=0),e):e}(t._locale,t._a[3],t._meridiem),ue(t),se(t)}else _e(t);else me(t)}function ke(t){var e=t._i,n=t._f;return t._locale=t._locale||ae(t._l),null===e||void 0===n&&""===e?v({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),_(e)?new b(se(e)):(c(e)?t._d=e:i(n)?function(t){var e,n,r,i,o;if(0===t._f.length)return h(t).invalidFormat=!0,void(t._d=new Date(NaN));for(i=0;i<t._f.length;i++)o=0,e=y({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[i],we(e),p(e)&&(o+=h(e).charsLeftOver,o+=10*h(e).unusedTokens.length,h(e).score=o,(null==r||o<r)&&(r=o,n=e));f(t,n||e)}(t):n?we(t):function(t){var e=t._i;a(e)?t._d=new Date(r.now()):c(e)?t._d=new Date(e.valueOf()):"string"==typeof e?function(t){var e=ve.exec(t._i);null===e?(me(t),!1===t._isValid&&(delete t._isValid,_e(t),!1===t._isValid&&(delete t._isValid,r.createFromInputFallback(t)))):t._d=new Date(+e[1])}(t):i(e)?(t._a=u(e.slice(0),(function(t){return parseInt(t,10)})),ue(t)):o(e)?function(t){if(!t._d){var e=x(t._i);t._a=u([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],(function(t){return t&&parseInt(t,10)})),ue(t)}}(t):s(e)?t._d=new Date(e):r.createFromInputFallback(t)}(t),p(t)||(t._d=null),t))}function Ee(t,e,n,r,a){var s,c={};return!0!==n&&!1!==n||(r=n,n=void 0),(o(t)&&function(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}(t)||i(t)&&0===t.length)&&(t=void 0),c._isAMomentObject=!0,c._useUTC=c._isUTC=a,c._l=n,c._i=t,c._f=e,c._strict=r,(s=new b(se(ke(c))))._nextDay&&(s.add(1,"d"),s._nextDay=void 0),s}function Se(t,e,n,r){return Ee(t,e,n,r,!1)}r.createFromInputFallback=O("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",(function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))})),r.ISO_8601=function(){},r.RFC_2822=function(){};var Oe=O("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:v()})),Te=O("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",(function(){var t=Se.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:v()}));function Pe(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return Se();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}var Ce=["year","quarter","month","week","day","hour","minute","second","millisecond"];function Ae(t){var e=x(t),n=e.year||0,r=e.quarter||0,i=e.month||0,o=e.week||e.isoWeek||0,a=e.day||0,s=e.hour||0,c=e.minute||0,u=e.second||0,l=e.millisecond||0;this._isValid=function(t){for(var e in t)if(-1===gt.call(Ce,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var n=!1,r=0;r<Ce.length;++r)if(t[Ce[r]]){if(n)return!1;parseFloat(t[Ce[r]])!==k(t[Ce[r]])&&(n=!0)}return!0}(e),this._milliseconds=+l+1e3*u+6e4*c+1e3*s*60*60,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=ae(),this._bubble()}function Ne(t){return t instanceof Ae}function De(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Re(t,e){H(t,0,0,(function(){var t=this.utcOffset(),n="+";return t<0&&(t=-t,n="-"),n+V(~~(t/60),2)+e+V(~~t%60,2)}))}Re("Z",":"),Re("ZZ",""),ut("Z",at),ut("ZZ",at),ht(["Z","ZZ"],(function(t,e,n){n._useUTC=!0,n._tzm=je(at,t)}));var Ie=/([\+\-]|\d\d)/gi;function je(t,e){var n=(e||"").match(t);if(null===n)return null;var r=((n[n.length-1]||[])+"").match(Ie)||["-",0,0],i=60*r[1]+k(r[2]);return 0===i?0:"+"===r[0]?i:-i}function xe(t,e){var n,i;return e._isUTC?(n=e.clone(),i=(_(t)||c(t)?t.valueOf():Se(t).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+i),r.updateOffset(n,!1),n):Se(t).local()}function Me(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Le(){return!!this.isValid()&&this._isUTC&&0===this._offset}r.updateOffset=function(){};var Ve=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Ye=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function Be(t,e){var n,r,i,o,a,c,u=t,f=null;return Ne(t)?u={ms:t._milliseconds,d:t._days,M:t._months}:s(t)?(u={},e?u[e]=t:u.milliseconds=t):(f=Ve.exec(t))?(n="-"===f[1]?-1:1,u={y:0,d:k(f[2])*n,h:k(f[3])*n,m:k(f[4])*n,s:k(f[5])*n,ms:k(De(1e3*f[6]))*n}):(f=Ye.exec(t))?(n="-"===f[1]?-1:1,u={y:$e(f[2],n),M:$e(f[3],n),w:$e(f[4],n),d:$e(f[5],n),h:$e(f[6],n),m:$e(f[7],n),s:$e(f[8],n)}):null==u?u={}:"object"==typeof u&&("from"in u||"to"in u)&&(o=Se(u.from),a=Se(u.to),i=o.isValid()&&a.isValid()?(a=xe(a,o),o.isBefore(a)?c=Ue(o,a):((c=Ue(a,o)).milliseconds=-c.milliseconds,c.months=-c.months),c):{milliseconds:0,months:0},(u={}).ms=i.milliseconds,u.M=i.months),r=new Ae(u),Ne(t)&&l(t,"_locale")&&(r._locale=t._locale),r}function $e(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Ue(t,e){var n={};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function He(t,e){return function(n,r){var i;return null===r||isNaN(+r)||(C(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),Fe(this,Be(n="string"==typeof n?+n:n,r),t),this}}function Fe(t,e,n,i){var o=e._milliseconds,a=De(e._days),s=De(e._months);t.isValid()&&(i=null==i||i,s&&Ct(t,wt(t,"Month")+s*n),a&&kt(t,"Date",wt(t,"Date")+a*n),o&&t._d.setTime(t._d.valueOf()+o*n),i&&r.updateOffset(t,a||s))}Be.fn=Ae.prototype,Be.invalid=function(){return Be(NaN)};var We=He(1,"add"),qe=He(-1,"subtract");function Ge(t,e){var n=12*(e.year()-t.year())+(e.month()-t.month()),r=t.clone().add(n,"months");return-(n+(e-r<0?(e-r)/(r-t.clone().add(n-1,"months")):(e-r)/(t.clone().add(n+1,"months")-r)))||0}function ze(t){var e;return void 0===t?this._locale._abbr:(null!=(e=ae(t))&&(this._locale=e),this)}r.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",r.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Je=O("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",(function(t){return void 0===t?this.localeData():this.locale(t)}));function Ke(){return this._locale}var Ze=1e3,Qe=6e4,Xe=60*Qe,tn=3506328*Xe;function en(t,e){return(t%e+e)%e}function nn(t,e,n){return t<100&&t>=0?new Date(t+400,e,n)-tn:new Date(t,e,n).valueOf()}function rn(t,e,n){return t<100&&t>=0?Date.UTC(t+400,e,n)-tn:Date.UTC(t,e,n)}function on(t,e){H(0,[t,t.length],0,e)}function an(t,e,n,r,i){var o;return null==t?Lt(this,r,i).year:(e>(o=Vt(t,r,i))&&(e=o),sn.call(this,t,e,n,r,i))}function sn(t,e,n,r,i){var o=Mt(t,e,n,r,i),a=jt(o.year,0,o.dayOfYear);return this.year(a.getUTCFullYear()),this.month(a.getUTCMonth()),this.date(a.getUTCDate()),this}H(0,["gg",2],0,(function(){return this.weekYear()%100})),H(0,["GG",2],0,(function(){return this.isoWeekYear()%100})),on("gggg","weekYear"),on("ggggg","weekYear"),on("GGGG","isoWeekYear"),on("GGGGG","isoWeekYear"),I("weekYear","gg"),I("isoWeekYear","GG"),L("weekYear",1),L("isoWeekYear",1),ut("G",it),ut("g",it),ut("GG",Z,G),ut("gg",Z,G),ut("GGGG",et,J),ut("gggg",et,J),ut("GGGGG",nt,K),ut("ggggg",nt,K),pt(["gggg","ggggg","GGGG","GGGGG"],(function(t,e,n,r){e[r.substr(0,2)]=k(t)})),pt(["gg","GG"],(function(t,e,n,i){e[i]=r.parseTwoDigitYear(t)})),H("Q",0,"Qo","quarter"),I("quarter","Q"),L("quarter",7),ut("Q",q),ht("Q",(function(t,e){e[1]=3*(k(t)-1)})),H("D",["DD",2],"Do","date"),I("date","D"),L("date",9),ut("D",Z),ut("DD",Z,G),ut("Do",(function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient})),ht(["D","DD"],2),ht("Do",(function(t,e){e[2]=k(t.match(Z)[0])}));var cn=_t("Date",!0);H("DDD",["DDDD",3],"DDDo","dayOfYear"),I("dayOfYear","DDD"),L("dayOfYear",4),ut("DDD",tt),ut("DDDD",z),ht(["DDD","DDDD"],(function(t,e,n){n._dayOfYear=k(t)})),H("m",["mm",2],0,"minute"),I("minute","m"),L("minute",14),ut("m",Z),ut("mm",Z,G),ht(["m","mm"],4);var un=_t("Minutes",!1);H("s",["ss",2],0,"second"),I("second","s"),L("second",15),ut("s",Z),ut("ss",Z,G),ht(["s","ss"],5);var ln,fn=_t("Seconds",!1);for(H("S",0,0,(function(){return~~(this.millisecond()/100)})),H(0,["SS",2],0,(function(){return~~(this.millisecond()/10)})),H(0,["SSS",3],0,"millisecond"),H(0,["SSSS",4],0,(function(){return 10*this.millisecond()})),H(0,["SSSSS",5],0,(function(){return 100*this.millisecond()})),H(0,["SSSSSS",6],0,(function(){return 1e3*this.millisecond()})),H(0,["SSSSSSS",7],0,(function(){return 1e4*this.millisecond()})),H(0,["SSSSSSSS",8],0,(function(){return 1e5*this.millisecond()})),H(0,["SSSSSSSSS",9],0,(function(){return 1e6*this.millisecond()})),I("millisecond","ms"),L("millisecond",16),ut("S",tt,q),ut("SS",tt,G),ut("SSS",tt,z),ln="SSSS";ln.length<=9;ln+="S")ut(ln,rt);function dn(t,e){e[6]=k(1e3*("0."+t))}for(ln="S";ln.length<=9;ln+="S")ht(ln,dn);var hn=_t("Milliseconds",!1);H("z",0,0,"zoneAbbr"),H("zz",0,0,"zoneName");var pn=b.prototype;function vn(t){return t}pn.add=We,pn.calendar=function(t,e){var n=t||Se(),i=xe(n,this).startOf("day"),o=r.calendarFormat(this,i)||"sameElse",a=e&&(A(e[o])?e[o].call(this,n):e[o]);return this.format(a||this.localeData().calendar(o,this,Se(n)))},pn.clone=function(){return new b(this)},pn.diff=function(t,e,n){var r,i,o;if(!this.isValid())return NaN;if(!(r=xe(t,this)).isValid())return NaN;switch(i=6e4*(r.utcOffset()-this.utcOffset()),e=j(e)){case"year":o=Ge(this,r)/12;break;case"month":o=Ge(this,r);break;case"quarter":o=Ge(this,r)/3;break;case"second":o=(this-r)/1e3;break;case"minute":o=(this-r)/6e4;break;case"hour":o=(this-r)/36e5;break;case"day":o=(this-r-i)/864e5;break;case"week":o=(this-r-i)/6048e5;break;default:o=this-r}return n?o:w(o)},pn.endOf=function(t){var e;if(void 0===(t=j(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?rn:nn;switch(t){case"year":e=n(this.year()+1,0,1)-1;break;case"quarter":e=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":e=n(this.year(),this.month()+1,1)-1;break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":e=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":e=this._d.valueOf(),e+=Xe-en(e+(this._isUTC?0:this.utcOffset()*Qe),Xe)-1;break;case"minute":e=this._d.valueOf(),e+=Qe-en(e,Qe)-1;break;case"second":e=this._d.valueOf(),e+=Ze-en(e,Ze)-1}return this._d.setTime(e),r.updateOffset(this,!0),this},pn.format=function(t){t||(t=this.isUtc()?r.defaultFormatUtc:r.defaultFormat);var e=F(this,t);return this.localeData().postformat(e)},pn.from=function(t,e){return this.isValid()&&(_(t)&&t.isValid()||Se(t).isValid())?Be({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},pn.fromNow=function(t){return this.from(Se(),t)},pn.to=function(t,e){return this.isValid()&&(_(t)&&t.isValid()||Se(t).isValid())?Be({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()},pn.toNow=function(t){return this.to(Se(),t)},pn.get=function(t){return A(this[t=j(t)])?this[t]():this},pn.invalidAt=function(){return h(this).overflow},pn.isAfter=function(t,e){var n=_(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=j(e)||"millisecond")?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(e).valueOf())},pn.isBefore=function(t,e){var n=_(t)?t:Se(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=j(e)||"millisecond")?this.valueOf()<n.valueOf():this.clone().endOf(e).valueOf()<n.valueOf())},pn.isBetween=function(t,e,n,r){var i=_(t)?t:Se(t),o=_(e)?e:Se(e);return!!(this.isValid()&&i.isValid()&&o.isValid())&&("("===(r=r||"()")[0]?this.isAfter(i,n):!this.isBefore(i,n))&&(")"===r[1]?this.isBefore(o,n):!this.isAfter(o,n))},pn.isSame=function(t,e){var n,r=_(t)?t:Se(t);return!(!this.isValid()||!r.isValid())&&("millisecond"===(e=j(e)||"millisecond")?this.valueOf()===r.valueOf():(n=r.valueOf(),this.clone().startOf(e).valueOf()<=n&&n<=this.clone().endOf(e).valueOf()))},pn.isSameOrAfter=function(t,e){return this.isSame(t,e)||this.isAfter(t,e)},pn.isSameOrBefore=function(t,e){return this.isSame(t,e)||this.isBefore(t,e)},pn.isValid=function(){return p(this)},pn.lang=Je,pn.locale=ze,pn.localeData=Ke,pn.max=Te,pn.min=Oe,pn.parsingFlags=function(){return f({},h(this))},pn.set=function(t,e){if("object"==typeof t)for(var n=function(t){var e=[];for(var n in t)e.push({unit:n,priority:M[n]});return e.sort((function(t,e){return t.priority-e.priority})),e}(t=x(t)),r=0;r<n.length;r++)this[n[r].unit](t[n[r].unit]);else if(A(this[t=j(t)]))return this[t](e);return this},pn.startOf=function(t){var e;if(void 0===(t=j(t))||"millisecond"===t||!this.isValid())return this;var n=this._isUTC?rn:nn;switch(t){case"year":e=n(this.year(),0,1);break;case"quarter":e=n(this.year(),this.month()-this.month()%3,1);break;case"month":e=n(this.year(),this.month(),1);break;case"week":e=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":e=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":e=n(this.year(),this.month(),this.date());break;case"hour":e=this._d.valueOf(),e-=en(e+(this._isUTC?0:this.utcOffset()*Qe),Xe);break;case"minute":e=this._d.valueOf(),e-=en(e,Qe);break;case"second":e=this._d.valueOf(),e-=en(e,Ze)}return this._d.setTime(e),r.updateOffset(this,!0),this},pn.subtract=qe,pn.toArray=function(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]},pn.toObject=function(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}},pn.toDate=function(){return new Date(this.valueOf())},pn.toISOString=function(t){if(!this.isValid())return null;var e=!0!==t,n=e?this.clone().utc():this;return n.year()<0||n.year()>9999?F(n,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):A(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",F(n,"Z")):F(n,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},pn.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var n="["+t+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",i=e+'[")]';return this.format(n+r+"-MM-DD[T]HH:mm:ss.SSS"+i)},pn.toJSON=function(){return this.isValid()?this.toISOString():null},pn.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},pn.unix=function(){return Math.floor(this.valueOf()/1e3)},pn.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},pn.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},pn.year=bt,pn.isLeapYear=function(){return yt(this.year())},pn.weekYear=function(t){return an.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},pn.isoWeekYear=function(t){return an.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)},pn.quarter=pn.quarters=function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},pn.month=At,pn.daysInMonth=function(){return Et(this.year(),this.month())},pn.week=pn.weeks=function(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")},pn.isoWeek=pn.isoWeeks=function(t){var e=Lt(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")},pn.weeksInYear=function(){var t=this.localeData()._week;return Vt(this.year(),t.dow,t.doy)},pn.isoWeeksInYear=function(){return Vt(this.year(),1,4)},pn.date=cn,pn.day=pn.days=function(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=function(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}(t,this.localeData()),this.add(t-e,"d")):e},pn.weekday=function(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")},pn.isoWeekday=function(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=function(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7},pn.dayOfYear=function(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")},pn.hour=pn.hours=Qt,pn.minute=pn.minutes=un,pn.second=pn.seconds=fn,pn.millisecond=pn.milliseconds=hn,pn.utcOffset=function(t,e,n){var i,o=this._offset||0;if(!this.isValid())return null!=t?this:NaN;if(null!=t){if("string"==typeof t){if(null===(t=je(at,t)))return this}else Math.abs(t)<16&&!n&&(t*=60);return!this._isUTC&&e&&(i=Me(this)),this._offset=t,this._isUTC=!0,null!=i&&this.add(i,"m"),o!==t&&(!e||this._changeInProgress?Fe(this,Be(t-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,r.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?o:Me(this)},pn.utc=function(t){return this.utcOffset(0,t)},pn.local=function(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Me(this),"m")),this},pn.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=je(ot,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this},pn.hasAlignedHourOffset=function(t){return!!this.isValid()&&(t=t?Se(t).utcOffset():0,(this.utcOffset()-t)%60==0)},pn.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},pn.isLocal=function(){return!!this.isValid()&&!this._isUTC},pn.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},pn.isUtc=Le,pn.isUTC=Le,pn.zoneAbbr=function(){return this._isUTC?"UTC":""},pn.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},pn.dates=O("dates accessor is deprecated. Use date instead.",cn),pn.months=O("months accessor is deprecated. Use month instead",At),pn.years=O("years accessor is deprecated. Use year instead",bt),pn.zone=O("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",(function(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()})),pn.isDSTShifted=O("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",(function(){if(!a(this._isDSTShifted))return this._isDSTShifted;var t={};if(y(t,this),(t=ke(t))._a){var e=t._isUTC?d(t._a):Se(t._a);this._isDSTShifted=this.isValid()&&E(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}));var mn=D.prototype;function yn(t,e,n,r){var i=ae(),o=d().set(r,e);return i[n](o,t)}function gn(t,e,n){if(s(t)&&(e=t,t=void 0),t=t||"",null!=e)return yn(t,e,n,"month");var r,i=[];for(r=0;r<12;r++)i[r]=yn(t,r,n,"month");return i}function bn(t,e,n,r){"boolean"==typeof t?(s(e)&&(n=e,e=void 0),e=e||""):(n=e=t,t=!1,s(e)&&(n=e,e=void 0),e=e||"");var i,o=ae(),a=t?o._week.dow:0;if(null!=n)return yn(e,(n+a)%7,r,"day");var c=[];for(i=0;i<7;i++)c[i]=yn(e,(i+a)%7,r,"day");return c}mn.calendar=function(t,e,n){var r=this._calendar[t]||this._calendar.sameElse;return A(r)?r.call(e,n):r},mn.longDateFormat=function(t){var e=this._longDateFormat[t],n=this._longDateFormat[t.toUpperCase()];return e||!n?e:(this._longDateFormat[t]=n.replace(/MMMM|MM|DD|dddd/g,(function(t){return t.slice(1)})),this._longDateFormat[t])},mn.invalidDate=function(){return this._invalidDate},mn.ordinal=function(t){return this._ordinal.replace("%d",t)},mn.preparse=vn,mn.postformat=vn,mn.relativeTime=function(t,e,n,r){var i=this._relativeTime[n];return A(i)?i(t,e,n,r):i.replace(/%d/i,t)},mn.pastFuture=function(t,e){var n=this._relativeTime[t>0?"future":"past"];return A(n)?n(e):n.replace(/%s/i,e)},mn.set=function(t){var e,n;for(n in t)A(e=t[n])?this[n]=e:this["_"+n]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},mn.months=function(t,e){return t?i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||St).test(e)?"format":"standalone"][t.month()]:i(this._months)?this._months:this._months.standalone},mn.monthsShort=function(t,e){return t?i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[St.test(e)?"format":"standalone"][t.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},mn.monthsParse=function(t,e,n){var r,i,o;if(this._monthsParseExact)return Pt.call(this,t,e,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=d([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[r].test(t))return r;if(n&&"MMM"===e&&this._shortMonthsParse[r].test(t))return r;if(!n&&this._monthsParse[r].test(t))return r}},mn.monthsRegex=function(t){return this._monthsParseExact?(l(this,"_monthsRegex")||Rt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(l(this,"_monthsRegex")||(this._monthsRegex=Dt),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)},mn.monthsShortRegex=function(t){return this._monthsParseExact?(l(this,"_monthsRegex")||Rt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(l(this,"_monthsShortRegex")||(this._monthsShortRegex=Nt),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)},mn.week=function(t){return Lt(t,this._week.dow,this._week.doy).week},mn.firstDayOfYear=function(){return this._week.doy},mn.firstDayOfWeek=function(){return this._week.dow},mn.weekdays=function(t,e){var n=i(this._weekdays)?this._weekdays:this._weekdays[t&&!0!==t&&this._weekdays.isFormat.test(e)?"format":"standalone"];return!0===t?Yt(n,this._week.dow):t?n[t.day()]:n},mn.weekdaysMin=function(t){return!0===t?Yt(this._weekdaysMin,this._week.dow):t?this._weekdaysMin[t.day()]:this._weekdaysMin},mn.weekdaysShort=function(t){return!0===t?Yt(this._weekdaysShort,this._week.dow):t?this._weekdaysShort[t.day()]:this._weekdaysShort},mn.weekdaysParse=function(t,e,n){var r,i,o;if(this._weekdaysParseExact)return Ht.call(this,t,e,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(i=d([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(i,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(i,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(i,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(o="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[r]=new RegExp(o.replace(".",""),"i")),n&&"dddd"===e&&this._fullWeekdaysParse[r].test(t))return r;if(n&&"ddd"===e&&this._shortWeekdaysParse[r].test(t))return r;if(n&&"dd"===e&&this._minWeekdaysParse[r].test(t))return r;if(!n&&this._weekdaysParse[r].test(t))return r}},mn.weekdaysRegex=function(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Gt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(l(this,"_weekdaysRegex")||(this._weekdaysRegex=Ft),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)},mn.weekdaysShortRegex=function(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Gt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(l(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Wt),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},mn.weekdaysMinRegex=function(t){return this._weekdaysParseExact?(l(this,"_weekdaysRegex")||Gt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(l(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=qt),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},mn.isPM=function(t){return"p"===(t+"").toLowerCase().charAt(0)},mn.meridiem=function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},ie("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===k(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),r.lang=O("moment.lang is deprecated. Use moment.locale instead.",ie),r.langData=O("moment.langData is deprecated. Use moment.localeData instead.",ae);var _n=Math.abs;function wn(t,e,n,r){var i=Be(e,n);return t._milliseconds+=r*i._milliseconds,t._days+=r*i._days,t._months+=r*i._months,t._bubble()}function kn(t){return t<0?Math.floor(t):Math.ceil(t)}function En(t){return 4800*t/146097}function Sn(t){return 146097*t/4800}function On(t){return function(){return this.as(t)}}var Tn=On("ms"),Pn=On("s"),Cn=On("m"),An=On("h"),Nn=On("d"),Dn=On("w"),Rn=On("M"),In=On("Q"),jn=On("y");function xn(t){return function(){return this.isValid()?this._data[t]:NaN}}var Mn=xn("milliseconds"),Ln=xn("seconds"),Vn=xn("minutes"),Yn=xn("hours"),Bn=xn("days"),$n=xn("months"),Un=xn("years"),Hn=Math.round,Fn={ss:44,s:45,m:45,h:22,d:26,M:11};function Wn(t,e,n,r,i){return i.relativeTime(e||1,!!n,t,r)}var qn=Math.abs;function Gn(t){return(t>0)-(t<0)||+t}function zn(){if(!this.isValid())return this.localeData().invalidDate();var t,e,n=qn(this._milliseconds)/1e3,r=qn(this._days),i=qn(this._months);t=w(n/60),e=w(t/60),n%=60,t%=60;var o=w(i/12),a=i%=12,s=r,c=e,u=t,l=n?n.toFixed(3).replace(/\.?0+$/,""):"",f=this.asSeconds();if(!f)return"P0D";var d=f<0?"-":"",h=Gn(this._months)!==Gn(f)?"-":"",p=Gn(this._days)!==Gn(f)?"-":"",v=Gn(this._milliseconds)!==Gn(f)?"-":"";return d+"P"+(o?h+o+"Y":"")+(a?h+a+"M":"")+(s?p+s+"D":"")+(c||u||l?"T":"")+(c?v+c+"H":"")+(u?v+u+"M":"")+(l?v+l+"S":"")}var Jn=Ae.prototype;return Jn.isValid=function(){return this._isValid},Jn.abs=function(){var t=this._data;return this._milliseconds=_n(this._milliseconds),this._days=_n(this._days),this._months=_n(this._months),t.milliseconds=_n(t.milliseconds),t.seconds=_n(t.seconds),t.minutes=_n(t.minutes),t.hours=_n(t.hours),t.months=_n(t.months),t.years=_n(t.years),this},Jn.add=function(t,e){return wn(this,t,e,1)},Jn.subtract=function(t,e){return wn(this,t,e,-1)},Jn.as=function(t){if(!this.isValid())return NaN;var e,n,r=this._milliseconds;if("month"===(t=j(t))||"quarter"===t||"year"===t)switch(e=this._days+r/864e5,n=this._months+En(e),t){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(e=this._days+Math.round(Sn(this._months)),t){case"week":return e/7+r/6048e5;case"day":return e+r/864e5;case"hour":return 24*e+r/36e5;case"minute":return 1440*e+r/6e4;case"second":return 86400*e+r/1e3;case"millisecond":return Math.floor(864e5*e)+r;default:throw new Error("Unknown unit "+t)}},Jn.asMilliseconds=Tn,Jn.asSeconds=Pn,Jn.asMinutes=Cn,Jn.asHours=An,Jn.asDays=Nn,Jn.asWeeks=Dn,Jn.asMonths=Rn,Jn.asQuarters=In,Jn.asYears=jn,Jn.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*k(this._months/12):NaN},Jn._bubble=function(){var t,e,n,r,i,o=this._milliseconds,a=this._days,s=this._months,c=this._data;return o>=0&&a>=0&&s>=0||o<=0&&a<=0&&s<=0||(o+=864e5*kn(Sn(s)+a),a=0,s=0),c.milliseconds=o%1e3,t=w(o/1e3),c.seconds=t%60,e=w(t/60),c.minutes=e%60,n=w(e/60),c.hours=n%24,a+=w(n/24),s+=i=w(En(a)),a-=kn(Sn(i)),r=w(s/12),s%=12,c.days=a,c.months=s,c.years=r,this},Jn.clone=function(){return Be(this)},Jn.get=function(t){return t=j(t),this.isValid()?this[t+"s"]():NaN},Jn.milliseconds=Mn,Jn.seconds=Ln,Jn.minutes=Vn,Jn.hours=Yn,Jn.days=Bn,Jn.weeks=function(){return w(this.days()/7)},Jn.months=$n,Jn.years=Un,Jn.humanize=function(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),n=function(t,e,n){var r=Be(t).abs(),i=Hn(r.as("s")),o=Hn(r.as("m")),a=Hn(r.as("h")),s=Hn(r.as("d")),c=Hn(r.as("M")),u=Hn(r.as("y")),l=i<=Fn.ss&&["s",i]||i<Fn.s&&["ss",i]||o<=1&&["m"]||o<Fn.m&&["mm",o]||a<=1&&["h"]||a<Fn.h&&["hh",a]||s<=1&&["d"]||s<Fn.d&&["dd",s]||c<=1&&["M"]||c<Fn.M&&["MM",c]||u<=1&&["y"]||["yy",u];return l[2]=e,l[3]=+t>0,l[4]=n,Wn.apply(null,l)}(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)},Jn.toISOString=zn,Jn.toString=zn,Jn.toJSON=zn,Jn.locale=ze,Jn.localeData=Ke,Jn.toIsoString=O("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",zn),Jn.lang=Je,H("X",0,0,"unix"),H("x",0,0,"valueOf"),ut("x",it),ut("X",/[+-]?\d+(\.\d{1,3})?/),ht("X",(function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))})),ht("x",(function(t,e,n){n._d=new Date(k(t))})),r.version="2.24.0",e=Se,r.fn=pn,r.min=function(){return Pe("isBefore",[].slice.call(arguments,0))},r.max=function(){return Pe("isAfter",[].slice.call(arguments,0))},r.now=function(){return Date.now?Date.now():+new Date},r.utc=d,r.unix=function(t){return Se(1e3*t)},r.months=function(t,e){return gn(t,e,"months")},r.isDate=c,r.locale=ie,r.invalid=v,r.duration=Be,r.isMoment=_,r.weekdays=function(t,e,n){return bn(t,e,n,"weekdays")},r.parseZone=function(){return Se.apply(null,arguments).parseZone()},r.localeData=ae,r.isDuration=Ne,r.monthsShort=function(t,e){return gn(t,e,"monthsShort")},r.weekdaysMin=function(t,e,n){return bn(t,e,n,"weekdaysMin")},r.defineLocale=oe,r.updateLocale=function(t,e){if(null!=e){var n,r,i=Xt;null!=(r=re(t))&&(i=r._config),(n=new D(e=N(i,e))).parentLocale=te[t],te[t]=n,ie(t)}else null!=te[t]&&(null!=te[t].parentLocale?te[t]=te[t].parentLocale:null!=te[t]&&delete te[t]);return te[t]},r.locales=function(){return T(te)},r.weekdaysShort=function(t,e,n){return bn(t,e,n,"weekdaysShort")},r.normalizeUnits=j,r.relativeTimeRounding=function(t){return void 0===t?Hn:"function"==typeof t&&(Hn=t,!0)},r.relativeTimeThreshold=function(t,e){return void 0!==Fn[t]&&(void 0===e?Fn[t]:(Fn[t]=e,"s"===t&&(Fn.ss=e-1),!0))},r.calendarFormat=function(t,e){var n=t.diff(e,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"},r.prototype=pn,r.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"},r}()}).call(this,n(306)(t))},306:function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},309:function(t,e,n){"use strict";(function(t){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var r=n(335),i=n(336),o=n(337);function a(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=c.prototype:(null===t&&(t=new c(e)),t.length=e),t}function c(t,e,n){if(!(c.TYPED_ARRAY_SUPPORT||this instanceof c))return new c(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),c.TYPED_ARRAY_SUPPORT?(t=e).__proto__=c.prototype:t=d(t,e),t}(t,e,n,r):"string"==typeof e?function(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!c.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|p(e,n),i=(t=s(t,r)).write(e,n);return i!==r&&(t=t.slice(0,i)),t}(t,e,n):function(t,e){if(c.isBuffer(e)){var n=0|h(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(r=e.length)!=r?s(t,0):d(t,e);if("Buffer"===e.type&&o(e.data))return d(t,e.data)}var r;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function l(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function f(t,e){if(l(e),t=s(t,e<0?0:0|h(e)),!c.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|h(e.length);t=s(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function h(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function p(t,e){if(c.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return U(t).length;default:if(r)return $(t).length;e=(""+e).toLowerCase(),r=!0}}function v(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return N(this,e,n);case"utf8":case"utf-8":return T(this,e,n);case"ascii":return C(this,e,n);case"latin1":case"binary":return A(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return D(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function m(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function y(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=c.from(e,r)),c.isBuffer(e))return 0===e.length?-1:g(t,e,n,r,i);if("number"==typeof e)return e&=255,c.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):g(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function g(t,e,n,r,i){var o,a=1,s=t.length,c=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,s/=2,c/=2,n/=2}function u(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(i){var l=-1;for(o=n;o<s;o++)if(u(t,o)===u(e,-1===l?0:o-l)){if(-1===l&&(l=o),o-l+1===c)return l*a}else-1!==l&&(o-=o-l),l=-1}else for(n+c>s&&(n=s-c),o=n;o>=0;o--){for(var f=!0,d=0;d<c;d++)if(u(t,o+d)!==u(e,d)){f=!1;break}if(f)return o}return-1}function b(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function _(t,e,n,r){return H($(e,t.length-n),t,n,r)}function w(t,e,n,r){return H(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,r)}function k(t,e,n,r){return w(t,e,n,r)}function E(t,e,n,r){return H(U(e),t,n,r)}function S(t,e,n,r){return H(function(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)r=(n=t.charCodeAt(a))>>8,i=n%256,o.push(i),o.push(r);return o}(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function T(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o,a,s,c,u=t[i],l=null,f=u>239?4:u>223?3:u>191?2:1;if(i+f<=n)switch(f){case 1:u<128&&(l=u);break;case 2:128==(192&(o=t[i+1]))&&(c=(31&u)<<6|63&o)>127&&(l=c);break;case 3:o=t[i+1],a=t[i+2],128==(192&o)&&128==(192&a)&&(c=(15&u)<<12|(63&o)<<6|63&a)>2047&&(c<55296||c>57343)&&(l=c);break;case 4:o=t[i+1],a=t[i+2],s=t[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(c=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&c<1114112&&(l=c)}null===l?(l=65533,f=1):l>65535&&(l-=65536,r.push(l>>>10&1023|55296),l=56320|1023&l),r.push(l),i+=f}return function(t){var e=t.length;if(e<=P)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=P));return n}(r)}e.Buffer=c,e.SlowBuffer=function(t){return+t!=t&&(t=0),c.alloc(+t)},e.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}(),e.kMaxLength=a(),c.poolSize=8192,c._augment=function(t){return t.__proto__=c.prototype,t},c.from=function(t,e,n){return u(null,t,e,n)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(t,e,n){return function(t,e,n,r){return l(e),e<=0?s(t,e):void 0!==n?"string"==typeof r?s(t,e).fill(n,r):s(t,e).fill(n):s(t,e)}(null,t,e,n)},c.allocUnsafe=function(t){return f(null,t)},c.allocUnsafeSlow=function(t){return f(null,t)},c.isBuffer=function(t){return!(null==t||!t._isBuffer)},c.compare=function(t,e){if(!c.isBuffer(t)||!c.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},c.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return c.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=c.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var a=t[n];if(!c.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)m(this,e,e+1);return this},c.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)m(this,e,e+3),m(this,e+1,e+2);return this},c.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)m(this,e,e+7),m(this,e+1,e+6),m(this,e+2,e+5),m(this,e+3,e+4);return this},c.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?T(this,0,t):v.apply(this,arguments)},c.prototype.equals=function(t){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===c.compare(this,t)},c.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},c.prototype.compare=function(t,e,n,r,i){if(!c.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(r>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),u=this.slice(r,i),l=t.slice(e,n),f=0;f<s;++f)if(u[f]!==l[f]){o=u[f],a=l[f];break}return o<a?-1:a<o?1:0},c.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},c.prototype.indexOf=function(t,e,n){return y(this,t,e,n,!0)},c.prototype.lastIndexOf=function(t,e,n){return y(this,t,e,n,!1)},c.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return b(this,t,e,n);case"utf8":case"utf-8":return _(this,t,e,n);case"ascii":return w(this,t,e,n);case"latin1":case"binary":return k(this,t,e,n);case"base64":return E(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var P=4096;function C(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function A(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function N(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=B(t[o]);return i}function D(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function R(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function I(t,e,n,r,i,o){if(!c.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function j(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function x(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function M(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,r,o){return o||M(t,0,n,4),i.write(t,e,n,r,23,4),n+4}function V(t,e,n,r,o){return o||M(t,0,n,8),i.write(t,e,n,r,52,8),n+8}c.prototype.slice=function(t,e){var n,r=this.length;if((t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t),c.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=c.prototype;else{var i=e-t;n=new c(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},c.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},c.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},c.prototype.readUInt8=function(t,e){return e||R(t,1,this.length),this[t]},c.prototype.readUInt16LE=function(t,e){return e||R(t,2,this.length),this[t]|this[t+1]<<8},c.prototype.readUInt16BE=function(t,e){return e||R(t,2,this.length),this[t]<<8|this[t+1]},c.prototype.readUInt32LE=function(t,e){return e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},c.prototype.readUInt32BE=function(t,e){return e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},c.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r>=(i*=128)&&(r-=Math.pow(2,8*e)),r},c.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||R(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*e)),o},c.prototype.readInt8=function(t,e){return e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},c.prototype.readInt16LE=function(t,e){e||R(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(t,e){e||R(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(t,e){return e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},c.prototype.readInt32BE=function(t,e){return e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},c.prototype.readFloatLE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!0,23,4)},c.prototype.readFloatBE=function(t,e){return e||R(t,4,this.length),i.read(this,t,!1,23,4)},c.prototype.readDoubleLE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!0,52,8)},c.prototype.readDoubleBE=function(t,e){return e||R(t,8,this.length),i.read(this,t,!1,52,8)},c.prototype.writeUIntLE=function(t,e,n,r){t=+t,e|=0,n|=0,r||I(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},c.prototype.writeUIntBE=function(t,e,n,r){t=+t,e|=0,n|=0,r||I(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},c.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,255,0),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},c.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},c.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},c.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):x(this,t,e,!0),e+4},c.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},c.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);I(this,t,e,n,i-1,-i)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},c.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,1,127,-128),c.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},c.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):j(this,t,e,!0),e+2},c.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):j(this,t,e,!1),e+2},c.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):x(this,t,e,!0),e+4},c.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||I(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),c.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):x(this,t,e,!1),e+4},c.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},c.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},c.prototype.writeDoubleLE=function(t,e,n){return V(this,t,e,!0,n)},c.prototype.writeDoubleBE=function(t,e,n){return V(this,t,e,!1,n)},c.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!c.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},c.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=c.isBuffer(t)?t:$(new c(t,r).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var Y=/[^+\/0-9A-Za-z-_]/g;function B(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,e){var n;e=e||1/0;for(var r=t.length,i=null,o=[],a=0;a<r;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function U(t){return r.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Y,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function H(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}}).call(this,n(236))},310:function(t,e){var n={utf8:{stringToBytes:function(t){return n.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(n.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e},bytesToString:function(t){for(var e=[],n=0;n<t.length;n++)e.push(String.fromCharCode(t[n]));return e.join("")}}};t.exports=n},311:function(t,e,n){!function(t){"use strict";function e(t,e,n){var r,i;return"m"===n?e?"минута":"минуту":t+" "+(r=+t,i={ss:e?"секунда_секунды_секунд":"секунду_секунды_секунд",mm:e?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"}[n].split("_"),r%10==1&&r%100!=11?i[0]:r%10>=2&&r%10<=4&&(r%100<10||r%100>=20)?i[1]:i[2])}var n=[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[йя]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i];t.defineLocale("ru",{months:{format:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_"),standalone:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_")},monthsShort:{format:"янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.".split("_"),standalone:"янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.".split("_")},weekdays:{standalone:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),format:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_"),isFormat:/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/},weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:n,longMonthsParse:n,shortMonthsParse:n,monthsRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsShortRegex:/^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,monthsStrictRegex:/^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,monthsShortStrictRegex:/^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,longDateFormat:{LT:"H:mm",LTS:"H:mm:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., H:mm",LLLL:"dddd, D MMMM YYYY г., H:mm"},calendar:{sameDay:"[Сегодня, в] LT",nextDay:"[Завтра, в] LT",lastDay:"[Вчера, в] LT",nextWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В следующее] dddd, [в] LT";case 1:case 2:case 4:return"[В следующий] dddd, [в] LT";case 3:case 5:case 6:return"[В следующую] dddd, [в] LT"}},lastWeek:function(t){if(t.week()===this.week())return 2===this.day()?"[Во] dddd, [в] LT":"[В] dddd, [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd, [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd, [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd, [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",ss:e,m:e,mm:e,h:"час",hh:e,d:"день",dd:e,M:"месяц",MM:e,y:"год",yy:e},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(t){return/^(дня|вечера)$/.test(t)},meridiem:function(t,e,n){return t<4?"ночи":t<12?"утра":t<17?"дня":"вечера"},dayOfMonthOrdinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-й";case"D":return t+"-го";case"w":case"W":return t+"-я";default:return t}},week:{dow:1,doy:4}})}(n(305))},328:function(t,e,n){t.exports=n(381)},329:function(t,e){window.AdaptiveHelper=function(){var t=this,e=[{name:"mobile",resolution:0},{name:"tablet",resolution:768},{name:"desktop",resolution:960},{name:"wide",resolution:1280}];this.getBreakpoint=function(){var t=window.innerWidth,n=_.sortBy(e,"resolution").reverse();return _.find(n,(function(e){return e.resolution<=t}))},this.getBreakpointName=function(){return t.getBreakpoint().name},this.getBreakpointResolution=function(){return t.getBreakpoint().resolution},this.getScreenBreakpoint=function(){var t=window.screen.availWidth,n=_.sortBy(e,"resolution").reverse();return _.find(n,(function(e){return e.resolution<=t}))},this.getScreenBreakpointName=function(){return t.getScreenBreakpoint().name},this.getScreenBreakpointResolution=function(){return t.getScreenBreakpoint().resolution},this.onBpChange=function(e){var n=t.getBreakpointName();$(window).resize(_.debounce((function(r){var i=t.getBreakpointName();i!=n&&e(),n=i}),500))},function(){return t}.call(this)}},330:function(t,e){!function(t){"use strict";var e={};function n(){return+new Date}e.merge=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t};var r={startInit:1,loop:!1,timerEndCallback:null};function i(e){this.timeout=e.timeout,this.loop=e.loop,this.active=!0,this.paused=!1,this.running=!1,this.app="CountDownManager",this.ver="0.1",this.uniqId=Math.random().toString(36).substr(2,9),this._timestamps=0,this._downtime=0,this._remainign=0,this._timerEndCallback=e.timerEndCallback,this.callbacks={timerOn:t.proxy(this.timerOn,this),timerEnd:t.proxy(this.timerOn,this)}}e.merge(i.prototype,{start:function(){this.running||(this.paused&&(this._timestamps=this._downtime,this.paused=!1),this._timestamps=n(),this.running=!0,this.timerID=window.setInterval(this.callbacks.timerOn,1e3/60))},pause:function(){this.running&&(this.paused=!0,this.running=!1,this._downtime=this.getDownTime(),this.timerID&&(this.timerID=window.clearInterval(this.timerID),this.timerID=null))},stop:function(t){this.running&&(this._timestamps=0,this.running=!1,this.timerID&&(this.timerID=window.clearInterval(this.timerID),this.timerID=null,t&&t()))},getDownTime:function(){return this.paused?this._downtime:this._timestamps>0?n()-this._timestamps:0},getRemainingTime:function(){return this._timestamps>0?this.timeout-this.getDownTime():0},timerOn:function(){this.getDownTime()>=this.timeout&&(this.active=!1,this._timestamps=0,this.timerEnd(this._timerEndCallback).stop(),this.loop&&this.start())},timerEnd:function(t){return"function"!=typeof t||this.active||t(),this},destroy:function(){var t=this;this.stop((function(){delete t.timerID}))}});var o=function(){var n,o=Array.prototype.slice.call(arguments,0),a={};if("object"===t.type(o[0])){if("object"===t.type(o[0])&&(a=o[0]),"function"!=typeof(a=e.merge(r,a)).timerEndCallback)throw new Error("Settings error: timerEndCallback is not a function");return n=new i(a),a.startInit&&n.start(),n}};window.countdowner=function(){return o.apply([document],arguments)}}(jQuery)},331:function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"use strict";var e=function(e,n,r){return{init:function(){1==n.enabled&&this.hideContent()},hideContent:function(){return n.counter?!(t(e).find(n.tag).filter((function(){return!(""===t.trim(t(this).text())&&0==t(this).children().length)})).length-n.countElement<4)&&(t(e).children(n.tag).slice(n.countElement).wrapAll('<div style="display:none" id="readmore_more_hidden"></div>'),void this.button()):this.button()},button:function(){var i=document.createElement("span"),o=!!r.wrapp;i.id="read_more_trigger",i.innerText="Читать далее",i.className=r.class||"",n.innerText||n.counter?n.counter&&n.innerText?t(e).find("p").eq(n.countElement-1).append(i):n.innerText&&t(e).find("p").last().append(i):t(e).find("#readmore_more_hidden").before(i),o&&(t(i).wrap(r.wrapp),i=i.parentElement),t(i).on("click",(function(n){t(e).find("#readmore_more_hidden").show(),r.callback&&r.callback(),t(this).off(),t(this).remove()}))},removenbsp:function(){t(e).find(n.tag).each((function(){t(this).html(t(this).html().replace(/&nbsp;/gi," ")),""==t.trim(t(this).text())&&0===t(this).find("img").length&&t(this).remove()}))}}};t.fn.readmore=function(r){return this.each((function(){if(r){if("object"!==n(r))throw new Error("extraOptions error: this is not a object");if("string"!=typeof r.wrapp)throw new Error("extraOptions error: wrapp is not a string");if("function"!=typeof r.callback)throw new Error("extraOptions error: callback is not a function")}new e(this,t.fn.readmore.defaultOptions,r).init()}))},t.fn.readmore.defaultOptions={enabled:1,tag:"p, blockquote, table, h2, h3, h4",counter:!1,countElement:3,innerText:!1}}(jQuery)},332:function(t,e){(window.TVRAIN=window.TVRAIN||{}).formateDate=function(t){var e=new Date-t;if(e<1e3)return"только что";var n=Math.floor(e/1e3);if(n<60)return n+" сек. назад";var r=Math.floor(e/6e4);if(r<60)return r+" мин. назад";var i=t;i=["0"+i.getDate(),"0"+(i.getMonth()+1),""+i.getFullYear(),"0"+i.getHours(),"0"+i.getMinutes()];for(var o=0;o<i.length;o++)i[o]=i[o].slice(-2);return i.slice(0,3).join(".")+" "+i.slice(3).join(":")}},333:function(t,e){var n=window.TVRAIN=window.TVRAIN||{};n.UserSubscription=n.UserSubscription||{},n.AuthCookie="ar597Cfjsrjso48ghsfg",n.User={_isGuest:null,id:null,isGuest:function(){return null==this._isGuest&&(this._isGuest=null==$.cookie(n.AuthCookie)),this._isGuest}},n.UserSubscription.isPromo=function(){return parseInt(this.info.promo5)||parseInt(this.info.promo10)||parseInt(this.info.promo10smarttv)||parseInt(this.info.promo30ref)},n.UserSubscription.Adapter={info:{subscriber:null,promo:null,endedInDays:null,lastWasPromo:null,lastSubscription:null,daysLeft:null}},n.UserSubscription.Adapter.setInfo=function(){var t=n.UserSubscription.info;this.info.subscriber=parseInt(t.subscriber),this.info.promo=n.UserSubscription.isPromo(),this.info.endedInDays=parseInt(t.subscription_outdate_period),this.info.lastWasPromo=parseInt(t.last_was_promo),this.info.lastSubscription=t.subscription_outdate_product.hasOwnProperty(0)?t.subscription_outdate_product[0]:t.subscription_outdate_product,this.info.daysLeft=parseInt(t.days_left)},n.UserSubscription.Adapter.getInfo=function(){return null==this.info.subscriber?(this.setInfo(),this.getInfo()):this.info}},334:function(t,e,n){"use strict";(function(t){var e=n(235),r=n.n(e);window.TVRAIN=window.TVRAIN||{},TVRAIN.UTMTrack={cookieName:null,cookieExpire:2,params:{campaign:null,term:"",source:null,medium:null,content:""},init:function(){this.parse(),this.validate()&&this.setCookies()},parse:function(){var t=document.location.search;t=(t=t.substring(1,t.length)).split("&");for(var e=0;e<t.length;e++){var n=t[e].split("=");if("utm_"===n[0].substr(0,4)){var r=n[0].substr(4);this.params[r]=n[1]}}},validate:function(){for(var t in this.params)if(this.params.hasOwnProperty(t)&&null===this.params[t])return!1;return this.params.timestamp=timestamp,!0},getMasterCookieName:function(){return r()("re-master")},setCookies:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{data:this.params,expires:this.cookieExpire},n=e.expires,i=e.data,o=r()(i.campaign+i.medium+i.source);if(!$.cookie(o)){var a=this.getOptions(),s=new t(JSON.stringify(i)).toString("base64");$.cookie("utm_session",s,a),this.sendEvent(s)||(this.addToMaster(o),$.cookie(o,s,n?Object.assign(a,{expires:n}):a))}},addToMaster:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.cookieName,n=this.getMasterCookieName(),r=$.cookie(n);if(r){var i=JSON.parse(new t(r,"base64").toString("utf8"));-1===$.inArray(e,i)&&(i.push(e),$.cookie(n,new t(JSON.stringify(i)).toString("base64"),this.getOptions({expires:this.cookieExpire})))}else $.cookie(n,new t(JSON.stringify([e])).toString("base64"),this.getOptions({expires:this.cookieExpire}))},sendEvent:function(t){return!!$.cookie(TVRAIN.AuthCookie)&&($.getJSON("/track/utm",{data:t}),!0)},getOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign({path:"/",domain:".tvrain.ru"},t)}}}).call(this,n(309).Buffer)},335:function(t,e,n){"use strict";e.byteLength=function(t){var e=u(t),n=e[0],r=e[1];return 3*(n+r)/4-r},e.toByteArray=function(t){for(var e,n=u(t),r=n[0],a=n[1],s=new o(function(t,e,n){return 3*(e+n)/4-n}(0,r,a)),c=0,l=a>0?r-4:r,f=0;f<l;f+=4)e=i[t.charCodeAt(f)]<<18|i[t.charCodeAt(f+1)]<<12|i[t.charCodeAt(f+2)]<<6|i[t.charCodeAt(f+3)],s[c++]=e>>16&255,s[c++]=e>>8&255,s[c++]=255&e;return 2===a&&(e=i[t.charCodeAt(f)]<<2|i[t.charCodeAt(f+1)]>>4,s[c++]=255&e),1===a&&(e=i[t.charCodeAt(f)]<<10|i[t.charCodeAt(f+1)]<<4|i[t.charCodeAt(f+2)]>>2,s[c++]=e>>8&255,s[c++]=255&e),s},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],a=0,s=n-i;a<s;a+=16383)o.push(l(t,a,a+16383>s?s:a+16383));return 1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),o.join("")};for(var r=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,c=a.length;s<c;++s)r[s]=a[s],i[a.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function l(t,e,n){for(var i,o,a=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},336:function(t,e){e.read=function(t,e,n,r,i){var o,a,s=8*i-r-1,c=(1<<s)-1,u=c>>1,l=-7,f=n?i-1:0,d=n?-1:1,h=t[e+f];for(f+=d,o=h&(1<<-l)-1,h>>=-l,l+=s;l>0;o=256*o+t[e+f],f+=d,l-=8);for(a=o&(1<<-l)-1,o>>=-l,l+=r;l>0;a=256*a+t[e+f],f+=d,l-=8);if(0===o)o=1-u;else{if(o===c)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,r),o-=u}return(h?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,s,c,u=8*o-i-1,l=(1<<u)-1,f=l>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,p=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=l):(a=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-a))<1&&(a--,c*=2),(e+=a+f>=1?d/c:d*Math.pow(2,1-f))*c>=2&&(a++,c/=2),a+f>=l?(s=0,a=l):a+f>=1?(s=(e*c-1)*Math.pow(2,i),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;t[n+h]=255&s,h+=p,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;t[n+h]=255&a,h+=p,a/=256,u-=8);t[n+h-p]|=128*v}},337:function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},338:function(t,e){var n,r;n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&r.rotl(t,8)|4278255360&r.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=r.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],n=0,r=0;n<t.length;n++,r+=8)e[r>>>5]|=t[n]<<24-r%32;return e},wordsToBytes:function(t){for(var e=[],n=0;n<32*t.length;n+=8)e.push(t[n>>>5]>>>24-n%32&255);return e},bytesToHex:function(t){for(var e=[],n=0;n<t.length;n++)e.push((t[n]>>>4).toString(16)),e.push((15&t[n]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return e},bytesToBase64:function(t){for(var e=[],r=0;r<t.length;r+=3)for(var i=t[r]<<16|t[r+1]<<8|t[r+2],o=0;o<4;o++)8*r+6*o<=8*t.length?e.push(n.charAt(i>>>6*(3-o)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,i=0;r<t.length;i=++r%4)0!=i&&e.push((n.indexOf(t.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|n.indexOf(t.charAt(r))>>>6-2*i);return e}},t.exports=r},339:function(t,e){function n(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */t.exports=function(t){return null!=t&&(n(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&n(t.slice(0,0))}(t)||!!t._isBuffer)}},340:function(t,e){window.TVRAIN=window.TVRAIN||{},TVRAIN.Url={matchAction:function(t){var e=window.location.pathname.split("/");return!!e.hasOwnProperty(1)&&t===e[1]},matchActions:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter((function(e){return t.matchAction(e)})).length}}},341:function(t,e){window.TVRAIN=window.TVRAIN||{},TVRAIN.Popup=function(){return{show:function(t){$(".modal").remove(),$('<div class="modal modal--hidden">'+t+"</div>").appendTo("body").modal().on($.modal.BEFORE_CLOSE,(function(t,e){$(".layout").removeClass("layout--perspective"),$("body .wrap:first").removeClass("wrap--perspective")})),$(".modal--hidden").removeClass("modal--hidden"),$(".layout").addClass("layout--perspective"),$("body .wrap:first").addClass("wrap--perspective")}}},TVRAIN.UserNotify={delay:5500,notification:function(t){$.amaran({delay:TVRAIN.UserNotify.delay,position:"bottom left",content:{message:t.message,icon:t.icon,type:t.type},inEffect:"slideRight",outEffect:"slideLeft",theme:"target",sticky:!0,closeOnClick:!1,closeButton:!0})}},TVRAIN.NotifyUserWidget=function(){var t=function(t){this.selectors={appendWrapp:document.body,notify:"notify",wrapper:"notify__wrapper",close:"notify__close",message:"notify__message",clickArea:"notify__clickArea",clickButton:"notify__button",default:"notify--default",succses:"notify--succses",error:"notify--error",neutral:"notify--neutral"},this._init(this.selectors,function(t,e){for(var n in e)t[n]=e[n];return t}({},t))};return t.prototype._init=function(t,e){if(_.size(e)>0&&e.message){var n=e.metrics||{};this.handle(t,n),this.notify(t,e,n)}else console.log("notify is empty")},t.prototype.destruct=function(t){$(t).remove()},t.prototype.handle=function(t,e,n){var r=this,i=e.hasOwnProperty("events")&&e.hasOwnProperty("category")?1:0;$(document).on("click","#"+t.close,(function(){r.destruct("."+t.notify),i&&r.sendMetrics(e.events.close,e.category)})),$(document).on("click","."+t.clickButton,(function(){i&&r.sendMetrics(e.events.button,e.category)}))},t.prototype.sendMetrics=function(t,e,n){if(n)return TvrainAnalytics.eventc(e,"show","","");if(!$.isEmptyObject(event)&&!$.isEmptyObject(e)){e=e||0;var r=t.action||0,i=t.label||0,o=t.value||0;return n=event.views||0,TvrainAnalytics.event(e,r,i,o),!0}console.log("metrics empty!")},t.prototype.create=function(t,e,n,r,i){var o=null!=r?'<div class="'+t.clickButton+'">'+r+"</div>":" ";this.new_notify=document.createElement("div"),this.new_notify.className=t.notify+" "+n+"  notify--animation"+i;var a="<div class="+t.wrapper+">";return a+="<div class="+t.message+">",a+=e+o,a+="</div>",a+="</div>",a+='<div class="'+t.close+'" id="'+t.close+'"></div>',this.new_notify.innerHTML=a,t.appendWrapp.insertBefore(this.new_notify,t.appendWrapp.firstChild),!0},t.prototype.update=function(t,e,n,r,i){var o=this;o.destruct("."+t.notify),setTimeout((function(){o.create(t,e,n,r,i)}),1e3)},t.prototype.targeting=function(t){var e,n=t.name?t.name:0,r=t.expires?t.expires:0,i=(new Date).getTime(),o=t.day?864e5*t.day:0;function a(t){return parseInt($.cookie(t)||0)?1:0}return 1==a(n)&&i>parseInt($.cookie(n))+o&&(e=n,$.removeCookie(e,{path:"/"})),0!=n&&0==a(n)&&(function(t,e,n){$.cookie(t,e,{expires:n,path:"/"})}(n,i,r),!0)},t.prototype.notify=function(t,e,n){var r,i=e.message||"",o=e.layout||"",a=e.targeting||0,s=e.button||"",c=e.animation||"Up",u=n.hasOwnProperty("events")&&n.hasOwnProperty("category")?1:0;switch(o){case"error":r=t.error;break;case"succses":r=t.succses;break;case"neutral":r=t.neutral;break;default:r=o}a&&this.targeting(a)&&(this.create(t,i,r,s,c),u&&n.events.views&&this.sendMetrics("",n.category,!0)),$("."+t.notify).length>=1&&this.update(t,i,r,s,c),0===$("."+t.notify).length&&0==a&&0==this.targeting(a)&&this.create(t,i,r,s,c)},{create:function(e){new t(e)}}}},342:function(t,e){(window.TVRAIN=window.TVRAIN||{}).googledocviewer=function(t,e){e=e||{};var n,r={width:640,height:800,class:"docview"};r=_.extend(e,r);var i=$(t).attr("href"),o=i.substring(i.lastIndexOf(".")+1);if(!/^(tiff|doc|ppt|pps|pdf|docx|xlsx)$/.test(o))throw new Error("".concat(o," extension is not supported"));return(n=document.createElement("iframe")).src="//docs.google.com/viewer?embedded=true&url="+encodeURIComponent(i),n.className=r.class+" "+r.class+"--loading",n.style.border=0,n.addEventListener("load",(function(){n.className=r.class})),n}},343:function(t,e,n){(function(t){window.TVRAIN=window.TVRAIN||{},TVRAIN.HellTarget=function(){this.name="hellTarget",this.sessionName="hellTargetFirstSession",this.locationScriptUrl="https://api-maps.yandex.ru/2.0-stable/?load=package.standard&lang=ru-RU",this.location={country:null,city:null,region:null},this.step=1,this.timestamp=null,this.expireTimestamp=null,this.cookieExpireInDays=30,this.listeners=[],this.subscriptionInfo=null,this.prevObserverType=null,this.observerType=null,this.returning=!1,this.init=function(){var t=$.cookie(this.name);t&&(this.getCookieParams(t,(function(){})),$.cookie(this.sessionName)||(this.returning=!0))},this.loadScript=function(){if($('script[src="'+this.locationScriptUrl+'"]').length)return!0;var t=document.createElement("script");t.type="text/javascript",t.src=this.locationScriptUrl,t.async=!0;var e=document.getElementsByTagName("script")[0];return e.parentNode.insertBefore(t,e),!0},this.getLocation=function(t){var e=$.cookie(this.name);e?this.getCookieParams(e,t):this.getServiceLocation(t)},this.getServiceLocation=function(t){var e=this;this.loadScript()&&("undefined"==typeof ymaps?setTimeout((function(){e.getServiceLocation(t)}),1e3):bind(e,ymaps.ready((function(){e.location.country=ymaps.geolocation.country,e.location.city=ymaps.geolocation.city,e.location.region=ymaps.geolocation.region,t()}))))},this.subscribe=function(t){this.listeners.push(t)},this.notify=function(){this.getSubscriptionInfo();for(var t=0;t<this.listeners.length;t++)new this.listeners[t](this).update()},this.getSubscriptionInfo=function(){return null==this.subscriptionInfo?(this.subscriptionInfo=TVRAIN.UserSubscription.Adapter.getInfo(),this.subscriptionInfo):this.subscriptionInfo},this.setCookieParams=function(){return JSON.stringify({location:this.location,step:this.step,timestamp:timestamp,expireTimestamp:this.expireTimestamp,observerType:this.observerType,prevObserverType:this.prevObserverType})},this.getCookieParams=function(e,n){try{e=JSON.parse(decodeURI(new t(e,"base64").toString("utf8"))),this.location=e.location,this.step=e.step,this.timestamp=e.timestamp?e.timestamp:timestamp,this.expireTimestamp=e.expireTimestamp?e.expireTimestamp:timestamp+86400*this.cookieExpireInDays,e.observerType&&(this.observerType=e.observerType),e.prevObserverType&&(this.prevObserverType=e.prevObserverType),n()}catch(t){$.removeCookie(this.name)}},this.setCookie=function(e){e||(e=this.expireTimestamp&&timestamp?Math.abs(this.expireTimestamp-timestamp)/86400:this.cookieExpireInDays),$.cookie(this.name,new t(encodeURI(this.setCookieParams())).toString("base64"),{expires:e,path:"/"}),this.returning||$.cookie(this.sessionName)||$.cookie(this.sessionName,1,{expires:1,path:"/"})},this.setMetrics=function(t){gtag("event","Subscription/Targeting/"+(t||this.observerType),{send_to:"notificationTracker",event_category:"Subscription/Targeting/"+(t||this.observerType),event_action:"show",event_label:"show"});var e=$("body");e.on("click","[data-disable-notification]",(function(e){e.preventDefault(),$.cookie("disable_notification","1",{expires:21,path:"/",domain:".tvrain.ru"}),$("[data-amaran-close]").click(),gtag("event","Subscription/Targeting/"+(t||this.observerType),{send_to:"notificationTracker",event_category:"Subscription/Targeting/"+(t||this.observerType),event_action:"click",event_label:"disable"})})),e.on("click","[data-notification-button]",(function(e){gtag("event","Subscription/Targeting/"+(t||this.observerType),{send_to:"notificationTracker",event_category:"Subscription/Targeting/"+(t||this.observerType),event_action:"click",event_label:"click"})})),e.on("click","[data-amaran-close]",(function(e){gtag("event","Subscription/Targeting/"+(t||this.observerType),{send_to:"notificationTracker",event_category:"Subscription/Targeting/"+(t||this.observerType),event_action:"click",event_label:"close"})}))},this.init()},TVRAIN.HellTarget.Observer=function(t){this.obj=t,this.name=null,this.notificationType=null,this.maxStep=30,this.validate=function(){},this.notify=function(){}},TVRAIN.HellTarget.Observer.prototype.iterate=function(){this.obj.step>=this.maxStep?this.obj.step=1:this.obj.step++},TVRAIN.HellTarget.Observer.prototype.setCookie=function(){this.obj.setCookie()},TVRAIN.HellTarget.Observer.prototype.setMetrics=function(){var t=this.getMetricsCategory();console.log(this.name,this.obj.step,t),this.obj.setMetrics(t)},TVRAIN.HellTarget.Observer.prototype.getMetricsCategory=function(){return this.name+"/"+this.notificationType+"/"+(this.notificationTypeId?this.notificationTypeId+"/":"")+(this.obj.returning?"r":"")},TVRAIN.HellTarget.Observer.prototype.setType=function(){this.obj.observerType!==this.name&&(this.obj.prevObserverType=this.obj.observerType,this.obj.observerType=this.name)},TVRAIN.HellTarget.Observer.prototype.update=function(){this.validate()&&(this.setType(),this.notify(),this.iterate(),this.setCookie())},TVRAIN.HellTarget.Observer.prototype.getRandomItems=function(t,e,n){if(t)try{for(var r=[],i=0;r.length<e;i++){var o=Math.floor(Math.random()*t.length);r.push(t[o]),t.splice(o,1)}n(r)}catch(t){}},TVRAIN.HellTarget.Observer.prototype.renderNotification=function(t){t&&$.get("/static/js/pub/templates/mustache/notification/amaran.basic.mst",(function(e){var n=Mustache.render(e,t);TVRAIN.UserNotify.notification({message:n})}))},TVRAIN.HellTarget.Observer.prototype.getNotificationByType=function(t){switch(this.notificationType="Notification",this.notificationTypeId=t,t){case 1:return{title:"Сделай себе подарок",content:{price:'<div class="amaran__target-content-price">0<div class="amaran__target-content-price-extra">руб. за <span>10</span> дней</div></div>',description:'<div class="amaran__target-content-description">Оставайтесь с нами и смотрите самые популярные программы</div>'},button:{url:"/promo/",name:"Оформить"},additional:!0};case 3:return{title:"Мы видим, что <br>вы нас смотрите",content:{title:'<div class="amaran__target-content-title">ПОДПИСКА НА ГОД</div>',price:'<div class="amaran__target-content-price">3 800<span>руб.</span></div><div class="amaran__target-content-price-discount">4 800 руб.</div>',description:'<div class="amaran__target-content-description">Специально для вас мы подготовили скидку</div>'},button:{url:"/purchase/setgood/?good_class=TvPaidVip2&good_id=7",name:"Оформить"},additional:!0};case 4:return{title:"У вас закончилась подписка",content:{title:'<div class="amaran__target-content-title">ПОДПИСКА НА ГОД</div>',price:'<div class="amaran__target-content-price">4 800<span>руб.</span></div>',description:'<div class="amaran__target-content-description">Оставайтесь с нами и смотрите лучшие программы</div>'},button:{url:"/purchase/setgood/?good_class=TvPaidVip2&good_id=1",name:"Оформить"},additional:!0};case 5:return{title:"Вы — настоящий ценитель До///дя",content:{title:'<div class="amaran__target-content-title">ПОДПИСКА НА ГОД</div>',price:'<div class="amaran__target-content-price">3 800<span>руб.</span></div><div class="amaran__target-content-price-discount">4 800 руб.</div>',description:'<div class="amaran__target-content-description">Напоминаем, что только для вас действует специальная цена</div>'},button:{url:"/purchase/setgood/?good_class=TvPaidVip2&good_id=7",name:"Оформить"},additional:!0};case 6:return{title:"Вы — настоящий ценитель До///дя",content:{title:'<div class="amaran__target-content-title">ПОДПИСКА НА ГОД</div>',price:'<div class="amaran__target-content-price">4 800<span>руб.</span></div>',description:'<div class="amaran__target-content-description">Непонятно, как вы до сих пор живете без подписки</div>'},button:{url:"/purchase/setgood/?good_class=TvPaidVip2&good_id=1",name:"Оформить"},additional:!0};case 7:return{title:"Вы Были с нами, <br>а теперь нам вас не хватает",content:{title:'<div class="amaran__target-content-title">ПОДПИСКА НА МЕСЯЦ</div>',price:'<div class="amaran__target-content-price">240<span>руб.</span></div><div class="amaran__target-content-price-discount">480 руб.</div>',description:'<div class="amaran__target-content-description">Напоминаем, что только для вас действует специальная цена</div>'},button:{url:"/purchase/setgood/?good_class=TvPaidVip2&good_id=28",name:"Оформить"},additional:!0};case 8:return{title:"Вы Были с нами, <br>а теперь нам вас не хватает",content:{title:'<div class="amaran__target-content-title">ПОДПИСКА НА МЕСЯЦ</div>',price:'<div class="amaran__target-content-price">480<span>руб.</span></div>',description:'<div class="amaran__target-content-description">Один день подписки обойдется вам в 16 рублей</div>'},button:{url:"/purchase/setgood/?good_class=TvPaidVip2&good_id=2",name:"Оформить"},additional:!0};case 9:return{title:"Вы — настоящий ценитель До///дя",content:{title:'<div class="amaran__target-content-title">ПОДПИСКА НА МЕСЯЦ</div>',price:'<div class="amaran__target-content-price">240<span>руб.</span></div><div class="amaran__target-content-price-discount">480 руб.</div>',description:'<div class="amaran__target-content-description">Непонятно, как вы до сих пор живете без подписки</div>'},button:{url:"/purchase/setgood/?good_class=TvPaidVip2&good_id=28",name:"Оформить"},additional:!0};case 10:return{title:"Вы — настоящий ценитель До///дя",content:{title:'<div class="amaran__target-content-title">ПОДПИСКА НА МЕСЯЦ</div>',price:'<div class="amaran__target-content-price">480<span>руб.</span></div>',description:'<div class="amaran__target-content-description">Непонятно, как вы до сих пор живете без подписки</div>'},button:{url:"/purchase/setgood/?good_class=TvPaidVip2&good_id=2",name:"Оформить"},additional:!0}}},TVRAIN.HellTarget.Observer.prototype.showPopupSind=function(){this.notificationType="Popup/Sindeeva",$.get("/static/js/pub/templates/mustache/notification/popup.sind.mst",(function(t){TVRAIN.Popup().show(Mustache.render(t))}))},TVRAIN.HellTarget.Observer.prototype.showPopupPromo=function(){this.notificationType="Popup/Promo",$.get("/static/js/pub/templates/mustache/notification/popup.promo.mst",(function(t){TVRAIN.Popup().show(Mustache.render(t))}))},TVRAIN.HellTarget.Observer.prototype.showPopupAnnouncement=function(t){var e=this;this.notificationType="Popup/Announcement";try{$.getJSON("/notifications/getHellAnnouncement",(function(n){n.success&&n.announcement&&e.getRandomItems(n.announcement,3,(function(e){$.get("/static/js/pub/templates/mustache/notification/popup.announcement.mst",(function(n){var r=Mustache.render(n,Object.assign({},{button:{url:"/promo/",text:"Оформить бесплатную подписку на до///дь"}},t,{announcement:e}));TVRAIN.Popup().show(r)}))}))}))}catch(t){}},TVRAIN.HellTarget.Observer.prototype.showOverlay=function(t){var e=this;this.notificationType="Overlay","WasSubscriber"!=this.name&&"WasPromo"!=this.name||(this.notificationTypeId=this.obj.subscriptionInfo.endedInDays>14?"more14days":"less14days");var n=$.getJSON("/notifications/getHellAnnouncement"),r=$.get("/static/js/pub/templates/mustache/notification/overlay.animate.mst?2");$.when(n,r).done((function(n,r){n=n.hasOwnProperty(0)?n[0]:n,r=r.hasOwnProperty(0)?r[0]:r,e.getRandomItems(n.announcement,2,(function(n){"use strict";var i=Mustache.render(r,$.extend({},{button:{url:"/promo/",text:"Оформить бесплатную подписку на до///дь"}},t,{announcement:n}));$("body").append(i);var o,a=$(".notification-overlay-light"),s=$(".notification-overlay"),c=a.height(),u=function(){o=o||s.height(),a.show(),a.height(0),s.css("min-height","auto"),s.animate({height:c},{duration:300,complete:function(){s.hide()}}),a.animate({height:c},300)};s.on("click",(function(){u()})),s.on("click",".notification-overlay__navigation, .notification-overlay__announcement",(function(t){t.stopPropagation()})),a.on("click",(function(){s.show(),s.height(0),s.animate({height:o},{duration:300,comptele:function(){s.css("min-height",o)}}),a.animate({height:0},300)})),a.one("click",(function(){gtag("event","Subscription/Targeting/"+e.getMetricsCategory(),{send_to:"notificationTracker",event_category:"Subscription/Targeting/"+e.getMetricsCategory(),event_action:"show2",event_label:"show2"})})),$(".notification-overlay__close").on("click",(function(t){t.stopPropagation(),$(this).parent().hide()})),setTimeout((function(){u()}),1e3)}))}))},TVRAIN.HellTarget.Observer.guestObserver=function(t){this.obj=t,this.name="Guest",this.maxStep=19,this.validate=function(){return TVRAIN.User.isGuest()},this.notify=function(){switch(this.obj.step){case 1:if(this.obj.returning){this.showOverlay();break}return!1;case 3:this.renderNotification(this.getNotificationByType(1));break;case 6:this.showOverlay();break;case 9:this.showPopupSind();break;default:return!1}this.setMetrics()}},TVRAIN.HellTarget.Observer.newUserObserver=function(t){this.obj=t,this.name="NewUser",this.validate=function(){return!TVRAIN.User.isGuest()&&0==this.obj.subscriptionInfo.subscriber&&0==this.obj.subscriptionInfo.endedInDays&&0==this.obj.subscriptionInfo.lastWasPromo},this.notify=function(){switch(this.obj.step){case 1:this.obj.returning?this.showOverlay():this.renderNotification(this.getNotificationByType(1));break;case 5:this.obj.returning?this.renderNotification(this.getNotificationByType(1)):this.showPopupAnnouncement();break;case 15:this.showPopupSind();break;default:return!1}this.setMetrics()}},TVRAIN.HellTarget.Observer.wasSubscriberObserver=function(t){this.obj=t,this.name="WasSubscriber",this.validate=function(){return!TVRAIN.User.isGuest()&&0!=this.obj.subscriptionInfo.endedInDays&&0==this.obj.subscriptionInfo.lastWasPromo&&0==this.obj.subscriptionInfo.subscriber},this.notify=function(){switch(this.obj.step){case 2:this.renderNotification(this.filterContentBySubscriptionType(this.getNotificationByType(this.obj.subscriptionInfo.endedInDays>14?3:4)));break;case 7:this.showOverlay(this.filterContentBySubscriptionType(this.obj.subscriptionInfo.endedInDays>14?{button:{url:"/purchase/setgood/?good_class=TvPaidVip2&good_id=7",text:"Оформить подписку на год со скидкой"}}:{button:{url:"/purchase/setgood/?good_class=TvPaidVip2&good_id=1",text:"Оформить подписку на год прямо сейчас"}}));break;case 15:this.renderNotification(this.filterContentBySubscriptionType(this.getNotificationByType(this.obj.subscriptionInfo.endedInDays>14?5:6)));break;default:return!1}this.setMetrics()},this.setCookie=function(){this.obj.setCookie(this.obj.subscriptionInfo.endedInDays>14?0:1)},this.filterContentBySubscriptionType=function(t){return this.obj.subscriptionInfo.lastSubscription&&"TvPaidVip2"===this.obj.subscriptionInfo.lastSubscription.class&&function(t){for(var e=[2,4,6,8,16,18,28,42,43],n=0;n<e.length;n++)if(t==e[n])return!0;return!1}.bind(this)(this.obj.subscriptionInfo.lastSubscription.id)&&(t.content=t.content||{},t.content.title='<div class="amaran__target-content-title">Подписка на 3 месяца</div>',t.content.price='<div class="amaran__target-content-price">1 080<span>руб.</span></div><div class="amaran__target-content-price-discount">1 280 руб.</div>',t.button=t.button||{},t.button.url="/purchase/setgood/?good_class=TvPaidVip2&good_id=10",t.button.text="Оформить подписку на 3 месяца со скидкой"),t}},TVRAIN.HellTarget.Observer.wasPromoObserver=function(t){this.obj=t,this.name="WasPromo",this.validate=function(){return!TVRAIN.User.isGuest()&&0==this.obj.subscriptionInfo.subscriber&&0!=this.obj.subscriptionInfo.lastWasPromo},this.notify=function(){switch(this.obj.step){case 3:this.renderNotification(this.getNotificationByType(this.obj.subscriptionInfo.endedInDays>14?7:8));break;case 5:this.showPopupAnnouncement(this.obj.subscriptionInfo.endedInDays>14?{button:{url:"/purchase/setgood/?good_class=TvPaidVip2&good_id=28",text:"Оформить подписку на месяц со скидкой прямо сейчас"}}:{button:{url:"/purchase/setgood/?good_class=TvPaidVip2&good_id=2",text:"Оформить подписку на месяц прямо сейчас"}});break;case 10:this.renderNotification(this.getNotificationByType(this.obj.subscriptionInfo.endedInDays>14?9:10));break;default:return!1}this.setMetrics()},this.setCookie=function(){this.obj.setCookie(this.obj.subscriptionInfo.endedInDays>14?0:1)}},TVRAIN.HellTarget.Observer.activePromoObserver=function(t){this.obj=t,this.name="ActivePromo",this.maxStep=15,this.validate=function(){return!TVRAIN.User.isGuest()&&0!=this.obj.subscriptionInfo.promo&&this.additionalCondition()},this.additionalCondition=function(){return this.obj.subscriptionInfo.daysLeft<=7},this.notify=function(){switch(this.obj.step){case 1:this.showPopupPromo();break;default:return!1}this.setMetrics()}},TVRAIN.HellTarget.Observer.activePromoObserver.prototype=Object.create(TVRAIN.HellTarget.Observer.prototype),TVRAIN.HellTarget.Observer.activePromoObserver.constructor=TVRAIN.HellTarget.Observer.activePromoObserver,TVRAIN.HellTarget.Observer.wasPromoObserver.prototype=Object.create(TVRAIN.HellTarget.Observer.prototype),TVRAIN.HellTarget.Observer.wasPromoObserver.constructor=TVRAIN.HellTarget.Observer.wasPromoObserver,TVRAIN.HellTarget.Observer.wasSubscriberObserver.prototype=Object.create(TVRAIN.HellTarget.Observer.prototype),TVRAIN.HellTarget.Observer.wasSubscriberObserver.constructor=TVRAIN.HellTarget.Observer.wasSubscriberObserver,TVRAIN.HellTarget.Observer.newUserObserver.prototype=Object.create(TVRAIN.HellTarget.Observer.prototype),TVRAIN.HellTarget.Observer.newUserObserver.constructor=TVRAIN.HellTarget.Observer.newUserObserver,TVRAIN.HellTarget.Observer.guestObserver.prototype=Object.create(TVRAIN.HellTarget.Observer.prototype),TVRAIN.HellTarget.Observer.guestObserver.constructor=TVRAIN.HellTarget.Observer.guestObserver}).call(this,n(309).Buffer)},344:function(t,e){TVRAIN.Comments=function(){"use strict";var t=this,e=function(){"guest"==TVRAIN.UserSubscription.info.dimension&&$(document).on("click",".hc__nodisqus__login, .hc__menu__login",(function(){$(".menu__profile").trigger("click")})),t.exec(),$("[data-show-comments-list]").hide(),$("[data-comments-list]").show()};return{init:function(n){t.exec=n,$("[data-show-comments-list-icon], [data-show-comments-list]").on("click",(function(){e()})),window.location.hash&&"#comments"===window.location.hash&&e(),window.location.hash&&window.location.hash.indexOf("#comment")>-1&&e()},show:function(){e()}}}},345:function(t,e){window.TVRAIN=window.TVRAIN||{},window.initGA=function(t){var e="https://www.googletagmanager.com/gtag/js?id=G-69G2VD0DJH";if(!document.querySelector('[src="'+e+'"]')){var n=document.head,r=document.createElement("script");r.async=1,r.src=e,n.insertBefore(r,n.firstChild),window.dataLayer=window.dataLayer||[],window.gtag=o,o("js",new Date);var i={};t&&(i.user_id=t),o("config","G-69G2VD0DJH",Object.assign({},i,{groups:"default"})),o("config","AW-940110865",Object.assign({},i,{groups:"ads"})),o("config","G-2VRLF116NH",Object.assign({},i,{groups:"widgetTracker"})),o("config","UA-21750282-12",Object.assign({},i,{groups:"vodTracker"})),o("config","UA-21750282-15",Object.assign({},i,{groups:"notificationTracker"})),o("config","G-QD16DGP0XW",Object.assign({},i,{groups:"abTracker"})),o("config","UA-21750282-18",Object.assign({},i,{groups:"abcTracker"})),o("set","allowAdFeatures",!0)}function o(){dataLayer.push(arguments)}},TVRAIN.liveAnalytics={steps:0,iterator:null,track:function(){this.iterator||(this.iterator=setInterval((function(){TVRAIN.liveAnalytics.steps++,TVRAIN.liveAnalytics.checkTimeline()}),1e3))},stop:function(){clearInterval(this.iterator),this.iterator=null},checkTimeline:function(){if(!TVRAIN.liveAnalytics.steps)return!1;TVRAIN.liveAnalytics.steps%600==0&&TVRAIN.liveAnalytics.sendEvent()},sendEvent:function(){},getTimeValue:function(){var t=new Date(1e3*this.steps);return TVRAIN.liveAnalytics.formatDate(t.getUTCHours())+":"+TVRAIN.liveAnalytics.formatDate(t.getUTCMinutes())+":"+TVRAIN.liveAnalytics.formatDate(t.getUTCSeconds())},formatDate:function(t){return 1==(t=t.toString()).length?"0"+t:t}}},346:function(t,e){window.TVRAIN=window.TVRAIN||{},TVRAIN.StickyBehavior=function(t){var e,n,r,i=this,o=0;function a(){i.start=$(t.start),i.target=$(t.target),i.area=$(t.area),e=i.start.offset().top+i.start.outerHeight(),r=(i.area.outerHeight()-i.area.height())/2,n=i.area.offset().top+i.area.height()+r-i.target.outerHeight(),"relative"==i.area.css("position")&&(o=i.area.offset().top)}["start","target","area"].forEach((function(e){t[e]&&$(t[e]).length||console.log(e+" element is not defined")})),i.revalidate=a,i.updateScrollDown=function(){"relative"==i.area.css("position")&&(o=i.area.offset().top),n=i.area.offset().top+i.area.height()+r-i.target.outerHeight()};var s=_.throttle((function(){var r=$(window).scrollTop();r<=e&&(i.target.removeClass(t.classProgress),i.target.removeClass(t.classEndpoint),i.target.css("top","")),r>e&&r<n&&(i.target.removeClass(t.classEndpoint),i.target.addClass(t.classProgress),i.target.css("top",0)),r>=n&&(i.target.removeClass(t.classProgress),i.target.addClass(t.classEndpoint),i.target.css("top",n-o))}),50);a(),$(window).off("scroll",s),$(window).on("scroll",s)}},347:function(t,e){TVRAIN.Ads=function(){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;$.cookie("adblock-notification",t,{path:"/",expires:1})};return{run:function(){void 0!==window.adblock||parseInt(TVRAIN.UserSubscription.info.subscriber)||function(){switch(parseInt($.cookie("adblock-notification")||0)){case 0:t();break;case 1:$.get("/static/js/pub/templates/mustache/custom/popup.seeyousoon.mst",(function(t){$("#adblock_message_nest").html(_.template(t)),$(".menu").addClass("menu--adblock")})),t(2)}}()}}}},348:function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}!function(t,e,i){"use strict";var o=function(){function i(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),this.client={user_id:TvrainAnalytics.data.user_id,hash_view:TvrainAnalytics.data.hash_view,hash_long:TvrainAnalytics.data.hash_long,hash_session:TvrainAnalytics.data.hash_session},this.run()}var o,a;return o=i,(a=[{key:"DOMNodeData",value:function(t){var e={},n=t.data(),r={gatherCategory:"category",gatherLabel:"label",gatherValue:"value",gatherVersion:"version"};for(var i in r)n.hasOwnProperty(i)&&(e[r[i]]=n[i]||null);return e}},{key:"collectData",value:function(t){var e={};return e.type=t.type||"event",e.data=this.client,e.data.action=t.action||"click",e.data=_.extend(e.data,t.source),e}},{key:"initGather",value:function(){var r=this;e(document).on("click",(function(i){var o=e(i.target);if(o.attr("data-gather-category"))var a=o;else a=1==o.closest("[data-gather-category]").not("[data-gather-children]").length?o.closest("[data-gather-category]").not("[data-gather-children]"):o.parents("[data-gather-category][data-gather-children]");a.each((function(){var i=e(this),a=r.DOMNodeData(i),s=i.data("gather-children"),c=null;if(o.hasClass(s)||o.closest(s).length>0){if(s!==n(void 0)&&!1!==s){var u=i.find(s);c=o.hasClass(s)?u.index(o):u.index(o.closest(s))}a.value=a.value||c;var l=r.collectData({source:a});TvrainAnalytics.event(l.data.category,l.data.action,l.data.label,l.data.value,l.data.version),"wsq"in t&&wsq.send(l)}else if(1==o.closest("[data-gather-category]").not("[data-gather-children]").length){var f=r.collectData({source:a});TvrainAnalytics.event(f.data.category,f.data.action,f.data.label,f.data.value,f.data.version),"wsq"in t&&wsq.send(f)}}))}))}},{key:"run",value:function(){if(i.instance)return i.instance;i.instance=this,this.initGather()}}])&&r(o.prototype,a),i}();t.Gather=o}(window,jQuery)},349:function(t,e){!function(t){var e=function(e){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==e&&this.setOption(e);var n=this,r=function(){setTimeout((function(){!0===n._options.checkOnLoad&&(!0===n._options.debug&&n._log("onload->eventCallback","A check loading is launched"),null===n._var.bait&&n._creatBait(),setTimeout((function(){n.check()}),1))}),1)};void 0!==t.addEventListener?t.addEventListener("load",r,!1):t.attachEvent("onload",r)};e.prototype._options=null,e.prototype._var=null,e.prototype._bait=null,e.prototype._log=function(t,e){console.log("[FuckAdBlock]["+t+"] "+e)},e.prototype.setOption=function(t,e){if(void 0!==e){var n=t;(t={})[n]=e}for(var r in t)this._options[r]=t[r],!0===this._options.debug&&this._log("setOption",'The option "'+r+'" he was assigned to "'+t[r]+'"');return this},e.prototype._creatBait=function(){var e=document.createElement("div");e.setAttribute("class",this._options.baitClass),e.setAttribute("style",this._options.baitStyle),this._var.bait=t.document.body.appendChild(e),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth,!0===this._options.debug&&this._log("_creatBait","Bait has been created")},e.prototype._destroyBait=function(){t.document.body.removeChild(this._var.bait),this._var.bait=null,!0===this._options.debug&&this._log("_destroyBait","Bait has been removed")},e.prototype.check=function(t){if(void 0===t&&(t=!0),!0===this._options.debug&&this._log("check","An audit was requested "+(!0===t?"with a":"without")+" loop"),!0===this._var.checking)return!0===this._options.debug&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var e=this;return this._var.loopNumber=0,!0===t&&(this._var.loop=setInterval((function(){e._checkBait(t)}),this._options.loopCheckTime)),setTimeout((function(){e._checkBait(t)}),1),!0===this._options.debug&&this._log("check","A check is in progress ..."),!0},e.prototype._checkBait=function(e){var n=!1;if(null===this._var.bait&&this._creatBait(),null===t.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(n=!0),void 0!==t.getComputedStyle){var r=t.getComputedStyle(this._var.bait,null);!r||"none"!=r.getPropertyValue("display")&&"hidden"!=r.getPropertyValue("visibility")||(n=!0)}!0===this._options.debug&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(!0===n?"positive":"negative")),!0===e&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),!0===n?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),!0===e&&(this._var.checking=!1)):null!==this._var.loop&&!1!==e||(this._destroyBait(),this.emitEvent(!1),!0===e&&(this._var.checking=!1))},e.prototype._stopLoop=function(t){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0,!0===this._options.debug&&this._log("_stopLoop","A loop has been stopped")},e.prototype.emitEvent=function(t){!0===this._options.debug&&this._log("emitEvent","An event with a "+(!0===t?"positive":"negative")+" detection was called");var e=this._var.event[!0===t?"detected":"notDetected"];for(var n in e)!0===this._options.debug&&this._log("emitEvent","Call function "+(parseInt(n)+1)+"/"+e.length),e.hasOwnProperty(n)&&e[n]();return!0===this._options.resetOnEnd&&this.clearEvent(),this},e.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],!0===this._options.debug&&this._log("clearEvent","The event list has been cleared")},e.prototype.on=function(t,e){return this._var.event[!0===t?"detected":"notDetected"].push(e),!0===this._options.debug&&this._log("on",'A type of event "'+(!0===t?"detected":"notDetected")+'" was added'),this},e.prototype.onDetected=function(t){return this.on(!0,t)},e.prototype.onNotDetected=function(t){return this.on(!1,t)},t.FuckAdBlock=e,void 0===t.fuckAdBlock&&(t.fuckAdBlock=new e({checkOnLoad:!0,resetOnEnd:!0}))}(window)},381:function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.r(e);var i=function(){return{isMobile:function(){return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(navigator.userAgent.substr(0,4))},getOS:function(){var t="Unknown OS";return-1!=navigator.appVersion.indexOf("Win")&&(t="Windows"),-1!=navigator.appVersion.indexOf("Mac")&&(t="MacOS"),-1!=navigator.appVersion.indexOf("X11")&&(t="UNIX"),-1!=navigator.appVersion.indexOf("Linux")&&(t="Linux"),t},getBrowser:function(){navigator.appVersion;var t,e,n=navigator.userAgent,r=navigator.appName;return-1!=(e=n.indexOf("OPR/"))||-1!=(e=n.indexOf("Opera"))?r="Opera":-1!=(e=n.indexOf("MSIE"))?r="Microsoft Internet Explorer":-1!=n.indexOf("Edge")?r="Edge":-1!=(e=n.indexOf("Chrome"))?r="Chrome":-1!=(e=n.indexOf("Safari"))?r="Safari":-1!=(e=n.indexOf("Firefox"))?r="Firefox":(t=n.lastIndexOf(" ")+1)<(e=n.lastIndexOf("/"))&&(r=n.substring(t,e)).toLowerCase()==r.toUpperCase()&&(r=navigator.appName),r}}};window&&(window.DeviceDetect=i);var o=function(){var t=function(){$(".form-field__dropdown-visual__options--shown").each((function(){$(this).removeClass("form-field__dropdown-visual__options--shown"),$(this).closest(".form-row").removeClass("form-row--relative")}))};return{initDropdowns:function(){$(".form-field__item--dropdown").each((function(){var e=$(this);if(1==e.next(".form-field__dropdown-visual").length)return!0;e.after('<div class="form-field__dropdown-visual"><span></span><div class="form-field__dropdown-visual__options"></div></div>'),e.attr("data-ico")&&e.next(".form-field__dropdown-visual").addClass("form-field__dropdown-visual--ico-"+$(this).attr("data-ico")),e.find("option").each((function(){var n="";$(this).attr("data-icon")&&(n='<div class="form-field__dropdown-visual__options_o__img" data-image="'+$(this).attr("data-icon")+'"></div>');var r=$('<div class="form-field__dropdown-visual__options_o">'+n+$(this).text()+"</div>");e.next(".form-field__dropdown-visual").find(".form-field__dropdown-visual__options").append(r),r.on("click",(function(n){t();var i=e.next(".form-field__dropdown-visual").find(".form-field__dropdown-visual__options_o").index(r);e.get(0).selectedIndex=i,e.change(),n.stopPropagation()}))})),e.next(".form-field__dropdown-visual").on("click",(function(e){t(),$(this).closest(".form-row").addClass("form-row--relative"),$(this).find(".form-field__dropdown-visual__options").toggleClass("form-field__dropdown-visual__options--shown"),e.stopPropagation()}))})),$(".form-field__item--dropdown").on("change",(function(t){$(this).next(".form-field__dropdown-visual").find("span").text($(this).find('option[value="'+$(this).val()+'"]').text())})),$(".form-field__item--dropdown").each((function(){var t=$(this).val();$(this).next(".form-field__dropdown-visual").find("span").text($(this).find('option[value="'+t+'"]').text())})),$("body").bind("click",(function(e){t()}))},initFileInputs:function(){$(".form-field__item--file").each((function(){var t=$(this);if(1==t.next(".form-field__file-visual").length)return!0;t.after('<div class="form-field__file-visual"><span class="form-field__file-visual__button">'+t.attr("data-name")+'</span><span class="form-field__file-visual__filename">не выбран</span></div>'),t.on("change",(function(t){$(this).next(".form-field__file-visual").find(".form-field__file-visual__filename").text($(this).val().replace(/C:\\fakepath\\/i,""))}))}))},initRadios:function(){$(".form-field__item--radio").each((function(){var t=$(this);if(1==t.next(".form-field__radio-visual").length)return!0;t.after('<div class="form-field__radio-visual"><span></span></div>')}))},initCheckboxes:function(){$(".form-field__item--checkbox").each((function(){var t=$(this);if(1==t.next(".form-field__checkbox-visual").length)return!0;t.after('<div class="form-field__checkbox-visual"><span></span></div>')}))}}},a=n(204);n(329),n(330),n(331),n(332),window.TemplateHelper=new function(){var t={path:"/static/js/pub/templates/mustache/",before:"",after:"",load:!1},e={},n=this;return this._templateLoad=function(){var t=e.load||0;e.placeholder&&""==$(e.placeholder).html()&&$.get(e.template).done((function(n){var r=_.template(n,{variable:"data"});"function"==typeof e.after&&(e.load=!0,t?$(e.placeholder).html(r(t)):$(e.placeholder).html(r),e.after(e.placeholder))})).fail((function(t){throw new Error("Fail load template",+t)}))},{load:function(r){var i;return(i=r,(e=_.merge(t,i)).template=t.path+i.template+".mst",n)._templateLoad(),e.load}}},window.SegmentSwitch=function(){var t,e,n,r=this,i={toggle:!1,navigationByHash:!1},o=function(){var t=_.filter(e,(function(t){return $(t).attr("class").indexOf("--active")>-1}));if($(t).length>0){var r=$(t).attr("class").match(/\s(\S+--active)/);r&&r[1]&&(n=r[1].split("--active").join(""))}else n=$(_.first(e)).attr("class")},a=function(){if(window.location.hash){var t=window.location.hash.replace("#",""),r=_.filter(e,(function(e){return $(e).attr("id").indexOf(t)>-1}));$(r).length>0&&$(r).addClass("".concat(n,"--active"))}},s=function(){var s=Array.prototype.slice.call(arguments),c=s[2]||[];for(var u in t=s[0],c)i[u]=c[u];for(var l in e=t.find("[data-segment-switch-item]"),o(),i.navigationByHash&&a(),e.on("click",(function(t){var r=$(this).hasClass(n+"--active");e.removeClass(n+"--active"),r&&!$(this).hasClass("player_menu_el_button_others")&&1==i.toggle?$(this).removeClass(n+"--active"):$(this).addClass(n+"--active")})),s[1])!function(t){$(e.get(t)).on("click",(function(){(0,s[1][t])()}))}(l);return r};this.f2=function(){},s.apply(this,arguments)};var s=n(22),c="[data-slider-item]",u="[data-slider-prev]",l="[data-slider-next]";function f(t){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}window.Slider=function(){var t,e,n,r,i,o,a,f=this,d=0,h=10,p=!0,v="",m=["viewport","oneslide"];this.goNext=function(){var t=g();y(t)},this.goPrev=function(){var t=b();y(t)},this.goBack=function(){P(d)},this.goStart=function(){P(0)},this.getSlider=function(){return t},this.getSliderItems=function(){return n},this.reload=function(){k(),R(),A()},this.setModeScroll=function(t){return v!==t&&m.includes(t)&&(v=t),this},this.setDefaultMode=function(){return this.setModeScroll("viewport"),this},this.getActiveSlide=function(){return n.eq(0).find(c).not(".".concat(a,"--empty")).not(".".concat(a,"--faded"))};var y=function(t){var e=-n.eq(0).find(c).index(t)*i;P(e),T()},g=function(){var t;return t="viewport"===v?_.filter(n.eq(0).find(c).not(".".concat(a,"--empty")),(function(t){return $(t).position().left>o-i})):f.getActiveSlide().nextAll(c).not(".".concat(a,"--empty")),$(_.first(t))},b=function(){var t;return"viewport"===v?(t=_.filter(n.eq(0).find(c).not(".".concat(a,"--empty")),(function(t){return $(t).position().left<-o+i})),$(_.last(t))):f.getActiveSlide().prev(c)},w=function(){var t=_.filter(n.eq(0).find(c),(function(t){return $(t).position().left>=0&&$(t).position().left+i<=o}));return $(t)},k=function(){var t=_.filter(n.eq(0).find(c),(function(t){return $(t).attr("class").indexOf("--")>-1}));if($(t).length>0){var e=$(t).attr("class").match(/\s(\S+--)/);e&&e[1]&&(a=e[1].split("--").join(""))}else a=$(_.first(n.eq(0).find(c))).attr("class")},E=function(t){return t>0||r<=o?t=0:t<o-r&&(t=o-r),t},S=function(){t.find(u).show().removeAttr("disabled"),t.find(l).show().removeAttr("disabled"),0==C()&&t.find(u).fadeOut(300).attr("disabled",!0),C()==o-r&&t.find(l).fadeOut(300).attr("disabled",!0),o>r&&t.find(l,u).fadeOut(300)},O=function(){var t=w();n.find(c).addClass("".concat(a,"--faded")),t.removeClass("".concat(a,"--faded"))},T=function(){var t=E(C());n.css("margin-left",t),setTimeout((function(){S()}),100)},P=function(t){n.animate({"margin-left":E(t)},300,(function(){S(),O(),window.bLazy.revalidate()}))},C=function(){return parseInt(n.css("margin-left").replace("px",""),10)},A=function(){n.length>1&&$(window).width()<1280?(n.find("[data-secondary]").appendTo(n.eq(0)),n.eq(1).hide()):(n.find("[data-secondary]").appendTo(n.eq(1)),n.eq(1).show()),r=n.width()-$(".".concat(a,"--empty")).outerWidth(),i=n.eq(0).find(c).outerWidth(),o=e.width(),Math.floor(o/i),T(),O()},N=function(){n.eq(0).find(c).on("click",(function(){return!1}))},D=function(){n.eq(0).find(c).off("click")},R=function(){p&&(t.find(".".concat(a,"--empty")).remove(),n.append('<div class="'.concat(a," ").concat(a,'--empty" data-slider-item></div>')))},I=function(){var r=Array.prototype.slice.call(arguments);t=$(r[0]),e=t.find("[data-slider-visible]"),n=t.find("[data-slider-items]"),k(),R(),r[1]&&null!=r[1].emptyItem&&(p=r[1].emptyItem),n.length>1&&n.eq(1).find(c).attr("data-secondary","1"),d=0,A(),S(),t.find(u).click((function(){f.goPrev()})),t.find(l).click((function(){f.goNext()}));var i=_.throttle(A,300);$(window).resize(i);var o=new window.AdaptiveHelper;if("mobile"==o.getBreakpoint().name){var a=new window.RegisterBundles;a.registerScript("".concat(s.a,"/static/bower_components/hammerjs/hammer.min.js"),(function(){var t=new Hammer(n.get(0),{direction:Hammer.DIRECTION_HORIZONTAL,domEvents:!0});t.on("panstart",(function(t){d=C(),N()})),t.on("panmove",(function(t){n.css("margin-left",d+t.deltaX),T()})),t.on("panend",(function(t){Math.abs(C()-d)>h?t.deltaX>0?f.goPrev():($(document).trigger("slider-swipe-next"),f.goNext()):f.goBack(),setTimeout((function(){D()}),100)}))}))}this.setDefaultMode()};I.apply(this,arguments)},n(333),n(334),n(340),n(341),n(342),n(343),n(344),n(345),n(346),n(347),window.LivePlayer=function(t,e,n,r,i,o,a){var s=this;s.autostart=void 0===r||r,s.mute=void 0!==a&&a,s.is_demo=i,s.isFullScreen=!1,this.reload=function(){c(s.player_id,s.streams,s.advertising)},this.getPlayer=function(){return s.player_obj},this.playAd=function(t){if(TVRAIN.app.user.isNoAdsSubscriber)return console.log("Реклама отключена");var e=TVRAIN.Serivices.VastService.getVastTagDoubleClick(t);this.getPlayer().playAd(e)},this.setDefaultQuality=function(t){s.default_quality=t,$.cookie("player.default_quality",s.default_quality,{path:"/",expires:365})},this.getQualities=function(t){return s.quality_keys};var c=function(t,e,n){var r,i,o,a;!function(t){t&&(s.advertising=t)}(n),function(t){s.streams=t,"object"==f(s.streams)?($.cookie("player.default_quality")?s.default_quality=parseInt($.cookie("player.default_quality")):s.setDefaultQuality(0),s.quality_keys=Object.keys(s.streams),s.active_stream=s.streams[s.quality_keys[s.default_quality]]):s.active_stream=s.streams}(e),s.player_id=t,s.player_obj=jwplayer(t).setup({file:s.active_stream,width:"100%",height:"100%",androidhls:!0,hlshtml:!0,autostart:s.autostart,advertising:s.advertising,cast:{},mute:s.mute}),i={event:"live_streaming",duration:60,type:"",teleshow_id:""},o=countdowner({timeout:3e4,startInit:0,loop:!0,timerEndCallback:function(){TVRAIN.Serivices.OnAirService.getCurrent().then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(t){var e=t.type,n=void 0===e?"":e,r=t.parent_id,o=void 0===r?"":r;i.type=n,i.teleshow_id=o}}))}}),a=countdowner({timeout:6e4,startInit:0,loop:!0,timerEndCallback:function(){"playing"===s.getPlayer().getState()&&dataLayer.push(i)}}),s.player_obj.on("ready",(function(){!s.is_demo&&"tnsCounterTvrain_ru"in window&&tnsCounterTvrain_ru.hit("tvrain_videoplayer")})),s.player_obj.on("play",(function(t){a.start(),o.start(),!s.is_demo&&"tnsCounterTvrain_ru"in window&&tnsCounterTvrain_ru.hit("tvrain_videostart"),TVRAIN.liveAnalytics.track()})),s.player_obj.on("fullscreen",(function(){s.isFullScreen=!s.isFullScreen})),s.player_obj.on("adPlay",(function(){"dbclick"==s.advertising.type&&(r=s.player_obj.getVolume(),s.player_obj.setVolume(50))})),s.player_obj.on("adComplete",(function(t){"dbclick"==s.advertising.type&&s.player_obj.setVolume(Math.round(r))})),s.player_obj.on("pause",(function(t){s.is_demo||tnsCounterTvrain_ru.hit("tvrain_videoend")})),s.player_obj.on("error",(function(t){var e=s.streams.indexOf("ngenix")>-1?"ngenix":"cdnvideo";try{var n=s.player_obj.getPlaylist()[0].file}catch(t){n=""}TvrainAnalytics.event("player_error",e,t.message,n)})),s.player_obj.on("adError",(function(t){console.log("onAdError "+t.message+" "+t.tag)}))};this.jwPlayerSubscribeButton=function(t,e){if(-1===window.location.href.indexOf("listen")){t=t||"/podpiska/";var n=e.onClick||function(){},r=e.onShow||function(){},i=e.text||"",o=e.className||"",a={button:null,create:function(){this.button=document.createElement("a"),this.button.target="_blank",this.button.classList.add("player_button__subscribe"),this.button.classList.add("player_button__subscribe--live"),o&&this.button.classList.add(o),this.button.style.display="none",this.button.href=t,this.button.innerHTML=i,s.getPlayer().getContainer().appendChild(this.button),r(e.text)},toggle:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.button.style.display=t?"block":"none"}};a.create(),s.getPlayer().on("time",(function(){0!=document.getElementsByClassName("jw-flag-user-inactive").length?a.toggle(!1):a.toggle(!0)})),$(a.button).on("click",n.bind(null,e.text))}},function(t,e,n){return c(t,e,n),s}.call(this,t,e,n)},n(348);var d=n(235),h=n.n(d);function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(e){var n,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset=e||+new Date,this.state=(n={},r=0,{setState:function(t){return n[++r]=t,n[r]},hasState:function(t,e){return function(t,e){var r=!1;for(var i in n)n.hasOwnProperty(i)&&_.isEqual(n[i][e],t[e])&&(r=!0);return r}(t,e)},getState:function(t,e){return t&&e?_.find(n,(function(n){return n[t]==e})):n}}),this.run()}var e,n;return e=t,(n=[{key:"isValidLink",value:function(t){return new RegExp(/(?:\/\/[^\s]+)(js|css)/).test(t)}},{key:"registerScript",value:function(t,e,n){if(this.isValidLink(t)){var r={type:"script",link:t,callback:[]};if(!this.state.hasState(r,"link")){var i=document.createElement("script");i.src=t,i.type="text/javascript",r.script=i,r.load=!1,this.state.setState(r),document[n||"body"].appendChild(i)}if(this.state.getState("link",t)){var o=this.state.getState("link",t);o.callback.push(e),o.load?e():o.script.addEventListener("load",(function(){o.load=!0,o.callback.forEach((function(t){t()}))}))}}}},{key:"registerStyle",value:function(t,e){var n={isAdd:!1,isState:null},r={type:"style",link:e,id:t};if(this.isValidLink(e))if(this.state.hasState(r,"link")||t in window)n.isState=!0;else{var i=document.createElement("link");i.id=t,i.rel="stylesheet",i.type="text/css",i.href=i,i.media="all",this.setState(r),document.getElementsByTagName("head")[0].appendChild(i),n.isAdd=!0}return n}},{key:"run",value:function(){if(this.run=!0,t.instance)return t.instance;t.instance=this}}])&&p(e.prototype,n),t}();function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n(349),window.incognitoDetected=function(){var t=function(t,e){var n=0,r=!1,i=window.setInterval((function(){t()&&(window.clearInterval(i),e(r)),n++>50&&(window.clearInterval(i),e(r=!0))}),10)},e=function(e){var n;if(window.webkitRequestFileSystem)window.webkitRequestFileSystem(window.TEMPORARY,1,(function(){n=!1}),(function(t){console.log(t),n=!0}));else if(window.indexedDB&&/Firefox/.test(window.navigator.userAgent)){var r;try{r=window.indexedDB.open("test")}catch(t){n=!0}void 0===n&&t((function(){return"done"===r.readyState}),(function(t){t||(n=!r.result)}))}else if(function(t){var e=window.navigator.userAgent.toLowerCase();if(0===e.indexOf("msie")&&0===e.indexOf("trident"))return!1;var n=/(?:msie|rv:)\s?([\d\.]+)/.exec(e);return!!(n&&parseInt(n[1],10)>=10)}()){n=!1;try{window.indexedDB||(n=!0)}catch(t){n=!0}}else if(window.localStorage&&/Safari/.test(window.navigator.userAgent)){try{window.localStorage.setItem("test",1)}catch(t){n=!0}void 0===n&&(n=!1,window.localStorage.removeItem("test"))}t((function(){return void 0!==n}),(function(t){e(n)}))};return{detected:function(t){"object"===m(t)?e((function(e){t.privateMode=e})):console.debug("incognitoDetected: arguments is not obj")}}};var y="TVRAIN_LOCAL_STORAGE",g="logout_user_id";function b(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function w(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?b(n,!0).forEach((function(e){k(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function k(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},e=arguments.length>1?arguments[1]:void 0,n=t(e);return{get:function(t){try{return"function"==typeof n["get".concat(t)]?n["get".concat(t)]():n["".concat(t)]}catch(t){return void console.log(t,e)}},getMetrikaParams:function(t){return{category:t,id:"".concat(n.getClass(),"_").concat(n.getId()),url:"/purchase/setgood/?good_class=".concat(n.getClass(),"&good_id=").concat(n.getId()),name:n.getNote(),price:n.getPrice(),variant:n.getDuration()}}}},S=function(t){var e=t.type,n=t.price,r=t.goodName,i=t.goodId,o=t.goodClass,a=t.duration,s=t.goodUrl,c=t.note,u=void 0===c?null:c,l=t.disableAndroidPay,f=t.disableApplePay,d=t.externalId,h=void 0===d?{}:d,p={ApplePay:f,AndroidPay:l};return{hasOtherServiceDisabled:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return p[t]},getType:function(){return e},getSwgSkuId:function(){return h&&h.subscribewithgoogle},getPrice:function(){return Number(Math.trunc(n))},getName:function(){return r},getId:function(){return i},getClass:function(){return o},getDuration:function(){return a},getUrl:function(){return s},getNote:function(){return""===u?null:u}}},O=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=S(t),n=t.startSaleTime,r=t.currentPrice,i=t.data,o=void 0===i?{}:i,a=o.prices,s=void 0===a?[]:a,c=o.hasAccsess,u=void 0!==c&&c,l=o.isPaidFor,f=o.openPaid,d=void 0!==f&&f,h=o.articleId,p=o.paidNotificationStatus,v={articleId:h,isOpen:d,paidNotificationStatus:p,getStartSaleTime:function(){return n},getLastPrice:function(){return parseInt(s[s.length-1].price,10)},getPrices:function(){return s},getCurrentPrice:function(){return r},getAccses:function(){return Boolean(l&&u)}};return w({},e,{},v)},T=function(t,e){switch(e){case"singleArticle":return E.bind(null,O,t);case"timePeriod":return E.bind(null,S,t);default:return E.bind(null,(function(){return t}),t)}};function P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function C(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?P(n,!0).forEach((function(e){A(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):P(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var N={StrategyUpdate:{tvrain:function(t){return{player:function(e){var n=e.selector,r=e.ctx,i=t.json().playlist,o=document.querySelector(n).querySelector(".player"),a=r||o.$player,s=C({},i[0],{playlist:i});a&&a.rebuildPlayer(s,"rebuild")},subcriptionButtons:function(){},tableOfContents:function(){$(".document-limit:not([data-subcription-buttons])").removeClass("document-limit--curtain"),t.hasAccess()||$(".document-limit:not([data-subcription-buttons])").addClass("document-limit--curtain")}}},lite:function(t){return{player:function(e,n){var r=t.json().playlist,i=C({},r[0],{playlist:r}),o=document.querySelector("[data-vodplayer]");o&&o.$player.rebuildPlayer(i,"rebuild")},subcriptionButtons:function(){t.hasAccess()?($(".head").removeClass("head--unpaid"),$("[data-subscribe-button]").hide()):($(".head").addClass("head--unpaid"),$("[data-subscribe-button]").show())}}}}},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.eagle_id,r=void 0===n?0:n,i=t.showPlayer,o=void 0===i||i,a=t.hasAccess,s=void 0!==a&&a,c=t.fullVersionDuraton,u=void 0===c?"":c,l=t.tableOfContents,f=void 0===l?[]:l,d=t.videos,h=void 0===d?[]:d,p=t.video_id,v=t.playlist,m=void 0===v?[]:v,y=t.ppa,g=void 0===y?{}:y,b=t.isPaid;return{getId:function(){return e},getEagleId:function(){return r},showPlayer:function(){return o},isOpen:function(){return t.openPaid},hasAccess:function(){return s},isFullArticle:function(){return""!==u},getTableOfContents:function(){return f},getVideos:function(){return h},getVideoId:function(){return p},getNotificationStatus:function(){return g.notificationStatus},json:function(){return{id:e,eagle_id:r,showPlayer:o,hasAccess:s,fullVersionDuraton:u,tableOfContents:f,videos:h,playlist:m}},get:function(t){return this[t]},isPaid:function(){return b},isVideo:function(){return 0!==h.length}}},R=function(){return"".concat(Math.random().toString(36).substr(2,16))},I=n(16),j={setCookie:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("undefined"!=typeof document){var r=n.expires,i="".concat(t,"=").concat(encodeURIComponent(e));if("number"==typeof r&&r){var o=new Date;o.setTime(o.getTime()+864e5*r),r=o}for(var a in r&&r.toUTCString&&(r=r.toUTCString()),Object.assign(n,{expires:r}),n)if(Object.prototype.hasOwnProperty.call(n,a)){i+="; ".concat(a);var s=n[a];!0!==s&&(i+="=".concat(s))}document.cookie=i}},getCookie:function(t){if("undefined"!=typeof document){var e=document.cookie.match(new RegExp("(?:^|; )".concat(t.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1"),"=([^;]*)")));return e?decodeURIComponent(e[1]):void 0}},deleteCookie:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};j.setCookie(t,"",Object.assign({expires:-1},e))}};window.CookieStorage=j;var x=j,M=["день","дня","дней"];function L(t){return"".concat(t," ").concat((e=M,r=(n=t%100)%10,n>10&&n<20?e[2]:r>1&&r<5?e[1]:1===r?e[0]:e[2]));var e,n,r}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Y=null,B=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.update=null,this.articleId=null,this.ppa=null,this.ppaFromCookie=null,this.type=null,this.prices=[],this.currentPrice={}}var e,n;return e=t,(n=[{key:"getData",value:function(){var t=[];this.prices&&this.prices.length&&this.prices.forEach((function(e){new Date(e.date_start)>new Date&&t.push(e)}));var e=!0;if(!this.currentPrice)return{isPaid:e=!1,leftdays:this.prices[0].leftdays,prices:t};var n=this.currentPrice,r=n.duration,i=n.price,o=n.purchase_url,a=!1,s=this.getLastPrice();return Number(s)===Number(this.currentPrice.price)&&(a=!0),{isPaid:e,isLastPrice:a,prices:t,price:i,duration:r,url:o}}},{key:"getLastPrice",value:function(){return parseInt(this.prices[this.prices.length-1].price,10)}},{key:"getPPA",value:function(){var t,e,n;return"ppa",t=window.location.href,e="ppa".replace(/[\[\]]/g,"\\$&"),(n=new RegExp("[?&]".concat(e,"(=([^&#]*)|&|#|$)")).exec(t))?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}},{key:"getPPAFromCookie",value:function(){var t;return t="ppa_".concat(this.articleId),x.getCookie("ppa_".concat(t))}},{key:"getButtons",value:function(t){var e=t.update,n=void 0!==e&&e,r=t.id;return this.update=n,this.articleId=r,this.update?this.ppa=null:this.ppa=this.getPPA(),this.ppaFromCookie=this.getPPAFromCookie(),this.type=null,this.articleId===Y?new Promise((function(t){t(!0)})):(Y=this.articleId,this.getPpaOffer().then(this.setType.bind(this),this.setDefaultType.bind(this)))}},{key:"setDefaultType",value:function(){var t=this;return new Promise((function(e){t.type="default",e()}))}},{key:"setType",value:function(t){var e=this;return new Promise((function(n){var r,i,o=t.success,a=void 0!==o&&o,s=t.current_price,c=t.prices;a?(e.setOneMaterialType({currentPrice:s,prices:c}),e.ppaFromCookie||(r="ppa_".concat(e.articleId),i=e.ppa,x.setCookie("ppa_".concat(r),i))):e.type="default",n()}))}},{key:"setOneMaterialType",value:function(t){var e=t.currentPrice,n=t.prices;this.currentPrice=e,this.prices=n,(this.currentPrice||this.prices.length)&&(this.type="oneMatherial")}},{key:"getPpaOffer",value:function(){return this.articleId&&(this.ppa||this.ppaFromCookie)?I.a.getPpaOffer(this.articleId,this.ppa||this.ppaFromCookie):new Promise((function(t){t(!0)}))}}])&&V(e.prototype,n),t}();function U(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function H(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F="[data-ppa-head]",W={TITLE:"[data-ppa-title]",INFO:"[data-ppa-info]",LINK:"[data-ppa-link]",PPA_BUTTON:"[data-ppa-button]",PODPISKA_BUTTON:"[data-ppa-podpiska-btn]",PODPISKA_LINK:"[data-ppa-podpiska]"},q={NOTIFICATION_TEXT:"[data-ppa-notification-text]",NOTIFICATION_BLOCK:"[data-ppa-notification]"},G={STOCK_BLOCK:"[data-ppa-stock]",STOCK_LIST:"[data-ppa-stock-list]"},z={BRAND_CLASS:"article_paid__button--brand",NEUTRAL_CLASS:"article_paid__button--neutral",DISABLED_CLASS:"article_paid__button--disabled",HIDDEN_CLASS:"article_paid--hidden",STOCKITEM_CLASS:"article_paid__stockitem"};function J(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function K(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}!function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?U(n,!0).forEach((function(e){H(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):U(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}}({},W,{},q,{},G,{},z,{HEAD:F});var Q=W.TITLE,X=W.INFO,tt=W.LINK,et=W.PPA_BUTTON,nt=W.PODPISKA_BUTTON,rt=W.PODPISKA_LINK,it=q.NOTIFICATION_TEXT,ot=q.NOTIFICATION_BLOCK,at=G.STOCK_BLOCK,st=G.STOCK_LIST,ct=z.BRAND_CLASS,ut=z.NEUTRAL_CLASS,lt=z.DISABLED_CLASS,ft=z.HIDDEN_CLASS,dt=z.STOCKITEM_CLASS,ht=null,pt=[],vt=null,mt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.selector,r=e.update,i=e.id,o=e.ppa;this.update=r,this.id=i;var a=o.prices,s=o.current_price,c=o.isAvailable;this.update&&"done"===vt&&(this.type=null,pt=[],vt=null);var u=document.querySelector(n);return u&&pt.push(u),ht||(ht=new B),c||this.setViews(),(a&&a.length||s)&&(vt="done",ht.setOneMaterialType({prices:a,currentPrice:s})),vt?"done"===vt&&this.setViews():(ht.getButtons({update:this.update,id:i}).then(this.setViews.bind(this),this.setViews.bind(this)),vt="sending"),this}var e,n;return e=t,(n=[{key:"setViews",value:function(){var t=this;vt="done",pt.forEach((function(e){var n;t.nodes={container:n=e,head:n.querySelector(F),title:n.querySelector(Q),info:n.querySelector(X),link:n.querySelector(tt),notification:n.querySelector(ot),notificationText:n.querySelector(it),stock:n.querySelector(at),stockList:n.querySelector(st),ppaBtn:n.querySelector(et),podpiskaBtn:n.querySelector(nt),defaultBlock:n.querySelector('[data-ppa="default"]'),ppaBlock:n.querySelector('[data-ppa="ppa"]'),podpiskaLink:n.querySelector(rt)},t.setView()}))}},{key:"setView",value:function(){this.type=ht.type;var t=this.nodes,e=t.ppaBlock,n=t.defaultBlock,r=t.container;if("oneMatherial"===this.type){this.removeHidden(e);var i=ht.getData();this.setButton(i),this.setYametrika(i)}else r.hasAttribute(["data-subscribe-button"])?this.removeHidden(e):this.removeHidden(n),this.setDefaultButton()}},{key:"setDefaultButton",value:function(){var t=this.nodes.ppaBtn;this.setBrandClass(t),this.removeHidden(t)}},{key:"setButton",value:function(t){var e=t.isPaid,n=t.isLastPrice,r=t.prices,i=this.nodes,o=i.ppaBtn,a=i.notification,s=i.link;e?this.setPaidBtn(t):this.setNotPaidBtn(t),s.removeAttribute("tooltip"),s.setAttribute("data-gather-value","TvPaidArticles"),this.setHead(),n&&e||(this.createStockItem(r),this.removeHidden(a)),this.removeHidden(o)}},{key:"setPaidBtn",value:function(t){var e=t.price,n=t.duration,r=t.url,i=this.nodes.ppaBtn;this.setTitle("".concat(Math.round(e)," р")),this.setInfo("Доступ к материалу ".concat(L(n))),this.setNotification("Сообщить о снижении цены"),this.setUrl(r),this.setBrandClass(i)}},{key:"setNotPaidBtn",value:function(t){var e=t.leftdays,n=void 0===e?"":e,r=this.nodes,i=r.ppaBtn,o=r.link,a=r.podpiskaBtn;this.setTitle("Доступ к материалу"),Number(n)<=0?this.setInfo("Скоро в продаже"):this.setInfo("В продаже через ".concat(L(n))),this.setUrl(""),o.removeAttribute("href"),o.removeAttribute("onclick"),this.setNotification("Сообщить о начале продаж"),this.setNeutralClass(i),this.setBrandClass(a)}},{key:"createStockItem",value:function(t){var e=this.nodes,n=e.stock,r=e.stockList;n&&r&&(this.removeHidden(n),t.forEach((function(t){var e=t.price,n=t.leftdays;if(n>0){var i=document.createElement("li");i.classList.add(dt),i.textContent="Через ".concat(L(n)," ").concat(Math.round(e)," p"),r.appendChild(i)}})))}},{key:"setText",value:function(t,e){this.nodes[t]&&(this.nodes[t].textContent=e)}},{key:"setTitle",value:function(t){this.setText("title",t)}},{key:"setInfo",value:function(t){this.setText("info",t)}},{key:"setNotification",value:function(t){this.setText("notificationText",t)}},{key:"setHead",value:function(){this.setText("head","Купите этот материал или подписку, чтобы посмотреть полную версию.")}},{key:"setUrl",value:function(t){var e=this.nodes.link;e&&(window.User.isGuest()?e.href="/login/?return_url=".concat(encodeURIComponent(t)):e.href=t)}},{key:"addHidden",value:function(t){t&&t.classList.add(ft)}},{key:"removeHidden",value:function(t){t&&t.classList.remove(ft)}},{key:"setBrandClass",value:function(t){t&&(t.classList.add(ct),t.classList.remove(ut),t.classList.remove(lt))}},{key:"setNeutralClass",value:function(t){t&&(t.classList.add(ut),t.classList.add(lt),t.classList.remove(ct))}},{key:"setYametrika",value:function(t){var e=this.nodes,n=e.container,r=e.podpiskaLink,i=e.link,o="default";window.dfp_is_lite&&(o="subcriptionButtons"in n.dataset?"bottom":"top"),this.setYaData(i,o,t),this.setYaDataPodpiska(r,o)}},{key:"setYaDataPodpiska",value:function(t,e){var n=JSON.parse(t.dataset.yametrika),r=n.value;n.value="bottom"===e?r.replace("player","paidvideo"):r,t.dataset.yametrika=JSON.stringify(n)}},{key:"setYaData",value:function(t,e,n){var r=n.isPaid,i=n.duration,o=n.price;if(r){var a=JSON.parse(t.dataset.yametrika),s=a.value;a=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?J(n,!0).forEach((function(e){K(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):J(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},a,{value:"bottom"===e?s.replace("player","paidvideo"):s,goodId:"TvPaidArticles_".concat(this.id),url:"/purchase/setgood/?good_class=TvPaidArticles&good_id=".concat(this.id),name:"ppa_".concat(this.id),cost:Number(o),duration:i,recurringType:"-1"}),t.dataset.yametrika=JSON.stringify(a)}else this.removeDataYaMetrika()}},{key:"removeDataYaMetrika",value:function(){this.nodes.link.removeAttribute("data-yametrika")}}])&&Z(e.prototype,n),t}();function yt(t){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gt(n,!0).forEach((function(e){_t(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gt(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _t(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wt={},kt={player:{classic:"tpl_player_classic",guest:"tpl_player_guest",onematerial:"tpl_player_onematerial",ppa:"tpl_player_ppa"},subcriptionButtons:{classic:"tpl_subscribe_buttons",onematerial:"tpl_subscribe_buttons_onematerial",slider:"tpl_subscribe_buttons_slider",ppa:"tpl_subscribe_buttons_ppa"},tableOfContents:{classic:"tpl_table_of_contents"},find:function(t,e){return"string"==typeof t&&(e?this[t][e]:this[t])}},Et={view:null,viewId:null,data:null,beforeRender:function(t){var e=t.subscriptionTypes,n=void 0===e?[]:e,r=this.checkAccess(t),i=D(bt({},t,{hasAccess:r})),o=this.createGoodsCardData(n);return this.data=bt({},i,{buttons:o}),this.data},checkAccess:function(t){var e=t.hasAccess,n=void 0!==e&&e,r=t.videos,i=void 0===r?[]:r;if(n){var o="tvrain"===this.getStrategyRender(),a=i.length;if(!o||!a)return n;var s=TVRAIN.app.user,c=s.isGuest,u=void 0===c||c,l=s.isSubscriber;if(u||void 0===l||!l)return!1}return n},createGoodsCardData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=[];return t.forEach((function(t){var n=t.type;e.push(T(t,n)())})),e},setView:function(t,e){var n=this.data,r=kt.find(t),i={default:{tableOfContents:"classic"},hasVideo:[{player:"classic",hasAccess:!0},{subcriptionButtons:e||"classic",hasAccess:!0},{player:"ppa",hasAccess:!1},{subcriptionButtons:e||"classic",hasAccess:!1}],noVideo:[{player:"classic",hasAccess:!0},{subcriptionButtons:e||"classic",hasAccess:!0},{player:"ppa",hasAccess:!1},{subcriptionButtons:"ppa",hasAccess:!1}],getViewId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1?arguments[1]:void 0;if("default"!==e&&this[e]){var i=this[e].filter((function(e){return e[t]&&e[n.field]===n.value}))[0];return r[i[t]]}return r[this.default[t]]}},o=i.getViewId(),a=n.getVideos().length?"hasVideo":"noVideo";return"lite"===this.getStrategyRender()&&(a="noVideo"),void 0===o&&(o=i.getViewId(a,{field:"hasAccess",value:n.hasAccess()})),this.viewId=o,this.view=document.getElementById(o),this},getStrategyRender:function(){return window.dfp_is_lite?"lite":"tvrain"},getChacheFromIdNode:function(t){var e=t.selector,n=document.querySelector(e);return n?wt[n.dataset.uniqId]:{}},render:function(t){var e=this,n=t.selector,r=t.data,i=void 0===r?{}:r,o=t.cb,a=void 0===o?function(){}:o,s=t.renders,c=void 0===s?{}:s,u=t.update,l=void 0!==u&&u;if(!n||!document.querySelectorAll(n).length)return!1;var f={selector:n};if(this.beforeRender(i),"string"==typeof c&&(f.type=c,this.setView(c)),"object"===yt(c)){var d=c.type,h=c.viewId,p=c.ctx;f.type=d,f.ctx=p,this.setView(d,h)}if(null!==this.viewId&&null!==this.view){var v=function(t){return t&&t.innerHTML?_.template(t.innerHTML,{variable:"data"}):null}(this.view)(this.data);v&&Array.prototype.slice.call(document.querySelectorAll(n)).forEach((function(t){if(!t.dataset.uniqId){var n=R();t.dataset.uniqId=n,e.saveComponent(n,f)}t.dataset.viewId=e.viewId,e.insertBuild(t,v)}))}if(l){var m=this.getStrategyRender();N.StrategyUpdate[m](this.data)[f.type].call(this,this.getChacheFromIdNode(f))}return"tpl_player_ppa"!==this.viewId&&"tpl_subscribe_buttons_ppa"!==this.viewId||new mt({selector:n,update:l,id:i.id,ppa:i.ppa}),this.afterRender(a),!0},saveComponent:function(t,e){wt[t]||(wt[t]=e)},insertBuild:function(t,e){t.innerHTML=e},reset:function(){this.view=null,this.viewId=null},afterRender:function(t){"function"==typeof t&&t(),this.reset()}};function St(t){return(St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Tt(t,e){return!e||"object"!==St(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pt(t){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ct(t,e){return(Ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var At=document.createElement("a"),Nt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Tt(this,Pt(e).apply(this,arguments))}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ct(t,e)}(e,React.Component),n=e,(r=[{key:"render",value:function(){var t=this.props.data;return React.createElement("div",null,t.map((function(t){return React.createElement("div",{className:"incutwide","data-gather-category":"incut_article","data-gather-label":"wide","data-gather-version":"","data-gather-children":"a",key:!0},Rt(t),Dt(t))})))}}])&&Ot(n.prototype,r),e}(),Dt=function(t){var e=t.image,n=t.eagle_id,r=t.lite,i=t.url;return e?React.createElement("div",{className:"incutwide__r"},n?React.createElement("div",{"data-component":"eplayer",className:"incutwide__image incutwide__image--player  ".concat(r?"incutwide__image--lite":""," "),"data-incut-play-state":!0,"data-incut-play":"#vodplayer-".concat(n),"data-incut-video-id":"".concat(n)},React.createElement("img",{src:e,alt:""})):React.createElement("a",{className:"incutwide__image",href:i},React.createElement("img",{src:e,alt:""}))):null},Rt=function(t){var e,n=t.url,r=t.lite,i=t.name,o=t.subname,a=t.views,s=t.data,c=t.eagle_id,u=t.teleshow;return React.createElement("div",{className:"incutwide__l"},React.createElement("div",{className:"incutwide__category"},c?React.createElement("a",{className:"article__image__play ".concat(r?"article__image__play--lite":""),href:n},React.createElement("span",{className:"article__image__play__icon"})):null," ",React.createElement("a",{href:"".concat(u.url,"?from=incut_video"),className:"article__info__label ".concat(r?"article__info__label--lite":"")},u.name)),React.createElement("div",{className:"incutwide__name"},React.createElement("a",{href:n,className:"incutwide__name__link",target:"_blank"},i)),(e=o)?React.createElement("div",{className:"incutwide__subname"},React.createElement("a",{className:"incutwide__subname__link"},e)):null,React.createElement("div",{className:"incutwide__meta"},React.createElement("div",{className:"meta meta--article-tile"},React.createElement("div",{className:"meta__item"},React.createElement("i",{className:"meta__icon meta__icon--eye"},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"-288 196.4 22.4 8.6"},React.createElement("g",null,React.createElement("path",{d:"M-265.6,201.6c-3-3.2-6.9-5.2-11.2-5.2c-4.3,0-8.3,2-11.2,5.2l0.9,0.8c2.7-3,6.3-4.8,10.3-4.8s7.7,1.9,10.4,4.9"}),React.createElement("path",{d:"M-276.8,198.5c-1.7,0-3,1.3-3,3s1.3,3,3,3s3-1.3,3-3S-275.1,198.5-276.8,198.5z M-275.5,200.8c-0.3,0-0.6-0.3-0.6-0.6 s0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6S-275.2,200.8-275.5,200.8z"})))),React.createElement("div",{className:"meta__value"}," ",a," "),s))))};function It(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var jt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.render=function(t){return ReactDOM.render(React.createElement(Nt,{data:t.data}),At),At}({data:e})}var e,n;return e=t,(n=[{key:"html",get:function(){return this.render.innerHTML}}])&&It(e.prototype,n),t}();function xt(t){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Lt(t,e){return!e||"object"!==xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Vt(t){return(Vt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Yt(t,e){return(Yt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Bt=document.createElement("div"),$t=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Lt(this,Vt(e).apply(this,arguments))}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Yt(t,e)}(e,React.Component),n=e,(r=[{key:"render",value:function(){var t=this.props.data;return React.createElement("div",{className:"dtest2"},t.map((function(t){var e=t.name,n=t.url,r=t.id,i=t.video,o=t.img;return React.createElement("div",{key:r,className:"incut ".concat(i?"incut--video":"")},o?React.createElement("a",{"data-gather-category":"incut_article","data-gather-label":"right","data-gather-version":r,href:n,class:"incut__image"},React.createElement("img",{src:o})):null,React.createElement("a",{"data-gather-category":"incut_article","data-gather-label":"right","data-gather-version":r,href:n,className:"incut__name ".concat(i?"incut__name--video":"")},React.createElement("span",{className:"incut__name__title"},e),React.createElement("span",{className:"incut__name__lead"},"lead")))})))}}])&&Mt(n.prototype,r),e}();function Ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ht(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ft={small:function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.render=function(t){return ReactDOM.render(React.createElement($t,{data:t.data}),Bt),Bt}({data:e})}var e,n;return e=t,(n=[{key:"html",get:function(){return this.render.innerHTML}}])&&Ut(e.prototype,n),t}(),doc:function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},wide:jt,gallery:function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}},Wt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"getIncut",value:function(t,e){if(t.length)return e.reduce((function(t,e){var n=e.build,r=e.marker;if(!e.error&&!n.error)return t.replace(r,n.html)}),t)}},{key:"buildTemplate",value:function(t){return t.map((function(t){var e=t.type,n=t.data,r=t.marker,i=Ft[e];return i?{build:new i(n),marker:r}:{error:"not found type: ".concat(e)}}))}}],null&&Ht(e.prototype,null),n&&Ht(e,n),t}();function qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Gt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"paySupported",value:function(){return"PaymentRequest"in window}},{key:"resolveCanPay",value:function(t,e){this.paySupported()?new PaymentRequest([{supportedMethods:["https://android.com/pay"],data:{merchantId:"11218867777662038582",allowedCardNetworks:["MASTERCARD","VISA"],paymentMethodTokenizationParameters:{tokenizationType:"NETWORK_TOKEN",parameters:{publicKey:"BHH5N7sxc8VnjIKC8OX5RuQyoIO7XfSGfZwudLkMmTMhy/GiDjwA6EJddJ78k/uejgZNNvQeXjUl7GeSIxeCJiI="}}}}],{total:{label:"test",amount:{currency:"RUB",value:1}}}).canMakePayment().then((function(n){n?t():e()})).catch((function(){e()})):e()}}])&&qt(e.prototype,n),t}();function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Jt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"paySupported",value:function(){return"ApplePaySession"in window}},{key:"resolveCanPay",value:function(t,e){this.paySupported()?new Promise((function(t){t(!0===window.ApplePaySession.canMakePayments()||!window.DeviceDetect().isMobile())})).then((function(n){n?t():e()})):e()}}])&&zt(e.prototype,n),t}();function Kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Zt=["TOKENIZED_CARD"],Qt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"paySupported",value:function(){return"PaymentRequest"in window}},{key:"loaderGoogleScript",value:function(){var t=document.createElement("script"),e=document.getElementsByTagName("script")[0];return e.parentNode.insertBefore(t,e),new Promise((function(e,n){t.async=!0,t.src="https://pay.google.com/gp/p/js/pay.js",t.onload=e,t.onerror=n}))}},{key:"getGooglePaymentsClient",value:function(){return new window.google.payments.api.PaymentsClient({environment:"PRODUCTION"})}},{key:"onGooglePayLoaded",value:function(t,e){this.getGooglePaymentsClient().isReadyToPay({allowedPaymentMethods:Zt}).then((function(n){n.result?t():e()})).catch((function(){e()}))}},{key:"resolveCanPay",value:function(t,e){var n=this;this.paySupported()?window.PaymentRequest&&this.loaderGoogleScript().then((function(){n.onGooglePayLoaded(t,e)}),(function(){e()})):e()}}])&&Kt(e.prototype,n),t}();function Xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function te(t,e,n){return e&&Xt(t.prototype,e),n&&Xt(t,n),t}var ee=null,ne=null,re=null,ie=null,oe=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),window?(null===t.instance&&(t.instance=this),t.instance):null}return te(t,null,[{key:"APPLE_PAY_PROVIDER",get:function(){return"ApplePay"}},{key:"ANDROID_PAY_PROVIDER",get:function(){return"AndroidPay"}},{key:"GOOGLE_PAY_PROVIDER",get:function(){return"GooglePay"}},{key:"instance",get:function(){return ee},set:function(t){if(null==ee){ee=t;var e=new i,n=e.getOS(),r=e.isMobile();"Linux"===n&&r?(ne="GooglePay",re=new Qt):"MacOS"===n?(ne="ApplePay",re=new Jt):(ne="AndroidPay",re=new Gt)}}},{key:"support",get:function(){return ie}},{key:"provider",get:function(){return ne}}]),te(t,[{key:"paymentApiSupported",value:function(e,n){if(t.support&&e(),!t.support){var r=function(){"function"==typeof n&&(ie=!1,n())};re?re.resolveCanPay((function(){"function"==typeof e&&(ie=!0,e())}),r):r()}return t.support}}]),t}();function ae(t){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ce=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handlers=[]}var e,n;return e=t,(n=[{key:"subscribe",value:function(t,e,n){var r,i=Math.random().toString(36).slice(-8);return void 0===n&&(n=e),e.token=i,r={event:t,handler:e.bind(n),token:i},this.handlers.push(r),r}},{key:"unsubscribeAll",value:function(t){for(var e=null,n=0;n<this.handlers.length;n++)this.handlers[n].event===t&&(this.handlers.splice(n,1),e=!0);return e}},{key:"unsubscribe",value:function(t,e){if(!("object"===ae(e)||e.token&&t))return null;for(;0<this.handlers.length;index++)if(this.handlers[0].token===e.token)return this.handlers=this.handlers.splice(0,0),!0;return null}},{key:"publish",value:function(t,e){var n=this;setTimeout((function(){n.handlers.forEach((function(n){n.event===t&&n.handler(e)}))}),0)}}])&&se(e.prototype,n),t}(),ue=-1!==document.location.search.indexOf("watchlater");function le(t){return(new window.WatchLater).instance.fetchArticleWatchlaters().then((function(e){return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).filter((function(t){return t.id!==TVRAIN.app.article.id})).map((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(t,{url:"".concat(t.url,"?watchlater=").concat(t.id)})}))}(e).concat(t)}))}function fe(t){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(t){return ve(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||pe()}function he(t,e){return ve(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||pe()}function pe(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function ve(t){if(Array.isArray(t))return t}function me(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ye(t,e){return!e||"object"!==fe(e)&&"function"!=typeof e?be(t):e}function ge(t){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function be(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var we="update.nextvideo.services",ke=[],Ee=[],Se=null,Oe=[],Te=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=ye(this,ge(e).call(this)),Se?ye(t,Se):(Se=be(t),t.items=[],t)}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(e,t),n=e,i=[{key:"instance",get:function(){return Se}},{key:"EVENT_UPDATE",get:function(){return we}},{key:"EVENT_RENDER",get:function(){return"render.nextvideo.services"}}],(r=[{key:"setItems",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return this.items=e,ue?le(e).then((function(e){return t.items=e,t.items})):Promise.resolve(this.items)}},{key:"renderVideo",value:function(){return this.publish("render.nextvideo.services",{prev:this.getPrev(),next:this.getNext()}),this}},{key:"updateItems",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.newItems,r=void 0===n?[]:n,i=e.loop,o=void 0!==i&&i;r.length&&(this.items=r);var a=function(){var e=he(t.items,2)[1];ke=e},s=function(){var e=he(t.items,1)[0];Ee=e,Oe.push(Ee)};a(),s();var c=de(this.items);return this.items=c.slice(1),o&&this.items.push(Ee),this.publish(we,{next:ke,prev:Ee,used:Oe}),this}},{key:"getItems",value:function(){return this.items}},{key:"getNext",value:function(){return ke}},{key:"getPrev",value:function(){return Ee}},{key:"getUsed",value:function(){return Oe}}])&&me(n.prototype,r),i&&me(n,i),e}(ce);window.NextVideoService=Te;var Pe=Te;function Ce(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ne=function(){function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance)return t.instance;t.instance=this,this.history=window.history,this.route=[]}var e,n,r;return e=t,r=[{key:"onPopState",value:function(t){window.addEventListener("popstate",t)}}],(n=[{key:"add",value:function(t){var e=t.title,n=t.url;this.route.push({title:e,url:n,data:t}),this.history.pushState(t,e,n),document.title=e||document.title}},{key:"getPrev",value:function(){return Ce(this.route,1)[0]}},{key:"getNext",value:function(){return Ce(this.route,2)[1]}},{key:"getRoute",value:function(){return this.route}},{key:"getState",value:function(){return this.history.state}},{key:"getCurrent",value:function(){var t=null;return this.getState().forEach((function(e){e.url===location.pathname&&(t=e.data)})),t}},{key:"clear",value:function(){if(null!=this.history.state)for(var t=0;t<this.history.state.length;t++)this.route=this.route.slice(t,t),this.history.replaceState(null,null,null)}}])&&Ae(e.prototype,n),r&&Ae(e,r),t}();function De(t){var e="".concat(t).toString();return encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A").replace(/%20/g,"+")}function Re(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.addKeys,r=void 0===n?{}:n,i=e.excludeKeys,o=void 0===i?[]:i,a=e.comma,s=void 0===a?"%2C":a,c=e.ampersand,u=void 0===c?"%26":c,l=e.equal,f=void 0===l?"%3D":l,d=0;window.segment&&window.segment.length&&(d=window.segment.join(s));var h={segment:d,teleshow:window.teleshow||0,page:window.page||0,pathname:window.pathname||0,subscriber:window.subscriber||0,authorized:window.authorized||0,gender:window.gender||0,user_id:window.dfp_user_id||0,has_email:window.dfp_has_email||0,has_mailings:window.dfp_has_mailings||0};return Object.assign(h,r),o.length&&o.forEach((function(t){delete h[t]})),Object.keys(h).forEach((function(e){t=t?"".concat(t).concat(u).concat(e).concat(f).concat(h[e]):"".concat(e).concat(f).concat(h[e])})),t}var Ie={getCustomParams:Re,getVastTagDoubleClick:function(t){return""===t?"":function(t){if(""===t)return"";var e=t,n={get"[referer]"(){return De(document.referrer)},get"{url_encoded}"(){return De(document.URL)},get"[random]"(){return De(Math.trunc(1e12*Math.random()))},get"[arg_cust_params]"(){return Re()}};return["[referer]","{url_encoded}","[random]","[arg_cust_params]"].forEach((function(t){e=e.replace(t,n[t])})),e}("https://pubads.g.doubleclick.net/gampad/live/ads?sz=640x480&iu=/124171376/tvrain_video/".concat(t,"&impl=s&gdfp_req=1&env=vp&output=vast&unviewed_position_start=1&url={url_encoded}&description_url=[referer]&correlator=[random]&cust_params=[arg_cust_params]"))},getVastYandex:function(){return{puid1:window.subscriber||0,reference:document.referrer,puid2:Re({comma:",",ampersand:"&",equal:"="})}}};function je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var xe=function(t,e){var n=t?new Date(t.substr(0,4),t.substr(5,2)-1,t.substr(8,2),t.substr(11,2),t.substr(14,2),t.substr(17,2)):new Date,r=e?n.getUTCHours()-(n.getTimezoneOffset()/60-e):n.getUTCHours();return new Date(n.getUTCFullYear(),n.getUTCMonth(),n.getUTCDate(),r,n.getUTCMinutes(),n.getUTCSeconds()).getTime()},Me=function(t,e){return xe(t,-3)<xe(e)},Le=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"getScheduleItems",value:function(){return I.a.onAirData()}},{key:"getCurrent",value:function(){return t.getScheduleItems().then((function(t){return t.filter((function(t){return!Me(t.end_date)&&Me(t.start_date)}))[0]}))}}],null&&je(e.prototype,null),n&&je(e,n),t}();function Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ye={group:1,type:"teleshow"},Be=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"getMyProgram",value:function(){return I.a.userLinksData({action:"getItems"},Object.assign(Ye,{limit:0,offset:0})).then((function(t){var e=t.success,n=t.items;return e?n:[]}))}},{key:"addMyProgram",value:function(t){return I.a.userLinksData({action:"add"},Object.assign({id:t},Ye)).then((function(t){var e=t.success,n=t.item;return!!e&&n}))}},{key:"removeProgram",value:function(t){return I.a.userLinksData({action:"remove"},Object.assign({id:t},Ye)).then((function(t){return t.success}))}}],null&&Ve(e.prototype,null),n&&Ve(e,n),t}();function $e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Ue(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var He={EVENT_BEFORE_DESTROY:"beforeDestroy",EVENT_BEFORE_INIT:"beforeInit",EVENT_POST_INIT:"postInit",EVENT_CANPLAY:"canplay",EVENT_PLAYING:"playing",EVENT_PLAY:"play",EVENT_PAUSE:"pause",EVENT_ENDED:"ended",EVENT_MOUNTED:"mounted",EVENT_UNMOUNTED:"unmounted",EVENT_TIMEUPDATE:"timeupdate",EVENT_ERROR:"error",EVENT_RELOAD:"reload",EVENT_SEEK:"seek",EVENT_AD_START:"adShown",EVENT_AD_END:"adEnd",EVENT_AD:"advertisement_video_state",EVENT_SEEKED:"seeked"},Fe=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$e(n,!0).forEach((function(e){Ue(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$e(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},{PLAYER_DEFAULT_VOLUME:.75},{},{STATE_READY:"ready",STATE_INIT:"init",STATE_PAUSED:"pause",STATE_PLAYING:"playing",STATE_STOP:"stop",STATE_SEEK:"seek",STATE_ERROR:"error"},{},He),We=function(){};function qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ge(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ze(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Ge(n,!0).forEach((function(e){Je(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ge(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Je(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ke=Fe.STATE_PLAYING,Ze=Fe.STATE_READY,Qe=Fe.STATE_PAUSED,Xe=Fe.STATE_STOP,tn=Fe.STATE_ERROR,en=Fe.STATE_SEEK,nn={pause:!1,play:!1,ready:!1,ended:!1,error:!1},rn={play:function(t){return ze({},t,{play:!0,pause:!1})},stop:function(){return{play:!1,pause:!0,ended:!0}},pause:function(t){return ze({play:!1,pause:!0},t)},ready:function(t){return ze({ready:!0},t)},idle:function(){return nn},error:function(){return ze({},nn,{error:!0})}},on=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=nn,this.state="idle",this.changeState=[],this.onChangeState=this.onChangeState.bind(this),this.offChangeState=this.offChangeState.bind(this)}var e,n;return e=t,(n=[{key:"onChangeState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We;t.uniqId=R(),this.changeState.push(t)}},{key:"offChangeState",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=-1,r=1,i=0;i<this.changeState.length&&!e;i++)if(t.uniqId===this.changeState[i].uniqId){n=i;break}return e&&(n=0,r=this.changeState.length),n>-1?this.changeState.splice(n,r):n}},{key:"setState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.state!==t&&(this.state=t,this.data=ze({},this.data,{},e),this.changeState.forEach((function(e){return e(t)})))}},{key:"getState",value:function(){return this.state}},{key:"getData",value:function(){return this.data}},{key:"dispatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getTransitions(),r=n[this.state][t];return!!r&&(r.call(this,e),!0)}},{key:"getTransitions",value:function(){var t;return Je(t={idle:{init:function(){this.setState(Ze,rn.ready.apply(null,arguments))}}},"".concat(Ze),{playing:function(){this.setState(Ke,rn.play.apply(null,arguments))},error:function(){this.setState(tn,rn.error.apply(null,arguments))}}),Je(t,"".concat(Ke),{pause:function(){this.setState(Qe,rn.pause.apply(this,arguments))},ended:function(){this.setState(Xe,rn.stop())},seek:function(){this.setState(en)}}),Je(t,"".concat(Xe),{playing:function(){this.setState(Ke,rn.play())},seek:function(){this.setState(en)}}),Je(t,"".concat(Qe),{playing:function(){this.setState(Ke,rn.play.apply(this,arguments))},ended:function(){this.setState(Xe,rn.stop())},seek:function(){this.setState(en)}}),Je(t,"".concat(tn),{idle:function(){this.setState("idle")},playing:function(){this.setState(Ke,rn.play())}}),Je(t,"".concat(en),{playing:function(){this.setState(Ke,rn.play())},pause:function(){this.setState(Qe,rn.pause())},ended:function(){this.setState(Xe,rn.stop())}}),t}}])&&qe(e.prototype,n),t}(),an=function(){return $({})};function sn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var cn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._player=e,this._includePlugins={},this._plugins={},this.destroy=this.destroy.bind(this),this._player.on(Fe.EVENT_UNMOUNTED,this.destroy),this.logger("init")}var e,n;return e=t,(n=[{key:"getPluginByCode",value:function(t){return this._plugins[t]||null}},{key:"getPlayer",value:function(){return this._player}},{key:"addPlugin",value:function(t,e){var n=this,r=e.install,i=e.uninstall;if("function"!=typeof r)throw new TypeError("Plugin invalid ");if("function"!=typeof i)throw new TypeError("Plugin invalid ");if(!this[t]){this.logger("ADD:PLUGIN:".concat(t));for(var o=arguments.length,a=new Array(o>2?o-2:0),s=2;s<o;s++)a[s-2]=arguments[s];return this.installPlugin(e,a).then((function(r){return n._plugins["".concat(t)]=r,n._includePlugins[t]=e,!0}))}return Promise.resolve(!0)}},{key:"installPlugin",value:function(t,e){var n=this;return new Promise((function(r,i){try{var o=t.install.apply(n,e);o instanceof Promise?o.then((function(t){return r(t)}),i):r(o)}catch(t){n.logger("INSTALL:ERROR",{error:t}),i(t)}}))}},{key:"destroy",value:function(){this.beforeDestroy()&&(delete this._player,delete this.installPlugin,delete this.addPlugin,delete this.destroy,delete this._includePlugins,delete this._plugins)}},{key:"beforeDestroy",value:function(){for(var t=0,e=Object.values(this._includePlugins);t<e.length;t++)e[t].uninstall();return!0}},{key:"logger",value:function(t){ar.activeDebug&&this._player.logger("PluginController->".concat(t))}}])&&sn(e.prototype,n),t}();function un(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ln(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fn=Fe.EVENT_BEFORE_DESTROY,dn=Fe.EVENT_POST_INIT;function hn(t){var e=["a","button","div"],n=[];function r(){this.node=null,this.isShow=!1}r.createInstance=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];var o=new r(e);return n.push(o),o};var i={show:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";t.logger("Plugin->Button->show"),this.isShow||(this.isShow=!0,e&&this.node.classList.add("".concat(e)),this.node.style.display="block")},hide:function(e){t.logger("Plugin->Button->hide"),this.isShow&&(this.isShow=!1,e&&this.node.classList.remove(e),this.node.style.display="none")},toggle:function(e){t.logger("Plugin->Button->toggle"),this.isShow?this.hide(e):this.show(e)},create:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"player-button",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"a";if(-1===e.indexOf(o))throw TypeError("Plugin->Button->error: Не валидный тег для создания кнопки");var a=document.createElement(o);return a.className=n,a.style.display="none",a.innerHTML=r,this.node=a,i?i.appendChild(this.node):t.getPlayer().getContainer().parentElement.appendChild(this.node),t.logger("Plugin->Button->create"),this},destroy:function(){"function"==typeof this.node.remove?this.node.remove():this.node.parentNode&&this.node.parentNode.removeChild(this.node)}};return r.prototype=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?un(n,!0).forEach((function(e){ln(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):un(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},i),{install:function(){return r.createInstance},uninstall:function(){n.forEach((function(t){t.destroy()}))}}}hn.eventInstall=dn,hn.eventUninstall=fn;var pn=hn,vn=Fe.EVENT_BEFORE_DESTROY,mn=Fe.EVENT_POST_INIT,yn=Fe.STATE_READY,gn=Fe.STATE_PLAYING,bn=Fe.EVENT_PLAYING,_n=Fe.EVENT_PLAY;function wn(t){var e={seekFromHash:function(){0!==this.getPlayerPosFormHash()&&(this.scrollToPlayer(),t.getPlayer().seek(this.getPlayerPosFormHash()))},offsetPlayerContainer:function(){var e=document.documentElement,n=t.getPlayer().getContainer().getBoundingClientRect();return{top:n.top+window.pageYOffset-e.clientTop,left:n.left+window.pageXOffset-e.clientLeft}},scrollToPlayer:function(){window.scrollTo(0,this.offsetPlayerContainer().top)},getPlayerPosFormHash:function(){var t=document.location,e=0;if(t.hash.indexOf("#t=")>-1){var n=t.hash.match(/([\d]+)h/),r=t.hash.match(/([\d]+)m/),i=t.hash.match(/([\d]+)s/),o=n&&n.length>0?n[1]:0,a=r&&r.length>0?r[1]:0,s=i&&i.length>0?i[1]:0;return 60*parseInt(o,10)*60+60*parseInt(a,10)+parseInt(s,10)}return e},destroy:function(){window.removeEventListener("hashchange",this.seekFromHash)}};return e.seekFromHash=e.seekFromHash.bind(e),{install:function(){return[yn,gn].indexOf(-1!==t.getPlayer().getState())?("yandex"!==t.getPlayer().provider&&"youtube"!==t.getPlayer().provider||t.getPlayer().one(bn,e.seekFromHash),t.getPlayer().one(_n,e.seekFromHash)):e.seekFromHash(),window.addEventListener("hashchange",e.seekFromHash),!0},uninstall:function(){window.removeEventListener("hashchange",e.seekFromHash)}}}wn.eventInstall=mn,wn.eventUninstall=vn;var kn=wn;function En(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Sn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var On=Fe.EVENT_BEFORE_INIT,Tn=Fe.EVENT_BEFORE_DESTROY,Pn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:18;return'\n  <div class="player_ageLimit" id="player_age_limit">\n    <div class="player_ageLimit__wrapp">\n      <div class="player_ageLimit__Head">\n        <h1>Контент соответствует возрастной категории '.concat(t,"+</h1>\n        <p>Вам уже есть ").concat(t,'?</p>\n      </div>\n      <div class="player_ageLimit__Control">\n        <div\n          class="player_ageLimit__ControlYes player_ageLimit__ControlButtonYes"\n          data-stat-track="{&quot;category&quot;:&quot;player&quot;, &quot;label&quot;:&quot;agelimit&quot;, &quot;action&quot;:&quot;click&quot;, &quot;value&quot;:&quot;Yes&quot;}"\n        >\n          Да\n        </div>\n        <div\n          class="player_ageLimit__ControlNo player_ageLimit__ControlButtonNo"\n          data-stat-track="{&quot;category&quot;:&quot;player&quot;, &quot;label&quot;:&quot;agelimit&quot;, &quot;action&quot;:&quot;click&quot;, &quot;value&quot;:&quot;No&quot;}"\n        >\n          Нет\n        </div>\n      </div>\n    </div>\n  </div>\n')},Cn=".player_ageLimit__ControlYes",An=".player_ageLimit__ControlNo";function Nn(t){function e(t){var e=this,n=t.age,r=void 0===n?18:n;this.age=r,this.container=null,this.setAgeLimit(),this.promise=new Promise((function(t){e.container.querySelector(Cn).addEventListener("click",(function(){e.actionYes(),t(e)})),e.container.querySelector(An).addEventListener("click",(function(){e.actionNo()}))}))}var n={setAgeLimit:function(){var e=document.createElement("div"),n=Pn,r=t.getPlayer().mount;e.innerHTML=n(this.age),t.getPlayer().mount=function(t){return document.querySelector(t).appendChild(e),r.apply(this,arguments)},this.container=e},actionYes:function(){this.destroy()},actionNo:function(){var t=document.location.pathname.split("/");t.splice(t.length-2,2),document.location="".concat(document.location.protocol,"//").concat(document.location.host).concat(t.join("/"))},destroy:function(){"function"==typeof this.container.remove?this.container.remove():this.container.parentNode&&this.container.parentNode.removeChild(this.container),this.container=null}};return e.prototype=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?En(n,!0).forEach((function(e){Sn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):En(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},n),{install:function(t){return new e(t).promise},uninstall:function(){}}}Nn.toString=function(){return"AgeLimit"},Nn.eventInstall=On,Nn.eventUnitall=Tn,Nn.template=Pn;var Dn=Nn,Rn=Fe.EVENT_POST_INIT,In=Fe.EVENT_BEFORE_DESTROY;function jn(t){var e=t.getPlayer().getContainer(),n={isElementFullyInViewport:function(){if(null===e)return!1;var t=e.getBoundingClientRect(),n=document.documentElement;return t.top>=0&&t.bottom<=(window.innerHeight||n.clientHeight)},isElementPartiallyInViewport:function(){if(null===e)return!1;var t=e.getBoundingClientRect(),n=document.documentElement;return(t.top>0||t.bottom>0)&&t.top<(window.innerHeight||n.clientHeight)},isElementInViewportAtLeast:function(t){if(null===e)return!1;var n=e.getBoundingClientRect(),r=document.documentElement,i=(n.bottom-n.top)*t/100;return(n.top+i>0||n.bottom-i>0)&&n.top+i<(window.innerHeight||r.clientHeight)},tabIsActive:function(){return!document.hidden}};return{install:function(){return n},uninstall:function(){n=null}}}jn.toString=function(){return"PlayerViewPortPlugin"},jn.eventInstall=Rn,jn.eventUnstall=In;var xn=jn,Mn=Fe.EVENT_ENDED,Ln=Fe.EVENT_POST_INIT,Vn=Fe.EVENT_BEFORE_DESTROY,Yn="plugin.nextvideo.mounted",Bn="plugin.nextvideo.unmounted",$n="nextvideo";function Un(t){function e(){document.getElementById($n)?(this.container=document.getElementById($n),this.isAppend=!0):this.container=document.createElement("div"),this.service=Pe.instance,this.container.classList.add("nextvideo-overlay"),this.container.style.display="none",this.render=this.render.bind(this),this.onMount=this.onMount.bind(this),this.onUnmount=this.onUnmount.bind(this),t.getPlayer().on(Mn,this.render)}return e.prototype.insertContainerInPlayer=function(){return this.isAppend||(t.getPlayer().getContainer().parentElement.appendChild(this.container),this.isAppend=!0),this},e.prototype.canShow=function(){var e=window.__APP__;if(!e)return!1;var n=Object.values(e.Widgets.getWidgets().install||[]).find((function(t){return"NextVideoWidget"===t.$widgetName}));return window.innerWidth>941&&"stop"===t.getPlayer().getState()&&this.service.getItems().length&&!n},e.prototype.onMount=function(){this.container.style.display="block",t.getPlayer().emit(Yn)},e.prototype.onUnmount=function(){this.container.style.display="none",t.getPlayer().emit(Bn)},e.prototype.render=function(){if(this.canShow()){var t={service:this.service,items:this.service.getItems(),limit:7,titleSymbols:50,onMount:this.onMount,onUnmount:this.onUnmount};window.__APP__.Widgets.widgetCreate("nextvideo",this.container,t),this.insertContainerInPlayer()}return this},e.prototype.destroy=function(){t.getPlayer().off(Mn,this.render),"function"==typeof this.container.remove?this.container.remove():this.container.parentNode&&this.container.parentNode.removeChild(this.container),delete this.container,delete this.service,delete this.items},e.createInstance=function(){return new e},{install:function(){return e.createInstance()},uninstall:function(){}}}Un.toString=function(){return"NextVideo"},Un.eventInstall=Ln,Un.eventUninstall=Vn;var Hn=Un;function Fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function qn(t){var e=!1,n=window,r=n.countdowner,i=void 0===r?We:r,o=n.dataLayer,a=void 0===o?[]:o;return{install:function(){return function(){if(!e){var n={event:"eagleplayer_streaming"},r=!1,o=0;e=!0;var s=i({timeout:18e5,startInit:0,timerEndCallback:function(){var t=new Image,e="https://pubads.g.doubleclick.net/activity;dc_iu=/124171376/DFPAudiencePixel;ord=".concat(1e13*Math.random(),';dc_seg=456329712?" width=1 height=1 border=0/>');t.src=e,t.className="pixel",document.getElementsByTagName("body")[0].appendChild(t)}}),c=i({timeout:1e3,startInit:0,loop:!0,timerEndCallback:function(){t.getPlayer().getState()===Fe.STATE_PLAYING&&(TvrainAnalytics.time_video+=1e3,TvrainAnalytics.video_id=TVRAIN.Content.video_id,TvrainAnalytics.video_position=Math.round(t.getPlayer().getTime()),TvrainAnalytics.video_position_max<TvrainAnalytics.video_position&&(TvrainAnalytics.video_position_max=TvrainAnalytics.video_position),x.setCookie("video_position_".concat(TVRAIN.Content.video_id),TvrainAnalytics.video_position,{expires:(new Date).setTime((new Date).getTime()+6e5)}))}}),u=i({timeout:6e4,startInit:0,loop:!0,timerEndCallback:function(){t.getPlayer().getState()===Fe.STATE_PLAYING&&(n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fn(n,!0).forEach((function(e){Wn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fn(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},n,{duration:60,provider:"".concat(t.getPlayer())}),t.getPlayer().logger("analytics:gtm:push"),a.push(n))}});t.getPlayer().one(Fe.EVENT_CANPLAY,(function(){t.getPlayer().logger("analytics:".concat(Fe.EVENT_CANPLAY)),u&&u.start(),c&&c.start()})),t.getPlayer().on(Fe.EVENT_PLAY,(function(){t.getPlayer().logger("analytics:".concat(Fe.EVENT_PLAY)),s.start(),o=(new Date).getTime()})),t.getPlayer().on(Fe.EVENT_PLAYING,(function(){t.getPlayer().logger("analytics:".concat(Fe.EVENT_PLAYING)),r||(TvrainAnalytics.event("player_eagle","firstFrame",null,(new Date).getTime()-o),r=!0)})),t.getPlayer().on(Fe.EVENT_TIMEUPDATE,(function(){t.getPlayer().logger("analytics:".concat(Fe.EVENT_TIMEUPDATE)),u&&u.start()})),t.getPlayer().on(Fe.EVENT_PAUSE,(function(){t.getPlayer().logger("analytics:".concat(Fe.EVENT_PAUSE)),s.pause();var e=t.getPlayer(),n=e.provider;e.isAdPlaying||"yandex"!==n||a.push({event:"pause",provider:"yandex"})})),t.getPlayer().on(Fe.EVENT_SEEK,(function(){t.getPlayer().logger("analytics:".concat(Fe.EVENT_SEEK)),TvrainAnalytics.event("vod","action","seek",TVRAIN.Content.article_id)})),t.getPlayer().on(Fe.EVENT_ENDED,(function(){u&&u.stop(),t.getPlayer().logger("analytics:".concat(Fe.EVENT_ENDED))})),t.getPlayer().on(Fe.EVENT_UNMOUNTED,(function(){u.destroy(),s.destroy(),c.destroy(),e=!1}))}}(),e},uninstall:function(){}}}qn.toString=function(){return"PlayerAnalyticPlugin"},qn.eventInstall=Fe.EVENT_POST_INIT,qn.eventUninstall=Fe.EVENT_BEFORE_DESTROY;var Gn=qn;function zn(t){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var Jn=Fe.EVENT_BEFORE_INIT,Kn=Fe.EVENT_POST_INIT,Zn={nextvideo:Hn,button:pn,anchorTime:kn,viewport:xn,restrictAge:Dn,analytics:Gn},Qn={},Xn=n(106),tr=function(t){var e=!1;return{enable:function(){document.location.hash="#playerdebug"},disable:function(){e=!0,document.location.hash="#playerdebug"},send:function(t){!e&&"#playerdebug"===document.location.hash||Object(Xn.a)()}}};function er(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function nr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?er(n,!0).forEach((function(e){rr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):er(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function rr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var or=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t===Fe.STATE_ERROR&&"string"==typeof e?{type:"error",message:e}:e},ar=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=new on;this.instanceId=R(),this.$options=e,this.$emitter=an(),this.emit=this.emit.bind(this),this.on=this.on.bind(this),this.off=this.off.bind(this),this.listeners=this.listeners.bind(this),this._fsm=n,this.onChangeState=n.onChangeState,this.offChangeState=n.offChangeState;var r=tr("".concat(this,"[").concat(this.instanceId,"]"));this.logger=r.send,this._beforeInit()}var e,n,r;return e=t,r=[{key:"debug",value:function(){t.activeDebug=!0,document.location.hash="playerdebug"}}],(n=[{key:"getState",value:function(){return this._fsm.getState()}},{key:"getPlugin",value:function(t){return this.$plugins.getPluginByCode(t)}},{key:"getData",value:function(){return this._fsm.getData()}},{key:"destroy",value:function(){this.logger("@OVERIDE METHOD destroy")}},{key:"init",value:function(){this.logger("@OVERIDE METHOD init")}},{key:"on",value:function(t,e){if(!t)return!1;if("function"!=typeof e)throw new TypeError("fn ожидалалась фукнция");return this.$emitter.on(t,e),!0}},{key:"one",value:function(t,e){if(!t)return!1;if("function"!=typeof e)throw new TypeError("fn ожидалась функция");return this.$emitter.one(t,e),!0}},{key:"off",value:function(t,e){return t?this.$emitter.off(t):t&&e?this.$emitter.off(t,e):this.$emitter.off(),!0}},{key:"emit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!!t&&(this.$emitter.trigger(t,e),!0)}},{key:"listeners",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.type;switch(n){case Fe.EVENT_CANPLAY:this._dispatch(Fe.STATE_INIT);break;case Fe.EVENT_PLAYING:case Fe.EVENT_SEEKED:this._dispatch(Fe.EVENT_PLAYING);break;case Fe.EVENT_TIMEUPDATE:break;case Fe.EVENT_PLAY:this._dispatch(Fe.EVENT_PLAYING);break;default:this._dispatch(n,nr({},e))}n===Fe.EVENT_AD&&(n="playing"===e?Fe.EVENT_AD_START:Fe.EVENT_AD_END),n&&this.emit(n,{originEvent:t,data:or(n,e)})}},{key:"_beforeInit",value:function(){var t=this,e=this.$options.plugins;return this.logger("BEFORE_INIT_START"),this.$plugins=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=new cn(t),r=function(r){var i,o,a,s=[];return e.forEach((function(e){if("object"===zn(e)){var c=e.code,u=e.config,l=void 0===u?{}:u;i=Qn[c]||Zn[c],a=c,o=l}i&&i.eventInstall===r&&(s.push(n.addPlugin(a,i(n),o)),Qn[e]=i,n.logger("".concat(t,"->PluginRequire"),i))})),r===Jn&&t.emit("plugin-install"),s};return t.one(Jn,(function(t,e){var i=e.resolve,o=e.reject;n.logger("ON:EVENT_BEFORE_INIT"),Promise.all(r(Jn)).then(i,o)})),t.one(Kn,(function(){n.logger("ON:EVENT_POST_INIT"),r(Kn)})),n}(this,e),this.emit(Fe.EVENT_BEFORE_INIT,{resolve:function(){t.logger("BEFORE_INIT_COMPLETE"),t.init(),t.logger("INIT"),t._postInit()},reject:function(){t.emit("error",{data:{message:"Before init failed",type:"error"}})}}),!0}},{key:"_dispatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._fsm.dispatch(t,e)}},{key:"_postInit",value:function(){this.logger("POST_INIT"),this.emit(Fe.EVENT_POST_INIT,{player:this})}},{key:"_beforeDestroy",value:function(){this.emit(Fe.EVENT_BEFORE_DESTROY)}}])&&ir(e.prototype,n),r&&ir(e,r),t}();function sr(t){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ur(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?cr(n,!0).forEach((function(e){lr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cr(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hr(t,e,n){return(hr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function pr(t){return(pr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vr(t,e){return(vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mr=Fe.PLAYER_DEFAULT_VOLUME,yr=Fe.STATE_PLAYING,gr=Fe.EVENT_MOUNTED,br=Fe.EVENT_UNMOUNTED,_r=Fe.EVENT_POST_INIT,wr=Fe.EVENT_AD_START,kr=Fe.EVENT_AD_END,Er=[],Sr={source:"",quality:4,position:0,autoplay:!1,width:"100%",height:"100%",muted:!1,plugins:[]},Or=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r,i,o=n.source;if(!o||0===o.length)throw Error("Не передан источник воспроизведения - source");return r=this,(t=!(i=pr(e).call(this,ur({},Sr,{},n)))||"object"!==sr(i)&&"function"!=typeof i?dr(r):i).onError=t.onError.bind(dr(t)),t.on("error",t.onError),t.listenAd(),t.isAdPlaying=!1,t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vr(t,e)}(e,t),n=e,i=[{key:"getEvents",value:function(){return Object.values(He)}}],(r=[{key:"toString",value:function(){return"PlayerBasic"}},{key:"ready",value:function(){var t=this;return new Promise((function(e,n){t.one(_r,(function(){e(t)})),t.on("error",n)}))}},{key:"init",value:function(){var t=this.$options,e=t.autoplay,n=t.source,r=t.position,i=t.height,o=t.width,a=t.muted,s=document.createElement("video");return this._container=s,this._video=s,s.width=o,s.height=i,s.src=n,s.controls=!0,s.autoplay=e,s.muted=a,s.className="player",this.attachListeners(),this.seek(r),this}},{key:"setVolume",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr;return this._video.volume=t,this}},{key:"getData",value:function(){return ur({},hr(pr(e.prototype),"getData",this).call(this),{time:this.getTime(),duration:this.getDuration()})}},{key:"getIngoreErros",value:function(){return Er}},{key:"getTime",value:function(){var t=this._video.currentTime;return void 0===t?-1:t}},{key:"getDuration",value:function(){var t=this._video.duration;return void 0===t?-1:t}},{key:"getContainer",value:function(){return this._container}},{key:"getPlayer",value:function(){return this}},{key:"play",value:function(){return this.getState()!==yr&&this._video.play(),this}},{key:"pause",value:function(){return this.getState()===yr&&this._video.pause(),this}},{key:"seek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;return this._video.currentTime=parseFloat(t),this}},{key:"reload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.source,n=t.position;return this.$options.source=e,this.$options.position=n,this._video.src=e,this.seek(n),this.emit(Fe.EVENT_RELOAD),this}},{key:"mute",value:function(){this._video.muted=!0}},{key:"unmute",value:function(){this._video.muted=!1}},{key:"attachListeners",value:function(){var t=this;return e.getEvents().forEach((function(e){t._video.addEventListener(e,t.listeners)})),this}},{key:"removeListeners",value:function(){var t=this;return this._video&&e.getEvents().forEach((function(e){t._video.removeEventListener(e,t.listeners)})),this}},{key:"mount",value:function(t){var e=this;return this.element=document.querySelector(t),this.ready().then((function(){return!!e.element&&(function(t,e){var n=document.createDocumentFragment(),r=(new DOMParser).parseFromString('<div class="player-video" style="width:100%; height:100%"></div>',"text/html").body.firstChild;return r.appendChild(t),n.appendChild(r),{mount:function(t){t.innerHTML="",t.dataset.state=e,t.appendChild(n)}}}(e.getContainer(),e.getState()).mount(e.element),e.emit(gr),Promise.resolve(!0))})).catch(this.onError)}},{key:"unmount",value:function(){return this.removeListeners(),this.getContainer()&&"function"==typeof this.getContainer().remove?this.getContainer().remove():this.getContainer()&&this.getContainer().parentNode&&this.getContainer().parentNode.removeChild(this.getContainer()),this.emit(br),this.off(),this._video=null,!0}},{key:"onError",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.data,r=void 0===n?{}:n,i=r.message,o=void 0===i?"":i;this.filterError(o)&&console.log("%cPlayer Error: ".concat(o),"color: red")}},{key:"filterError",value:function(t){return!!t&&-1===this.getIngoreErros().indexOf(t.toString())}},{key:"getAdState",value:function(){return this.isAdPlaying}},{key:"listenAd",value:function(){var t=this;this.on(wr,(function(){t.isAdPlaying=!0})),this.on(kr,(function(){t.isAdPlaying=!1}))}}])&&fr(n.prototype,r),i&&fr(n,i),e}(ar),Tr={};function Pr(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"async";if(document.getElementById(e))return Promise.resolve();var r=document.createElement("script"),i=document.getElementsByTagName("script")[0];return i.parentNode.insertBefore(r,i),new Promise((function(i,o){"async"!==n&&"defer"!==n||(r["".concat(n)]=!0),r.id=e,r.src=t,r.onload=i,r.onerror=o}))}var Cr,Ar=function(t){if(!Tr[t]){if("eagle"===t.toLowerCase())return"EaglePlayer"in window?Promise.resolve((function(){return Tr[t]=window.EaglePlayer,Tr[t]})):Pr("https://tvrainru.media.eagleplatform.com/player/player.js","eagleplatformjs",!0).then((function(){return Tr[t]=window.EaglePlayer,Tr[t]}));if("yandex"===t.toLowerCase())return"Yandex"in window?Promise.resolve((function(){return Tr[t]=window.Yandex,Tr[t]})):Pr("https://yastatic.net/vh-player/loader.js","yandexplayerjs",!0).then((function(){return Tr[t]=window.Yandex,Tr[t]}));if("youtube"===t.toLowerCase())return Pr("https://www.youtube.com/iframe_api","yotubejs",!0).then((function(){return new Promise((function(e){window.onYouTubeIframeAPIReady=function(){Tr[t]=window.YT,e(Tr[t])}}))}));if("jw"===t.toLowerCase())return"jwplayer"in window?Promise.resolve((function(){return Tr[t]=window.jwplayer,Tr[t]})):Pr("https://tvrain.tv/static/js/pub/jwplayer/8/jwplayer.js","jwp",!0).then((function(){return window.jwplayer.key="Gd4Ky9iGoSE8I3FMuY2bmq2yVRLeFUxV6SLKxg==",Tr[t]=window.jwplayer,Tr[t]}))}return Promise.resolve(Tr[t])};function Nr(t){return(Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rr(t,e){return!e||"object"!==Nr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ir(t,e,n){return(Ir="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function jr(t){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xr(t,e){return(xr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Mr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Lr=Fe.EVENT_CANPLAY,Vr=Fe.EVENT_ENDED,Yr={in:{start:Lr,stop:Vr},out:(Cr={},Mr(Cr,"".concat(Vr),"stop"),Mr(Cr,"".concat(Lr),"start"),Cr)},Br=["Player has no method"],$r=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Rr(this,jr(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xr(t,e)}(e,t),n=e,i=[{key:"getSupportedFormat",value:function(){return["externalId"]}}],(r=[{key:"toString",value:function(){return"PlayerEagle"}},{key:"getIngoreErros",value:function(){return[].concat(function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(Ir(jr(e.prototype),"getIngoreErros",this).call(this)),Br)}},{key:"getTime",value:function(){return this._video.getPosition()}},{key:"getDuration",value:function(){return this._video.getData("duration")}},{key:"init",value:function(){var t=this.$options,e=t.source,n=t.autoplay,r=void 0!==n&&n,i=t.width,o=void 0===i?"100%":i,a=t.height,s=void 0===a?"100%":a,c=t.duration,u=void 0===c?0:c,l=t.cust_params,f=void 0===l?"":l,d=t.expires,h=void 0===d?null:d,p=t.signature,v=void 0===p?null:p,m=t.player_template_id,y=t.ad_template_id,g=this.$options.position;return window.location.hash.indexOf("#t=")>-1&&(g=null),this._video=new EaglePlayer({id:e,autoplay:r,width:o,height:s,duration:u,cust_params:f,start_position:g,expires:h,signature:v,player_template_id:m,ad_template_id:y,speed:!0}),this.provider="eagle",this._container=this._video.$el[0],this._video.addEventListener=this._video.on,this._video.removeListeners=this._video.off,this.attachListeners(),this}},{key:"seek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._video.setPosition(t)}},{key:"attachListeners",value:function(){var t=this;Or.getEvents().forEach((function(e){t._video.on(Yr.out[e]||e,t.listeners.bind(t,{type:Yr.in[e]||e}))}))}},{key:"removeListeners",value:function(){var t=this;return this._video&&Or.getEvents().forEach((function(e){t._video.off(Yr.out[e]||e,t.listeners.bind(t,{type:Yr.in[e]||e}))})),this}},{key:"reload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.source,n=t.position;this.logger("reloadPlayers->".concat(e),t),this._video.pause(),this._video.reload(e,{start_position:n}),this.emit(Fe.EVENT_RELOAD)}},{key:"_beforeInit",value:function(){var t=this;Ar("eagle").then((function(){Ir(jr(e.prototype),"_beforeInit",t).call(t)}))}}])&&Dr(n.prototype,r),i&&Dr(n,i),e}(Or);function Ur(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[];for(var n in t)e.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e.join("&")}function Hr(t){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Wr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fr(n,!0).forEach((function(e){qr(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fr(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function qr(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zr(t,e){return!e||"object"!==Hr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Jr(t,e,n){return(Jr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kr(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Kr(t){return(Kr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Zr(t,e){return(Zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qr,Xr=He.EVENT_PLAYING,ti=He.EVENT_PLAY,ei={paused:He.EVENT_PAUSE,resumed:ti,started:Xr,rewound:He.EVENT_SEEK,inited:He.EVENT_CANPLAY},ni=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zr(this,Kr(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zr(t,e)}(e,t),n=e,i=[{key:"getSupportedFormat",value:function(){return["embed"]}},{key:"buildSourceWithGetParams",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"".concat(t,"?").concat(Ur(e))}}],(r=[{key:"toString",value:function(){return"PlayerYandex"}},{key:"init",value:function(){var t=this,e=this.$options,n=e.source,r=e.position,i=void 0===r?0:r,o=e.duration,a=void 0===o?-1:o,s=e.ad,c=void 0===s?{no_ad:!1}:s,u=e.adConfig,l=void 0===u?{}:u,f=e.autoplay,d=void 0===f||f,h=e.mute,p=void 0!==h&&h;this.duration=a,this.provider="yandex",this.$payload={},this.$proxy=window.parent,this.setEventPrefix(this.instanceId);var v={autoplay:Number(d),mute:Number(p),recommendations:"off",from:"tvrain.ru"};return c.no_ad&&(v.no_ad=!0),this.initPlayer({source:n,adConfig:l,params:v}),i>0&&-1===window.location.hash.indexOf("#t=")&&(this.seek.bind(this),this.one(Xr,(function(){t.isAdPlaying?t.one(ti,(function(){t.seek(i)})):t.seek(i)}))),this.attachListeners(),this}},{key:"initPlayer",value:function(t){var n=this,r=t.source,i=t.params,o=t.adConfig,a=Wr({},i,{event_prefix:this.getEventPrefix()});if(!i.no_ad){var s={adBreaks:[]};o.adBreaks.forEach((function(t){var e=Wr({},t.adFoxParameters,{containerId:n.getEventPrefix()});s.adBreaks.push(Wr({},t,{adFoxParameters:e}))})),a.adConfig=JSON.stringify(s)}var c=document.createElement("iframe");this._video=c,this._container=c,c.src=e.buildSourceWithGetParams(r,a),c.className="player",c.allowFullscreen=!0,c.frameBorder="0"}},{key:"dispatch",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Wr({method:"".concat(this.getEventPrefix()).concat(t)},e);return this.$proxy.postMessage(n,"*"),this}},{key:"play",value:function(){return this.dispatch("play"),this}},{key:"pause",value:function(){return this.dispatch("pause"),this}},{key:"mute",value:function(){return this.dispatch("mute"),this}},{key:"unmute",value:function(){return this.dispatch("unmute"),this}},{key:"setVolume",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.9,e={volume:t};return this.dispatch("setVolume",e),this}},{key:"seek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e={time:t};return this.dispatch("seek",e),this}},{key:"getTime",value:function(){var t=this.$payload.time;return void 0===t?-1:t}},{key:"setDuration",value:function(t){this.duration||(this.duration=Number(t))}},{key:"getDuration",value:function(){return this.duration}},{key:"setEventPrefix",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"prefix";this.event_prefix="".concat(t,"_")}},{key:"getEventPrefix",value:function(){return this.event_prefix}},{key:"getPrettyEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.replace("".concat(this.getEventPrefix()),"")}},{key:"isPlayerEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return t.match("".concat(this.getEventPrefix()))}},{key:"attachListeners",value:function(){var t=this;window.addEventListener("message",(function(e){if("https://frontend.vh.yandex.ru"===e.origin){var n=e.data||null,r=e.source;if(t.$proxy=r,n){t.$payload=Wr({},JSON.parse(n));var i=t.$payload,o=i.event,a=i.duration;if(a&&t.setDuration(a),t.isPlayerEvent(o)){var s=t.getPrettyEvent(o);t.listeners({type:ei[s]||s},t.$payload)}}}}))}},{key:"_beforeInit",value:function(){var t=this;Ar("yandex").finally((function(){Jr(Kr(e.prototype),"_beforeInit",t).call(t)}))}}])&&Gr(n.prototype,r),i&&Gr(n,i),e}(Or);function ri(t){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ii(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oi(t,e){return!e||"object"!==ri(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ai(t,e,n){return(ai="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=si(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function si(t){return(si=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ci(t,e){return(ci=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ui(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var li,fi=He.EVENT_PAUSE,di=He.EVENT_PLAYING,hi=He.EVENT_CANPLAY,pi=He.EVENT_PLAY,vi=He.EVENT_SEEK,mi=He.EVENT_MOUNTED,yi=He.EVENT_RELOAD,gi={in:{paused:fi,resumed:pi,started:di,rewound:vi,inited:hi},out:(Qr={},ui(Qr,"".concat(fi),"paused"),ui(Qr,"".concat(pi),"resumed"),ui(Qr,"".concat(di),"started"),ui(Qr,"".concat(vi),"rewound"),ui(Qr,"".concat(hi),"inited"),Qr)},bi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),oi(this,si(e).apply(this,arguments))}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ci(t,e)}(e,t),n=e,(r=[{key:"initPlayer",value:function(t){var n=t.source,r=t.adConfig,i=t.params;if("Yandex"in window){var o=this.element.querySelector(".player-video");o?o.innerHTML="":((o=document.createElement("div")).classList.add("player-video"),o.style.width="100%",o.style.height="100%",this.element.appendChild(o)),o.id=this.getEventPrefix();var a=new window.Yandex.VH.Player(this.getEventPrefix(),{contentId:this.getContentId(n),width:"100%",height:"100%",params:i,adConfig:i.no_ad?{adBreaks:[]}:r});return this._video=a,this._container=o,this}return ai(si(e.prototype),"initPlayer",this).call(this,{source:n,adConfig:r,params:i})}},{key:"mount",value:function(t){var n=this;return this.element=document.querySelector(t),"Yandex"in window?this.ready().then((function(){return n.emit(mi),Promise.resolve(!0)})).catch(this.onError):ai(si(e.prototype),"mount",this).call(this,t)}},{key:"getContentId",value:function(t){return t.split("/").pop()}},{key:"play",value:function(){return"Yandex"in window?(this._video.play(),this):ai(si(e.prototype),"play",this).call(this)}},{key:"pause",value:function(){return"Yandex"in window?(this._video.pause(),this):ai(si(e.prototype),"pause",this).call(this)}},{key:"mute",value:function(){return"Yandex"in window?(this._video.mute(),this):ai(si(e.prototype),"mute",this).call(this)}},{key:"unmute",value:function(){return"Yandex"in window?(this._video.unmute(),this):ai(si(e.prototype),"unmute",this).call(this)}},{key:"setVolume",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.9;return"Yandex"in window?(this._video.setVolume(t),this):ai(si(e.prototype),"setVolume",this).call(this,t)}},{key:"seek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"Yandex"in window?(this._video.seek(t),this):ai(si(e.prototype),"seek",this).call(this,t)}},{key:"getPrettyEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e="Yandex"in window?"_player:":"";return t.replace("".concat(this.getEventPrefix()).concat(e),"")}},{key:"attachListeners",value:function(){var t=this;return"Yandex"in window?(Or.getEvents().forEach((function(e){return t._video.on(gi.out[e]||e,(function(n){t.$payload=n||null;var r=t.$payload.duration;r&&t.setDuration(r),t.listeners({type:gi.in[e]||e},t.$payload)})),t})),this):ai(si(e.prototype),"attachListeners",this).call(this)}},{key:"removeListeners",value:function(){var t=this;return"Yandex"in window&&this._video?(Or.getEvents().forEach((function(e){t._video.off(gi.out[e]||e,t.listeners.bind(t,{type:gi.in[e]||e}))})),this):ai(si(e.prototype),"removeListeners",this).call(this)}},{key:"reload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("Yandex"in window){var n=t.source,r=t.position;return this.$options.source=n,this.$options.position=r,this._video._iframe.src=n,this.seek(r),this.emit(yi),this}return ai(si(e.prototype),"reload",this).call(this,t)}}])&&ii(n.prototype,r),e}(ni);function _i(t){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ki(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wi(n,!0).forEach((function(e){Ci(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wi(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ei(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Si(t,e){return!e||"object"!==_i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oi(t,e,n){return(Oi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ti(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Ti(t){return(Ti=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pi(t,e){return(Pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Ci(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ai=(Ci(li={},"".concat(Fe.EVENT_ENDED),"complete"),Ci(li,"".concat(Fe.EVENT_CANPLAY),"ready"),Ci(li,"".concat(Fe.EVENT_TIMEUPDATE),"time"),li),Ni={complete:Fe.EVENT_ENDED,ready:Fe.EVENT_CANPLAY,time:Fe.EVENT_TIMEUPDATE},Di=["play() failed because the user didn't interact with the document first. https://goo.gl/xX8pDD","Casting failed to load","The play method is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.","The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission.","The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission",'The play() request was interrupted by a "abort" event.','The play() request was interrupted by a "abort" event',"The play() request was interrupted by a call to pause(). https://goo.gl/LdLk22"],Ri=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Si(this,Ti(e).apply(this,arguments))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pi(t,e)}(e,t),n=e,i=[{key:"getSupportedFormat",value:function(){return["hls","mp4"]}}],(r=[{key:"toString",value:function(){return"PlayerJw"}},{key:"getPlayer",value:function(){return this}},{key:"getIngoreErros",value:function(){return[].concat(function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(Oi(Ti(e.prototype),"getIngoreErros",this).call(this)),Di)}},{key:"getTime",value:function(){return this._video.getPosition()}},{key:"getDuration",value:function(){return this._video.getDuration()}},{key:"getConfig",value:function(){return this._initConfig}},{key:"init",value:function(){var t=this,e=this.$options,n=(e.ad,e.source),r=e.width,i=e.height,o=e.autoplay,a=void 0===o||o,s=e.position,c=e.duration,u=this.element.querySelector(".player");if(!u){(u=document.createElement("div")).className="player";var l=document.createElement("div");u.appendChild(l)}this._container=u,this._video=null,this._initConfig={file:n,autostart:a,width:r,height:i,duration:c,position:s,hlshtml:!0,androidhls:!0,html5:!0,advertising:null,cast:{},playbackRateControls:[.25,.5,.75,1,1.25,1.5,1.75,2]},s>0&&-1===window.location.hash.indexOf("#t=")&&(this.seek.bind(this),this.one(Fe.EVENT_PLAY,(function(){t.seek(s)})))}},{key:"ready",value:function(){var t=this;return new Promise((function(e,n){t.one(Fe.EVENT_POST_INIT,(function(){e(t)})),t.on("error",n)}))}},{key:"mount",value:function(t){var n=this;return Oi(Ti(e.prototype),"mount",this).call(this,t).then((function(){n._video=n.jwplayer(n.getContainer().firstChild).setup(n.getConfig()),n._video.addEventListener=n._video.on,n._video.removeEventListener=n._video.off,n.attachListeners()}))}},{key:"attachListeners",value:function(){var t=this;Or.getEvents().forEach((function(e){t._video.on(Ai[e]||e,t.listeners.bind(t,{type:e}))}))}},{key:"removeListeners",value:function(){var t=this;return this._video&&(this._video.removeEventListener(),Or.getEvents().forEach((function(e){t._video.off(Ni[e]||e,t.listeners.bind(t,{type:Ai[e]||e}))}))),this}},{key:"seek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.1;return this._video.seek(t),this}},{key:"reload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.source,n=t.position;this.logger("reloadPlayers->".concat(e),t),this._video.stop(),this._initConfig=ki({},this._initConfig,{file:e,position:n}),this._video=this.jwplayer(this.getContainer().firstChild).setup(this.getConfig()),this.emit(Fe.EVENT_RELOAD)}},{key:"_beforeInit",value:function(){var t=this;this.jwplayer=null,Ar("jw").then((function(n){t.jwplayer=n,Oi(Ti(e.prototype),"_beforeInit",t).call(t),t.emit("libraryloaded")}))}},{key:"unmount",value:function(){return this._video.remove(),Oi(Ti(e.prototype),"unmount",this).call(this)}}])&&Ei(n.prototype,r),i&&Ei(n,i),e}(Or);function Ii(t){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xi(t,e){return!e||"object"!==Ii(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mi(t,e,n){return(Mi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Li(t)););return t}(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Li(t){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vi(t,e){return(Vi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yi,Bi=Fe.EVENT_ENDED,$i=Fe.EVENT_PAUSE,Ui=Fe.EVENT_PLAYING,Hi=Fe.EVENT_TIMEUPDATE,Fi=Fe.EVENT_MOUNTED,Wi=Fe.EVENT_CANPLAY,qi=Fe.EVENT_RELOAD,Gi=Fe.EVENT_ERROR,zi=Fe.STATE_PLAYING,Ji=Fe.EVENT_UNMOUNTED,Ki={0:Bi,1:Ui,2:$i},Zi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),xi(this,Li(e).apply(this,arguments))}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vi(t,e)}(e,t),n=e,(r=[{key:"toString",value:function(){return"PlayerYoutube"}},{key:"init",value:function(){var t=this.$options,e=t.autoplay,n=void 0===e||e,r=t.source;this._config={playerVars:{autoplay:Number(n),controls:1,modestbranding:1,rel:0},videoId:r};var i=this.element.querySelector(".player-video");i?i.innerHTML="":((i=document.createElement("div")).classList.add("player-video"),this.element.appendChild(i)),this._container=i;var o=document.createElement("div");o.style.width="100%",o.style.height="100%",i.appendChild(o),this._video=new this.YTapi.Player(o,this._config),this._intervalTimeUpdate=null,this.bindFunction(),this.attachListeners(),this.provider="youtube"}},{key:"bindFunction",value:function(){this.addListenerForTimeUpdate=this.addListenerForTimeUpdate.bind(this),this.stopCheckCurrentTime=this.stopCheckCurrentTime.bind(this),this.startCheckCurrentTime=this.startCheckCurrentTime.bind(this),this.onPlayerError=this.onPlayerError.bind(this),this.onPlayerReady=this.onPlayerReady.bind(this),this.onPlayerStateChange=this.onPlayerStateChange.bind(this)}},{key:"mount",value:function(t){var e=this;return this.element=document.querySelector(t),this.ready().then((function(){return e.emit(Fi),Promise.resolve(!0)})).catch(this.onError)}},{key:"getTime",value:function(){return this._video.getCurrentTime()}},{key:"getDuration",value:function(){return this._video.getDuration()}},{key:"play",value:function(){return this._video.playVideo(),this}},{key:"pause",value:function(){return this._video.pauseVideo(),this}},{key:"seek",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._video.seekTo(t),this}},{key:"mute",value:function(){return this._video.mute(),this}},{key:"unmute",value:function(){return this._video.unMute(),this}},{key:"setVolume",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:90;return this._video.setVolume(t),this}},{key:"unmount",value:function(){return this.stopCheckCurrentTime(),this.removeListeners(),this.getContainer()&&"function"==typeof this.getContainer().remove?this.getContainer().remove():this.getContainer()&&this.getContainer().parentNode&&this.getContainer().parentNode.removeChild(this.getContainer()),this.emit(Ji),this.off(),this._video.destroy(),this._video=null,!0}},{key:"startCheckCurrentTime",value:function(){var t=this;if(this._intervalTimeUpdate&&this.stopCheckCurrentTime(),this.getState()===zi){var e={time:this.getTime()},n={type:Hi};this._intervalTimeUpdate=setInterval((function(){t.listeners(n,e)}),1e3)}}},{key:"stopCheckCurrentTime",value:function(){clearTimeout(this._intervalTimeUpdate),this._intervalTimeUpdate=null}},{key:"addListenerForTimeUpdate",value:function(){var t=this;this.on(Ui,this.startCheckCurrentTime),[Bi,$i,Gi].forEach((function(e){t.on(e,t.stopCheckCurrentTime)}))}},{key:"removeEventListenerForTimeUpdate",value:function(){var t=this;this.off(Ui,this.startCheckCurrentTime),[Bi,$i,Gi].forEach((function(e){t.off(e,t.stopCheckCurrentTime)}))}},{key:"onPlayerError",value:function(t){var e=t.data,n=void 0===e?null:e;this.listeners({type:Gi},n)}},{key:"onPlayerReady",value:function(){this.addListenerForTimeUpdate(),this.listeners({type:Wi})}},{key:"onPlayerStateChange",value:function(t){var e=t.data,n=void 0===e?null:e,r="number"==typeof n?Ki[n]:null;r&&this.listeners({type:r})}},{key:"attachListeners",value:function(){return this._video.addEventListener("onError",this.onPlayerError),this._video.addEventListener("onReady",this.onPlayerReady),this._video.addEventListener("onStateChange",this.onPlayerStateChange),!0}},{key:"removeListeners",value:function(){return this.removeEventListenerForTimeUpdate(),this._video.removeEventListener("onError",this.onPlayerError),this._video.removeEventListener("onReady",this.onPlayerReady),this._video.removeEventListener("onStateChange",this.onPlayerStateChange),Mi(Li(e.prototype),"removeListeners",this).call(this)}},{key:"reload",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.source,n=t.position;return this.logger("reloadPlayers->".concat(e),t),this._video.pauseVideo(),this._video.loadVideoById({videoId:e,startSeconds:n}),this.emit(qi),this}},{key:"_beforeInit",value:function(){var t=this;Ar("youtube").then((function(n){t.logger("YT LOADED",n),t.YTapi=n,Mi(Li(e.prototype),"_beforeInit",t).call(t)}))}}])&&ji(n.prototype,r),e}(Or);function Qi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Xi(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qi(n,!0).forEach((function(e){eo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qi(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function to(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function eo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var no=(eo(Yi={},"".concat("yandex"),bi),eo(Yi,"".concat("eagle"),$r),eo(Yi,"".concat("youtube"),Zi),eo(Yi,"".concat("custom"),Ri),eo(Yi,"".concat("basic"),Or),Yi),ro={autoplay:!0,width:"100%",height:"100%"},io=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=tr();this.logger_=r.send,this.enabledLogger=r.enable,this.disableLogger=r.disable,this._configOptions={},this.player_=null,this._playerCode=null,this.playerFormat_=null,this.mountId=null,this.setPlayerCode_(e),this.setupConfigurationOptions_(n)}var e,n;return e=t,(n=[{key:"changePlayer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t!==this.getPlayerCode()&&(this.logger_("changePlayer->".concat(t)),e&&this.setupConfigurationOptions_(e),this.unmount(),this.reset(),this.setPlayerCode_(t),this.createPlayer(),this.logger_("changePlayer->".concat(t)))}},{key:"mount",value:function(t){var e=this;return t&&(this.mountId=t,this.getPlayer().on("plugin-install",(function(){e.getPlayer().mount(t)}))),this}},{key:"unmount",value:function(){return this.getPlayer().unmount(),this.player_=null,this}},{key:"createPlayer",value:function(){var t=this.getConfigOptions(),e=this.getPlayerByFormat()||this.getPlayerByCode();return this.player_=new e(t),this.player_}},{key:"destroy",value:function(){var t=this.mountId;if(this.unmount(),this.reset(),t){var e=document.getElementById(t);e&&("function"==typeof e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e))}return this.mountId=null,!0}},{key:"getConfigOptions",value:function(){return this._configOptions}},{key:"setPlayerCode_",value:function(t){this._playerCode=t.toLowerCase(),this.logger_("setProvider->".concat(this._playerCode))}},{key:"getPlayerCode",value:function(){return this._playerCode}},{key:"setPlayerFormat_",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.playerFormat_=t.toLowerCase(),this.logger_("setFormat->".concat(this.playerFormat_))}},{key:"getPlayerFormat",value:function(){return this.playerFormat_}},{key:"getPlayerByFormat",value:function(){var t=this;return[bi,$r,Ri].filter((function(e){return-1!==e.getSupportedFormat().indexOf(t.getPlayerFormat())}))[0]}},{key:"getPlayerByCode",value:function(){return no[this.getPlayerCode()]}},{key:"getPlayer",value:function(){return this.player_}},{key:"hasPlayerYandex",value:function(){return this.getPlayer()instanceof bi}},{key:"hasPlayerEagle",value:function(){return this.getPlayer()instanceof $r}},{key:"hasPlayerJw",value:function(){return this.getPlayer()instanceof Ri}},{key:"reloadPlayer",value:function(t){return this.logger_("reloadPlayer->params",t),this.setupConfigurationOptions_(t)&&this.getPlayer().reload(this.getConfigOptions()),this.logger_("reloadPlayer->params",t),this}},{key:"rebuild",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t&&this.setupConfigurationOptions_(t),this.unmount(),this.createPlayer(),this.logger_("rebuild->".concat(this.player_)),this}},{key:"reset",value:function(){return this._playerCode=null,this.player_=null,this}},{key:"setupConfigurationOptions_",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.format,n=void 0===e?"":e;return this._configOptions=Xi({},ro,{},t),this.setPlayerFormat_(n),!0}}])&&to(e.prototype,n),t}();function oo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ao(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?oo(n,!0).forEach((function(e){so(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oo(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function so(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var co=function(t){if(!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("{}"===JSON.stringify(t))throw new Error("Data is empty");if(!(t instanceof Object))throw new Error("Data is empty");return!0}(t))return{};var e=t.autoplay,n=void 0===e||e,r=t.muted,i=void 0!==r&&r,o=t.plugins,a=void 0===o?[]:o,s=t.playlist,c={autoplay:n,muted:i,plugins:a};return Array.isArray(s)?ao({},c,{},s[0]):t instanceof Object&&!Array.isArray(t)?ao({},c,{},t):void 0},uo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=co(t),n=e.duration,r=void 0===n?0:n,i=e.source,o=void 0===i?0:i,a=e.payload,s=void 0===a?{player_template_id:null}:a,c=e.position,u=void 0===c?0:c,l=e.autoplay,f=void 0!==l&&l,d=e.muted,h=void 0!==d&&d,p=e.plugins,v=void 0===p?[]:p,m=e.format,y=e.ad,g=void 0===y?{}:y,b=s.expires,_=void 0===b?null:b,w=s.signature,k=void 0===w?null:w,E=s.player_template_id,S=g.template;return{autoplay:f,muted:h,plugins:v,position:u,duration:r,source:o,format:m,cust_params:Ie.getCustomParams({addKeys:{lite:window.dfp_is_lite}}),ad:g,expires:_,signature:k,player_template_id:E,ad_template_id:S}},lo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=co(t),n=e.duration,r=e.format,i=e.source,o=void 0===i?0:i,a=e.position,s=e.autoplay,c=void 0===s||s,u=e.muted,l=void 0!==u&&u,f=e.plugins,d=void 0===f?[]:f,h=e.ad,p=void 0===h?{no_ad:!1}:h,v={adBreaks:[{adType:"preroll",adFoxParameters:{ownerId:"167940",params:ao({p1:"cfhik",p2:"ekrg"},Ie.getVastYandex())}},{adType:"midroll",timeOffset:600,repeatAfter:600,adFoxParameters:{ownerId:"167940",params:ao({p1:"cfxga",p2:"eoob"},Ie.getVastYandex())}}]};return{format:r,autoplay:c,muted:l,plugins:d,position:a,duration:n,source:o,ad:p,adConfig:v}},fo=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=co(t),n=e.duration,r=e.format,i=e.source,o=void 0===i?0:i,a=e.position,s=e.autoplay,c=void 0!==s&&s,u=e.muted,l=void 0!==u&&u,f=e.plugins,d=void 0===f?[]:f,h=e.ad;return{format:r,autoplay:c,muted:l,plugins:d,position:a,duration:n,source:o,ad:h}},ho=function(t,e){return I.a.updateVideoSignature(e,{token:t})},po=_.template('\n<% if (data.series) { %>\n  <% data.series.forEach(function(item, index) { %>\n    <div\n      data-id="<%- index %>"\n      class="vodplayer-series__item<%- index == 0 ? \' current\' : \'\' %>"\n    >\n      <%  if(index == 0) { %>\n        <i class="fa fa-play"></i>\n      <% } else { %>\n        <i class="fa"></i>\n      <% } %>\n      Часть <%- (index + 1) %> <span class="__until_desktop_hidden">(<%- item.durationPretty %>)</span>\n    </div>\n  <% }); %>\n<% } %>\n',{variable:"data"});function vo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var mo=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=n.series,i=void 0===r?[]:r;this.series=i,this.template=po,this.playerProvideService=e,this.container=document.createElement("div"),this.container.className="vodplayer-series",this.seriesNodes=[],this.onClick=this.onClick.bind(this),this.state={prev:0,active:0}}var e,n;return e=t,(n=[{key:"mount",value:function(){var t=this;this.nodes=document.querySelectorAll("[data-vodplayer-series]"),this.container.innerHTML=this.template({series:this.series}),this.nodes.forEach((function(e){e.appendChild(t.container.cloneNode(!0))})),this.saveSeriesNode(),this.attachHandlers()}},{key:"saveSeriesNode",value:function(){var t=this;this.nodes.forEach((function(e){t.seriesNodes.push(e.querySelectorAll("[data-id]"))}))}},{key:"attachHandlers",value:function(){var t=this;this.seriesNodes.forEach((function(e){return e.forEach((function(e){return e.addEventListener("click",t.onClick)}))}))}},{key:"removeHandlers",value:function(){var t=this;this.seriesNodes.forEach((function(e){return e.forEach((function(e){return e.removeEventListener("click",t.onClick)}))}))}},{key:"activateSeriesByIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.state.active;this.state={prev:e,active:t},this.playerProvideService.rebuildPlayer(this.series[t],"rebuild"),this.seriesNodes.forEach((function(e){e.forEach((function(e,n){e.classList.remove("current");var r=e.querySelector("i");r.classList.remove("fa-play"),n===t&&(r.classList.add("fa-play"),e.classList.add("current"))}))}))}},{key:"onClick",value:function(t){var e=t.currentTarget;if(e){var n=e.dataset,r=(void 0===n?{}:n).id,i=void 0===r?0:r;this.activateSeriesByIndex(Number(i))}}},{key:"unmount",value:function(){this.removeHandlers(),this.nodes.forEach((function(t){var e=t.querySelector(".vodplayer-series");e&&t.removeChild(e)}))}}])&&vo(e.prototype,n),t}();function yo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function go(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?yo(n,!0).forEach((function(e){bo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yo(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function bo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var wo="yandex",ko="eagle",Eo="custom",So="youtube",Oo="local",To="visible",Po="unvisible",Co=function(){return"WatchLater"in window&&new window.WatchLater},Ao=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e.provider,r=e.isWatchlater,i=void 0===r||r,o=e.playlist,a=void 0===o?[]:o,s=e.token,c=tr();this.PLAYER_UNVISIBLE=Po,this.PLAYER_VISIBLE=To,this.ready=!1,this.options_=JSON.stringify(e),this.manager_=null,this.config_={},this.el=null,this.idContainer=null,this.provider_=null,this.isWatchlater=i,this.$emitter=$({}),this.emit=this.emit.bind(this),this.on=this.on.bind(this),this.logger_=c.send,this.token=s,this.playlist=a,this.setProvider_(n),this.setConfig_(go({},e)),this.setWatchLaterLabel=this.setWatchLaterLabel.bind(this),this.init_()}var e,n,r;return e=t,r=[{key:"chekValidtyProvider",value:function(t){return-1!==[ko,wo,So,Eo,Oo].indexOf(t)}}],(n=[{key:"on",value:function(t,e){if(!t)return!1;if("function"!=typeof e)throw new TypeError("fn ожидалалась фукнция");return this.$emitter.on(t,e),!0}},{key:"emit",value:function(t){this.$emitter.trigger(t)}},{key:"mount",value:function(t){var e=this,n=new Promise((function(t,n){e.getPlayer().one(Fe.EVENT_MOUNTED,(function(){t(e),e.emit("mount"),e.attachListeners_()})),e.getPlayer().one(Fe.EVENT_ERROR,n)}));return this.el=document.querySelector(t),this.el&&(this.el.$player=this,this.idContainer=t,this.manager_.mount(t)),this.setSeriesService(),n}},{key:"reset",value:function(){return this.config_={},this.provider_=null,this.el.$player=null,this.el=null,this.idContainer=null,this}},{key:"beforeDestroy",value:function(){this.emit("beforDestroy"),this.series&&this.series.unmount()}},{key:"destroy",value:function(){this.beforeDestroy(),this.reset(),this.removeListeners_(),this.ready=null,this.manager_.destroy(),this.options_="{}",this.$emitter.off()}},{key:"changeProvider",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.code;if(!t.chekValidtyProvider(n))throw new Error("Invalid provider code");return this.logger_("run:changeProvider->".concat(n)),this.setProvider_(n),this.setConfig_(go({},e)),this.manager_.changePlayer(this.getProvider(),this.getConfig("options")),this.mount(this.idContainer),this.logger_("end:changeProvider->".concat(n)),!0}},{key:"rebuildPlayer",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"change",r=e.code,i=void 0===r?"":r,o=e.videoId,a=e.playlist;return a&&(this.playlist=a),o&&i===ko?ho(this.token,o).then((function(r){Object.assign(e,{payload:r}),t.rebuild(e,n)})):this.rebuild(e,n),this}},{key:"rebuild",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"change",n=t.code,r=void 0===n?"":n;if(r.length){if(r.toLowerCase()!==this.getProvider()||"change"===e)return this.changeProvider(t),this;if(r.toLowerCase()===this.getProvider()&&"reload"===e)return this.setConfig_(t),this.manager_.reloadPlayer(this.getConfig()),this.mount(this.idContainer),this;if(r.toLowerCase()===this.getProvider()&&"rebuild"===e)return this.setConfig_(t),this.manager_.rebuild(this.getConfig()),this.mount(this.idContainer),this}return this}},{key:"setConfig_",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.getProvider()===wo&&(this.config_=lo(t),this.logger_("run:setConfig->".concat(wo),t)),this.getProvider()===ko&&(this.config_=uo(t),this.logger_("run:setConfig->".concat(ko),t)),this.getProvider()!==Eo&&this.getProvider()!==So&&this.getProvider()!==Oo||(this.config_=fo(t),this.logger_("run:setConfig->".concat(Eo),t))}},{key:"getConfig",value:function(t){return this.config_[t]||this.config_}},{key:"setProvider_",value:function(t){this.provider_=t,this.logger_("run:setProvider->".concat(t))}},{key:"getProvider",value:function(){return this.provider_}},{key:"getPlayer",value:function(){return this.manager_.getPlayer()}},{key:"setWatchLaterLabel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=void 0===e?TVRAIN.app.article.id:e;if(this.isWatchlater&&n){var r=document.querySelector("#sub-watchlater");if(r&&"none"!==r.style.display&&(r.style.display="none"),r&&(window.DeviceDetect&&"MacOS"===window.DeviceDetect().getOS()||"youtube"===this.provider_)){for(;r.firstChild;)r.removeChild(r.firstChild);var i=document.createElement("div");return r.style.display="block",i.setAttribute("data-watchlater-id",n),i.setAttribute("data-watchlater",!0),i.setAttribute("data-title","Смотреть позже"),r.appendChild(i),void Co()}if(this.el.querySelector(".player_watchlater__label"))this.el.querySelector(".player_watchlater__label").setAttribute("data-watchlater",n);else{var o='<div class="player_watchlater__label" flow="left" tooltip=\'Смотреть позже\' data-icon="light" data-watchlater-id="'.concat(n,'" data-watchlater></div>'),a=document.createElement("div");a.className="player_watchlater",a.innerHTML=o,this.el.appendChild(a)}Co();var s=this.el.querySelector(".player_watchlater");this.getPlayer().on(Fe.EVENT_AD_START,(function(){s.classList.add("player_watchlater--hidden")})),this.getPlayer().on(Fe.EVENT_AD_END,(function(){s.classList.remove("player_watchlater--hidden")}))}}},{key:"setFullVersionButton",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.getPlayer().getPlugin("button");if(!n)return this;var r=e.url,i="player_button__full",o="player_button__full--sideIn",a=n();a.create(i,'<a href="'.concat(r,'" class="button" data-gather-category="article_elements"\n         data-gather-label="full_version" data-gather-value="player">Смотрите полную версию</span>'));var s=function(){var e=t.getPlayer().getDuration()-10;t.getPlayer().getTime()>=e&&!a.isShow?a.show(o):t.getPlayer().getTime()<=e&&a.hide(o)};return this.getPlayer().on(Fe.EVENT_TIMEUPDATE,s),this}},{key:"setVisibility",value:function(t,e){var n=this.getPlayer(),r=this.el;return t===Po?(r.style.width="1px",r.style.height="1px",r.style.position="relative",r.classList.add("video_hide"),"pause"!==n.getState()&&("idle"===n.getState()||"ready"===n.getState()?this.getPlayer().one(Fe.EVENT_PLAYING,(function(){n.pause()})):n.pause()),this):t===To?(n.play(),e&&n.seek(e),r.style.width="100%",r.style.height="100%",r.classList.remove("video_hide"),this):this}},{key:"setSubscriptionButton",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/podpiska/?fromPlayer=subscription-button",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"idle"===this.getPlayer().getState()?this.getPlayer().one(Fe.EVENT_CANPLAY,(function(){t.setSubscriptionBtn(e,n)})):this.setSubscriptionBtn(e,n)}},{key:"setSubscriptionBtn",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/podpiska/?fromPlayer=subscription-button",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.onClick,i=void 0===r?function(){}:r,o=n.text,a=void 0===o?"Оформить подпсику":o,s=this.getPlayer().getPlugin("button");if(s){var c=document.querySelector(".head__playerinfo"),u=s(),l=function(t){return setTimeout((function(){t?u.show():u.hide()}),2e3)},f=function(){t.getPlayer().getState()===Fe.STATE_PLAYING&&l(!1),t.getPlayer().getState()===Fe.STATE_PLAYING&&l(!0),t.getPlayer().getState()===Fe.STATE_STOP&&l(!1)};u.create(_,'<a href="'.concat(e,'" class="player_button__subscribe" target="_blank">').concat(a,"</a>"),c,"div"),this.getPlayer().on(Fe.EVENT_TIMEUPDATE,f),u.node.addEventListener("click",i.bind(null,a))}}},{key:"setSeriesService",value:function(){this.series&&this.series.series===this.playlist||(this.playlist.length<=1?this.series&&this.series.unmount():(this.series?(this.series.unmount(),this.series.series=this.playlist):this.series=new mo(this,{series:this.playlist}),this.series.mount()))}},{key:"init_",value:function(){var t=this.getProvider(),e=this.getConfig("options");return this.manager_||(this.manager_=new io(t,e),this.manager_.createPlayer()),this.ready=!0,this}},{key:"attachListeners_",value:function(){var t=this;TVRAIN.app.article.fullVersionUrl&&this.getPlayer().one(Fe.EVENT_CANPLAY,(function(){t.setFullVersionButton({url:TVRAIN.app.article.fullVersionUrl})})),this.getPlayer().one(Fe.EVENT_CANPLAY,this.setWatchLaterLabel),this.getPlayer().on(Fe.EVENT_RELOAD,this.setWatchLaterLabel)}},{key:"removeListeners_",value:function(){this.getPlayer().off(Fe.EVENT_CANPLAY,this.setWatchLaterLabel),this.getPlayer().off(Fe.EVENT_RELOAD,this.setWatchLaterLabel),this.getPlayer().off()}}])&&_o(e.prototype,n),r&&_o(e,r),t}();function No(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Do(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ro=5564800,Io="yacounter5564800inited",jo=[],xo=null,Mo=[{type:"hit",required:"url"},{type:"reachGoal",required:"target"},{type:"params",required:"parameters"}],Lo=function(){function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),xo)return xo;xo=this,this.init=this.init.bind(this),this.sendEvent=this.sendEvent.bind(this),this.isNewMetrika="ym"in window,this.isAvailable="yaCounter5564800"in window||this.isNewMetrika,this.isAvailable||document.addEventListener(Io,this.init)}var e,n;return e=t,(n=[{key:"sendEvent",value:function(t){var e,n,r=t.method,i=t.options,o=[t[this.getCurrentMethod(r).required]];i&&o.push(i),this.isNewMetrika?(e=window).ym.apply(e,[Ro,r].concat(o)):(n=window.yaCounter5564800)[r].apply(n,o)}},{key:"getCurrentMethod",value:function(t){return Mo.find((function(e){return e.type===t}))}},{key:"send",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.validate(t)&&(this.isAvailable?this.sendEvent(t):jo.push(t))}},{key:"init",value:function(){var t=this;this.isAvailable=!0,this.isNewMetrika="ym"in window,jo.forEach((function(e){t.sendEvent(e)})),jo=[],document.removeEventListener(Io,this.init)}},{key:"validate",value:function(t){var e=t.method,n=this.getCurrentMethod(e);if(!n)return!1;var r=n.required;return Boolean(t[r])}},{key:"getYaParamsForBtn",value:function(t){var e=t.url,n=t.category;return{CR_adv_btn_click:No({},window.location.pathname,No({},e,No({},n,Date.now())))}}},{key:"getRecurrentNumber",value:function(t){return 1===Number(t)?2e3:0===Number(t)?1e3:0}},{key:"createDataLayerObj",value:function(t){var e=t.step,n=t.params,r=n.id,i=n.name,o=n.price,a=n.brand,s=void 0===a?null:a,c=n.category,u=void 0===c?null:c,l=n.variant,f=void 0===l?0:l,d={id:r,name:i,price:o,brand:null===s?window.location.pathname:s,category:u||"",variant:Number(f)||-1},h={ecommerce:No({},e,{})};if("detail"!==e&&(d.quantity=1),"purchase"===e){var p=n.position,v=n.invoiceId,m=n.recurringType,y=void 0===m?null:m,g=null!==y?this.getRecurrentNumber(y):0;d.position=g+Number(p),h.ecommerce[e].actionField={id:v}}return h.ecommerce[e].products=[d],h}},{key:"getDonateObject",value:function(t){var e=t.defaultRecType,n=t.selectedRecType;return{CR_donate_btn_click:No({},t.defaultAmount,No({},t.selectedAmount,No({},e,No({},n,Date.now()))))}}},{key:"checkTimestamp",value:function(t){return Date.now()-t<36e5}},{key:"getStorageItem",value:function(){return localStorage.getItem("ya-metrika")}},{key:"removeStorageItem",value:function(){this.getStorageItem()&&localStorage.removeItem("ya-metrika")}},{key:"getStorageData",value:function(){var t=this.getStorageItem();if(!t)return"";var e=JSON.parse(t),n=e.timestamp,r=e.brand,i=e.category;return this.checkTimestamp(n)?{category:i,brand:r}:(this.removeStorageItem(),"")}},{key:"pushStorageItem",value:function(t){var e=t.brand,n=t.category,r={timestamp:Date.now(),brand:e,category:n};localStorage.setItem("ya-metrika",JSON.stringify(r))}}])&&Do(e.prototype,n),t}();window.YandexMetrikaService=new Lo;var Vo=Lo,Yo={tvrain:{views:{type:"text",selector:".document-head__views span"},date:{type:"text",selector:".document-head__date",helper:"prettyDataArticles",format:"D MMMM, HH:mm"},title:{type:"text",selector:".document-head__title h1"},subtitle:{type:"text",selector:".document-head__subtitle"},lead:{type:"html",selector:".document-lead"},text:{type:"html",selector:".article-full__text"},favorite:{helper:"toggle",selector:"[data-favorite]",toggles:["button--favorite","button--unfavorite"]},presenters:{type:"html",selector:".document-head__people",className:"document-head__link",helper:"link"},teleshow:{type:"html",selector:".document-head:eq(0)  .document-head__f1__l",helper:"link",className:"document-head__link document-head__parent",gather:'data-gather-category="article_elements" data-gather-label="goto_teleshow"',fullVersionUrl:{className:"document-head__link document-head__full",gather:'data-data-gather-category="article_elements"\n\t\t\t\t   data-gather-label="full_version"\n\t\t\t\t   data-gather-value="top" ',name:"Cмотреть полную версию"}},subcriptionButtons:{selector:"[data-subcription-buttons]"},player:{selector:".article-view-container"},tableOfContents:{selector:"[data-table-of-contents]"}},lite:{views:{type:"text",selector:".head__views span"},title:{type:"text",selector:".head__content__title h1"},subtitle:{type:"text",selector:".head__content__subname"},lead:{type:"html",selector:".content__lead"},text:{type:"html",selector:".content__text"},date:{type:"text",selector:".content__date",helper:"prettyDataArticles",format:"D.MM.YYYY"},favorite:{helper:"toggle",selector:"[data-favorite]",toggles:["button--favorite","button--unfavorite"]},presenters:{type:"html",selector:".content__authors-and-presenters-list",classPrefixPart:"content__authors-and-presenters",helper:"authorsLite"},image:{selector:".head__img img",helper:"attr",key:"src",value:""},tags:{type:"html",selector:".head__content__tags",helper:"tags"},duration:{type:"text",selector:".head__duration .head__time",helper:"humanizeDurration"},subcriptionButtons:{selector:"[data-subscribe-button]"},subcriptionButton:{selector:"[data-subcription-buttons]"},player:{selector:".head__player"},tableOfContents:{selector:"[data-table-of-contents]"}}},Bo=n(305);n(311);var $o={link:function(t,e){var n=this;if("string"==typeof t[e])return t[e];if("presenters"===e||"teleshow"===e){var r=this.fields[e],i=r.className,o=r.gather,a=("teleshow"===e?[t[e]]:t[e]).reduce((function(t,r){var a=r.name,s=r.url,c=r.fullVersionUrl;if(t+=' <a class="'.concat(i,'" ').concat(o||"",' href="').concat(s,'">').concat(a,"</a> "),c){var u=n.fields[e].fullVersionUrl;t+='<a class="'.concat(u.className,'" ').concat(u.gather||"",' href="').concat(c,'">').concat(u.name,"</a> ")}return t}),"");return t[e]=a,t[e]}},attr:function(t,e){var n=this.fields[e],r=n.key,i=n.value,o=n.selector;$(o).attr(r,"".concat(i+t[e]))},toggle:function(t,e){var n=this.fields[e],r=n.toggles,i=n.selector,o=Number(t[e]);o?$(i).removeClass(r[o-1]).addClass(r[o]):$(i).removeClass(r[o+1]).addClass(r[o])},prettyDataArticles:function(t,e){var n=this.fields[e].format,r=Bo(t[e]);r.locale("ru"),r.isValid()&&(t[e]=r.format(n))},humanizeDurration:function(t,e){var n=t[e],r={w:n/86400/7,d:n/86400%7,h:n/3600%24,m:n/60%60,s:n%60},i=["m","s"].map((function(t){if(null!=r[t]){var e=r[t]>9?"0".concat(r[t]):r[t];return parseInt(e,10)}})).join(":");t[e]=i},tags:function(t,e){var n="";t[e].forEach((function(t){var e=t.url,r=(t.id,t.name);"lite"==t.category&&(n+='<a href="'.concat(e,'">#').concat(r," </a>"))})),t[e]=n},authorsLite:function(t,e){var n=this.fields[e].classPrefixPart,r=t[e];if(r&&Array.isArray(r)){var i=r.reduce((function(t,e){var r=e.name,i=e.url;return t+'<li class="'.concat(n,'-item"><a class="').concat(n,'-link" href="').concat(i,'">').concat(r,"</a></li>\n        ")}),"");return t[e]=i,t[e]}return""}};function Uo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ho=null,Fo=function(t){var e=t.prev;aa.instance.update(e)},Wo=function(t){"googleTagRun"in window&&window.googleTagRun.update(t),"DISQUSWIDGETS"in window&&window.DISQUSWIDGETS.getCount({reset:!0}),window.User._isGuest&&"disqusGuest"in window&&"function"==typeof disqusGuest&&window.disqusGuest("articles"+t.id),"rekl"in window&&0!==window.enable_reload&&window.rekl.reloadDFP([window.gptadslots.dfp_banner_rc1])},qo=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"run",value:function(){null===Ho&&((new Pe).subscribe(Pe.EVENT_RENDER,Fo),aa.instance.subscribe(na,Wo))}},{key:"destroy",value:function(){Ho&&(aa.instance.unSubscribe(na,Wo),Pe.instance.unSubscribe(Pe.EVENT_RENDER,Fo),Ho=null)}}],null&&Uo(e.prototype,null),n&&Uo(e,n),t}();function Go(t){return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Jo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?zo(n,!0).forEach((function(e){Ko(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zo(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ko(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Zo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Qo(t,e){return!e||"object"!==Go(e)&&"function"!=typeof e?ta(t):e}function Xo(t){return(Xo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ta(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ea(t,e){return(ea=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var na="update-page",ra={lite:Yo.lite,tvrain:Yo.tvrain},ia=null,oa=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ia)return Qo(t,ia);t=Qo(this,Xo(e).call(this));var r=n.tpl,i=void 0===r?"tvrain":r;return ia=ta(t),t.fields=ra[i],t.navigate=new Ne,t.changeNavigationPageHandler_=t.changeNavigationPageHandler_.bind(ta(t)),Ne.onPopState(t.changeNavigationPageHandler_),t.buildInitialPageData_(),t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ea(t,e)}(e,t),n=e,i=[{key:"instance",get:function(){return ia}},{key:"EVENT_UPDATE_ITEMS",get:function(){return na}}],(r=[{key:"buildInitialPageData_",value:function(){qo.run()}},{key:"changeNavigationPageHandler_",value:function(t){this.update(t.state,!1)}},{key:"updatePageRecords_",value:function(){var t=this.model,e=t.id,n=t.video_id,r=t.isPaid,i=t.fullVersionDuraton,o=t.publishDate,a=t.demo_video_test,s=t.tableOfContents,c=document.querySelector('[rel="canonical"]');TVRAIN.Content=Jo({},TVRAIN.Content,{article_id:e,video_id:n,fullVersion:i,_isPaid:r,demo_video_test:a,publishDate:o,tableOfContents:s}),TVRAIN.app.article=Jo({},TVRAIN.app.article,{},this.model),c&&c.setAttribute("href",document.location.origin+this.model.url)}},{key:"shareUpdate",value:function(){$(".social-likes").socialLikes({forceUpdate:!0,url:document.location.href,title:this.model.title})}},{key:"componentRender",value:function(t){var e=this.fields[t].selector,n=t;"subcriptionButton"===t&&(n="subcriptionButtons"),Et.render({data:this.model,renders:{type:n},selector:e,update:!0})}},{key:"update",value:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t){n&&this.navigate.add(t),this.model=Jo({},t);var r=this.model,i=r.incuts,o=void 0===i?[]:i,a=r.tableOfContents,s=r.subscriptionTypes,c=r.videos,u=null;if(a&&this.componentRender("tableOfContents"),s&&(this.componentRender("subcriptionButtons"),window.window.dfp_is_lite&&this.componentRender("subcriptionButton")),c&&this.componentRender("player"),o.length&&(u=Wt.buildTemplate(o)),Object.keys(this.model).forEach((function(t){if(t in e.fields){var n=e.fields[t],r=n.type,i=n.selector,o=n.helper;o&&$o[o].call(e,e.model,t),"text"===t&&u&&(e.model[t]=Wt.getIncut(e.model[t],u)),-1!==["html","text"].indexOf(r)&&$(i)["".concat(r)](e.model[t])}})),this.updatePageRecords_(),this.shareUpdate(),this.publish(na,t),s){var l=window.__APP__.Widgets.getWidgets().install;Object.keys(l).forEach((function(t){var e=l[t];"BuyBlockWidget"===e.$widgetName&&e.updateWidget()}))}$(document).trigger(_.merge({},jQuery.Event(na),{updatepage:t}))}}}])&&Zo(n.prototype,r),i&&Zo(n,i),e}(ce);window.UpdatePage=oa;var aa=oa,sa=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.productId="",this.entitlements=[],this.activeEntitlements=null,this.userStorage={}},ca=function(t,e){return console.log(t,e)};function ua(t){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function la(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fa(t){return(fa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function da(t,e){return(da=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ha="completeDeferredAccountCreation",pa="showLoginPrompt",va=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e){return!e||"object"!==ua(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,fa(e).call(this))).swg=t,ca("SubscribeWithGoogleService",{__SubscriptionsRuntimeVer__:"0.1.22.28"}),n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&da(t,e)}(e,t),n=e,i=[{key:"events",get:function(){return["LoginRequest","LinkComplete","EntitlementsResponse","SubscribeResponse","FlowStarted","FlowCanceled"]}}],(r=[{key:"$publisher",value:function(){var t=this;return e.events.forEach((function(e){var n=function(t){return function(e){Promise.resolve(e).then((function(e){console.log("".concat(t),e)}),(function(e){console.log("".concat(t,"failed"),e)}))}}("SubscribeWithGoogleService:Runtime:".concat(e));t.swg["setOn".concat(e)]((function(r){n(r),t.publish(e,r)}))})),this}},{key:"$init",value:function(t){return ca("SubscribeWithGoogleService:$init",t),this.swg.init(t),this}},{key:"$start",value:function(){return ca("SubscribeWithGoogleService:$start"),this.swg.start(),this}},{key:"$getEntitlements",value:function(){return ca("SubscribeWithGoogleService:$getEntitlements"),this.swg.getEntitlements()}},{key:"$showOffers",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ca("SubscribeWithGoogleService:$showOffers"),this.swg.showOffers(t),this}},{key:"$reset",value:function(){return ca("SubscribeWithGoogleService:$reset"),this.swg.reset(),this}},{key:"$linkAccount",value:function(){return ca("SubscribeWithGoogleService:$linkAccount"),this.swg.linkAccount()}},{key:"$completeDeferredAccountCreation",value:function(t){ca("SubscribeWithGoogleService:$completeDeferredAccountCreation",t);var e=t.entitlements,n=t.consent,r=void 0!==n&&n;return this.swg.completeDeferredAccountCreation({entitlements:e,consent:r})}},{key:"$attachButton",value:function(t,e){return ca("SubscribeWithGoogleService:$attachButton",{button:t,action:e}),this.swg.attachButton(t,e),this}},{key:"$showLoginPrompt",value:function(){return ca("SubscribeWithGoogleService:$showLoginPrompt"),this.swg.showLoginPrompt()}},{key:"$subscribe",value:function(t){return this.swg.subscribe(t)}},{key:"$clear",value:function(){return this.swg.clear()}}])&&la(n.prototype,r),i&&la(n,i),e}(ce),ma="Rain_User_Session_Storage",ya="RAIN_SESSION";function ga(){var t={user_session:!0,firstTime:+new Date,lastTime:null,firstSessionPage:1,page:0,step:0},e=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="".concat(t,"=").concat(e);Object.keys(n).forEach((function(t){r+="; ".concat(t,"=").concat(n[t])})),document.cookie=r},n=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage,e="test";try{return t.setItem(e,"1"),t.removeItem(e),!0}catch(t){return!1}},r=function(t){var e=t.hash_session,n=t.hash_view;return Number(e===n)},i=function(){var t,n=(t=document.cookie.split("; ").find((function(t){return 0===t.indexOf(ya)})))?parseInt(t.slice(ya.length+1),10):null;return null===n?(e(ya,0,{path:"/",secure:!0,sameSite:"lax"}),0):(e(ya,n+=1,{path:"/",secure:!0,sameSite:"lax"}),n)},o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ma,e=arguments.length>1?arguments[1]:void 0;n()&&(localStorage.removeItem(t),localStorage.setItem(t,JSON.stringify(e)))},a=function(t){return JSON.parse(localStorage.getItem(t))},s=a(ma),c=function(e){n()&&(s||function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,n=JSON.parse(localStorage.getItem(t));return!n&&(localStorage.setItem(t,JSON.stringify(e)),!0)}(ma,t)&&i(),s&&(s.step=i(),s.page+=1,r(e)&&(s.lastTime=s.firstTime,s.firstTime=+new Date,s.firstSessionPage=1),r(e)||(s.firstSessionPage=0),o(ma,s)))};return{run:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e[0];c(r)},get currentSession(){return s},get step(){return s&&s.step?s.step:0},additional:function(t){o(ma,_.merge(a(ma),t))}}}var ba="data-noshow",_a="data-close",wa="data-item",ka="data-control",Ea="data-control-done",Sa="data-control-cancel",Oa="promo:expand",Ta="promo:collaps",Pa="promo:done",Ca="promo:cancel",Aa="promo:close",Na="promo:noshow",Da=function(t){var e=$('<div class="modal modal--hidden">'.concat(t,"</div>")),n=$({});return e.appendTo("body").modal().removeClass("modal--hidden").on($.modal.BEFORE_CLOSE,(function(t,e){$(".layout").removeClass("layout--perspective"),$("body .wrap:first").removeClass("wrap--perspective"),e.elm.remove()})),{element:e[0].parentElement,close:function(){$.modal.close()},event:n}},Ra=function(t){var e=$({}),n=document.body,r=document.createElement("div");return r.innerHTML=t,n.insertBefore(r,null),r.addEventListener("click",(function(t){t.target&&t.target.closest("[".concat(_a,"]"))&&(t.preventDefault(),e.trigger(Aa)),t.target.closest("[".concat(ba,"]"))&&e.trigger(Na)}),!1),{close:function(){r.parentNode.removeChild(r)},element:r,event:e}},Ia={mini:Ra,upper:function(t){var e,n=Ra(t),r=n.element,i=n.close,o=n.event,a=r.children[0].clientHeight,s=r.querySelector("[".concat(wa,"]")).clientHeight,c=$(r).children().first(),u=null,l=function(){o.trigger(Oa,c),u&&clearTimeout(u),c.addClass("opening"),u=setTimeout((function(){s!==r.querySelector("[".concat(wa,"]")).clientHeight&&(s=r.querySelector("[".concat(wa,"]")).clientHeight),c.height(s+a),c.addClass("opened"),c.removeClass("opening"),o.trigger("promo:render",c)}),300)},f=function(){c.height(a),c.removeClass("opened"),o.trigger(Ta,c)};return $(c).ready((function(){c.addClass("ready"),$(c).hover((function(){l()}),(function(){f()}))})),r.addEventListener("touchstart",(function(t){e=t.changedTouches[0].screenY})),r.addEventListener("touchend",(function(t){e-t.changedTouches[0].screenY>100?l():t.changedTouches[0].screenY-e>100&&f()})),{close:i,element:r,event:o}}},ja=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=Oa,n=document.querySelector("body"),r=document.createElement("div"),i=$({});function o(t){var n=t.target.closest("[".concat(Ea,"]")),r=t.target.closest("[".concat(Sa,"]")),o=t.target.closest("[".concat(ka,"]"));if(n&&i.trigger(Ea),r&&i.trigger(Sa),o)switch(e){case Ta:i.trigger(Oa);break;case Oa:i.trigger(Ta)}}return r.className="".concat("promo_dialog"," expand"),r.innerHTML=t,n.insertBefore(r,n.firstChild),r.addEventListener("click",o),i.on(Oa,(function(){e=Oa,$(r).removeClass("collaps").addClass("expand")})),i.on(Ta,(function(){e=Ta,$(r).removeClass("expand").addClass("collaps")})),i.on(Pa,(function(){console.log("done")})),i.on(Ca,(function(){console.log("cancel")})),{close:function(){i.off(),r.removeEventListener("click",o),r.parentNode.removeChild(r)},element:r,event:i}},xa=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=$({}),n=document.body,r=document.createElement("div");r.className="promo_form",r.innerHTML=t,n.style.overflow="hidden",n.insertBefore(r,n.firstChild);var i=function(t){var e=t.which,n=t.keyCode,r=t.key;27!==e&&27!==n&&"Escape"!==r&&"Esc"!==r||o()};function o(){document.removeEventListener("keyup",i),e.off(),r.parentNode.removeChild(r),n.style.overflow=""}return document.addEventListener("keyup",i),{events:e,element:r,close:o}},Ma="promo_bar",La="[data-promo-bar]",Va=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=document.body,n=document.createElement("div"),r=$({});if(n.className=Ma,n.innerHTML=t,e.className+=" __backgroundPosY",document.querySelector(La))document.querySelector(La).appendChild(n);else if(-1!==e.className.indexOf("body_lite")){var i=document.querySelector(".headmenu");$(i).before(n),$(i).addClass("headmenu--fufucka")}else e.insertBefore(n,e.firstChild);function o(t){t.target.closest(_a)&&r.trigger(Aa)}return n.addEventListener("click",o),{event:r,element:n,close:function(){r.off(),n.removeEventListener("click",o),n.parentNode.removeChild(n),e.className=e.className.replace("__backgroundPosY","")}}};function Ya(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ba=function t(){var e="/static/js/pub/templates/mustache/promo/popups",n="".concat(e,"/popup/popup.mst"),r=$({}),i=function(){};this.name="notifications";var o={modal:Da,dialog:ja,form:xa,bar:Va,mini:Ia.mini,upper:Ia.upper},a={data:null,preset:"modal",callbacksEvent:{load:i,close:i,noshow:i,click:i,render:i},close:i,el:null,code:null,template:n,beforeRender:function(){var t=this;return $.when(this.load()).then((function(e){return t.render(t.buildTemplate(e))}))},buildTemplate:function(t){return _.template(t,{variable:""})},afterRender:function(){this.el&&(this.data.extractRun(),r.trigger("render",a),$(this.el.element).on("click",this.attachHandlers),r.on(Aa,this.unAttachmentHandlers))},attachHandlers:function(e){var n=this,i=e.target,o=i.closest("[".concat(ba,"]")),s=i.closest("[".concat(Ea,"]")),c=i.closest("[".concat(Sa,"]")),u=i.closest("[".concat(wa,"]"));if(i.closest("[".concat(_a,"]"))||e.target.parentElement.closest("[".concat(_a,"]")))return r.trigger(Aa),r.trigger("close"),void this.el.close();if(s){var l=s.getAttribute("action");if(l){var f=Ya(JSON.parse(l),1)[0];if(f.type&&"popup"===f.type){var d=new t;d.set(f,{load:function(t,e){console.log(n),e.on("close",(function(){n.el.close()}))}}),d.render()}}r.trigger(Pa)}else{if(!c)return o?(r.trigger(Na,a),r.trigger("noshow",a),void this.el.close()):void(u&&u.hasAttribute("href")&&(r.trigger("promo:click"),r.trigger("click")));r.trigger(Ca)}},unAttachmentHandlers:function(){},init:function(t){var n=this,i=Ya(t,2),s=i[0],c=i[1];if(this.attachHandlers=this.attachHandlers.bind(this),this.unAttachmentHandlers=this.unAttachmentHandlers.bind(this),this.data=s,this.callbacksEvent=_.merge(this.callbacksEvent,c),this.data){var u=this.data,l=u.template,f=u.code;if(l&&(this.template="".concat(e,"/").concat(l.split(".")[0],"/").concat(l,".mst"),o[l.split(".")[0]])){var d=l.split(".")[0];this.preset=d}this.code=f}return Object.keys(this.callbacksEvent).forEach((function(t){if(-1!==["close","noshow","load","click","render"].indexOf(t)){var e=n.callbacksEvent[t].bind(null,"".concat(n.code),a);r.on(t,e)}})),this},on:function(t,e){return r.on(t,e),this},off:function(t,e){return t||e?t&&e&&r.off(t,e):r.off(),this},run:function(){return this.beforeRender(),this},load:function(){var t=this;return $.get(this.template).done((function(e){return r.trigger("load",{code:t.code,api:a}),e})).fail((function(e){var n=e.statusText,r=e.status;console.log("".concat(t.template,":"),{status:r,statusText:n})}))},_mixinDataGetter:function(t,e){var n=[];return t.get=function(e){return t[e]?t[e]:"customFields"in t?t.customFields[e]||null:void 0},t.extract=function(t){"function"==typeof t&&n.push(t)},t.extractRun=function(){var t=this;n.forEach((function(e){return e(t.data)}))},t},render:function(t,e){var n=this;$.when(o["".concat(this.preset)](t(this._mixinDataGetter(e||this.data)))).then((function(t){n.el=t}),(function(t){return console.log(t)})).then((function(){return n.afterRender()}))}};return{set:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return a.init(e)},render:function(){return a.run()}}};function $a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ua=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.Notificator=new Ba}var e,n,r;return e=t,r=[{key:"respParse",value:function(t){try{return JSON.parse(t)}catch(t){this.message({message:t})}return t}},{key:"getClearCode",value:function(t){return t&&t.toString().split("--type")[0]||t}},{key:"isShow",value:function(e){return void 0!==$.cookie("".concat("popup-noshow","_").concat(t.getClearCode(e)))}}],(n=[{key:"message",value:function(t){for(var e=t.message,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"log",r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];return console[n](e,i),this}},{key:"init",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!e)return!1;var o=$.when($.ajax({method:"GET",url:"/site/promopopup/",data:e})).then((function(e){var i=t.respParse(e);if(i.success)return r(i);n.message(i,"warn")})).fail(i);return o.then((function(t){return t}))}},{key:"noshow",value:function(e,n){var r=n.code,i=n.expires;$.cookie("".concat("popup-noshow","_").concat(t.getClearCode(r)),1,{expires:i||7,path:"/"}),this.unAttchHandlers()}},{key:"attachHandlers",value:function(){this.notify.on("noshow",this.noshow.bind(this))}},{key:"unAttchHandlers",value:function(){this.notify.off()}},{key:"render",value:function(){this.notify=this.Notificator.render(),this.attachHandlers()}}])&&$a(e.prototype,n),r&&$a(e,r),t}();function Ha(t){return(Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fa(t){return(Fa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wa(t,e){return(Wa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qa=function(t,e){var n=function(e){function n(){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),(e=function(t,e){return!e||"object"!==Ha(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Fa(n).call(this))).User=t,e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wa(t,e)}(n,e),n}(e);return{render:function(t,e){if(!t)return console.log("Code is not null!"),!1;var r=new n;if(n.isShow(t))return{message:"Пользователь отключил отображение всплывающих окон"};var i=r.init({code:t},(function(n){r.User.info.session.additional({code:t}),r.Notificator.set(n,e),i.then((function(){return r.render()}))}),(function(t){return console.log(t)}));return!0}}};function Ga(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function za(t,e,n){return e&&Ga(t.prototype,e),n&&Ga(t,n),t}var Ja=null,Ka=function(){function t(e){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),null===t.instance&&(t.instance=this),t.instance}return za(t,null,[{key:"instance",get:function(){return Ja},set:function(t){null==Ja&&(Ja=t)}}]),za(t,[{key:"isGuest",value:function(){return void 0===this._isGuest&&(this._isGuest=$.cookie&&void 0===$.cookie(window.TVRAIN&&TVRAIN.AuthCookie)),this._isGuest}},{key:"info",get:function(){return{session:ga(),promo:new qa(new t,Ua)}}}]),t}();function Za(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Qa="UserSubscribeWithGoogle",Xa=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"isAuth",value:function(){return!Ka.instance.isGuest()}},{key:"authForToken",value:function(t){return!!t&&I.a.authUser({action:"AuthorizationToken"},{token:t})}},{key:"linkComplete",value:function(){return I.a.subscribeWithGoogle({action:"UserLinkComplete"})}},{key:"authForEmail",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=$.Deferred();return $.get("/login/?email=".concat(t)).then((function(t){$('<div class="modal modal--hidden">'.concat(t,"</div>")).appendTo("body").modal().removeClass("modal--hidden").on($.modal.BEFORE_CLOSE,(function(t,n){$(".layout").removeClass("layout--perspective"),$("body .wrap:first").removeClass("wrap--perspective"),n.elm.remove(),e.resolve(t)}))})),e}},{key:"hasAssociatedUserAccount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};console.log("".concat(Qa,":hasAssociatedUserAccount"),t);var e="";return t.entitlements.forEach((function(t){var n=t.subscriptionToken;e=n})),I.a.subscribeWithGoogle({action:"GetSubscriptionInfo"},{token:e}).then((function(t){var e=t.id;return Object.assign(t,{hasUser:0!==e})}))}},{key:"postPurchaseAccountCreation",value:function(t){return console.log("".concat(Qa,":postPurchaseAccountCreation"),t),I.a.subscribeWithGoogle({action:"PostPurchaseAccountCreation"},t)}},{key:"deferredAccountCreation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return console.log("".concat(Qa,":deferredAccountCreation"),t),I.a.subscribeWithGoogle({action:"DeferredAccountCreation"},t)}}],null&&Za(e.prototype,null),n&&Za(e,n),t}();function ts(t,e){var n={};try{var r=t.getItem(e);return JSON.parse(r)}catch(t){console.log(t)}return n}function es(t){return JSON.stringify(t)}function ns(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rs={};function is(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function os(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function as(t,e,n){return e&&os(t.prototype,e),n&&os(t,n),t}rs["".concat(y)]=function(t){var e=localStorage;return function(){try{return e.setItem("test","1"),e.removeItem("test"),!0}catch(t){return!1}}()&&!ts(e,t)&&e.setItem(t,JSON.stringify({})),{getStorage:function(){return ts(e,t)},set:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.setItem(t,es(r?Object.assign({},ts(e,t),n):n)),!0},get:function(n){var r=ts(e,t);return r?r[n]:null},clear:function(){return e.clear()}}},rs["".concat("TVRAIN_SESSION_STORAGE")]=function(t){var e=window.sessionStorage;return function(){try{return e.setItem("test","1"),e.removeItem("test"),!0}catch(t){return!1}}()&&!ts(e,t)&&e.setItem(t,JSON.stringify({})),{getStorage:function(){return ts(e,t)},set:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.setItem(t,es(r?Object.assign({},ts(e,t),n):n)),!0},get:function(n){var r=ts(e,t);return r?r[n]:null},clear:function(){return e.clear()}}};var ss=function(){var t=$.Deferred();try{(window.SWG=window.SWG||[]).push((function(e){t.resolve(e)}))}catch(e){t.reject(e)}return t.promise()},cs=new(function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storageInterface=rs[e],this.name=e,this._createStorage(e)}var e,n;return e=t,(n=[{key:"_createStorage",value:function(t){return this.storage=this.storageInterface(t),this}},{key:"findByKey",value:function(t){}},{key:"getStorageKey",value:function(t){return this.storage.get(t)}},{key:"writeStorage",value:function(t,e){return this.storage.set(function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},"".concat(t),e)),this}},{key:"deleteStorageKey",value:function(t){return this}},{key:"json",value:function(){return this.storage.getStorage()}}])&&ns(e.prototype,n),t}())("TVRAIN_SESSION_STORAGE"),us=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e){var o={cancled:void 0,started:void 0};this.model=new sa,this.model.productId=e,this.registerButtons(r),this.flowState=o,ss().then((function(t){n.service=new va(t),n.service.$init(e),(window.$&&window.$.cookie&&window.$.cookie(g)||"").length?cs.getStorageKey(g)||(cs.writeStorage(g,+new Date),n.service.$clear()):cs.writeStorage(g,null),i?n.run():n.manual()}))}}return as(t,null,[{key:"hasSwG",value:function(){return"SWG"in window}}]),as(t,[{key:"run",value:function(){return this.service.$publisher().$start(),this.fetchEntitlements().attachHandlers(),this}},{key:"manual",value:function(){return this.service.$start(),this.service.$publisher(),this.attachHandlers(),this}},{key:"fetchEntitlements",value:function(){return Xa.isAuth()||this.service.$getEntitlements(),this}},{key:"attachHandlers",value:function(){var t=this,e=va.events,n=void 0===e?[]:e,r=this.buttons;return n.forEach((function(e){t.service.unsubscribeAll(t["on".concat(e)]),t["on".concat(e)]&&t.service.subscribe(e,t["on".concat(e)],t)})),r&&Array.prototype.forEach.call(r,(function(e){if(e instanceof HTMLElement){var n=e.parentNode;n&&"none"===getComputedStyle(n).display&&(n.style.display="block"),t.service.$attachButton(e,(function(){var n=e.dataset.sku;n&&n.length?t.openPaySkuId(n):t.openPaywall()}))}})),this}},{key:"registerButtons",value:function(t){return this.buttons=t,this}},{key:"onEntitlementsResponse",value:function(t){var e=this;return[t].forEach((function(t){t.then((function(t){e.model.entitlements.push(t),t&&t.enablesThis()&&(t.ack(),e.hasUserEntitlementsPublisher(t))}),(function(t){throw console.log("subscription response failed: ",t),t}))})),this}},{key:"hasUserEntitlementsPublisher",value:function(t){var e=this;this.model.activeEntitlements=window.md5&&window.md5(t.raw)||t.raw,this.model.userStorage=cs.getStorageKey(this.model.activeEntitlements),this.model.userStorage||cs.writeStorage(this.model.activeEntitlements,{timestamp:+new Date}),Xa.hasAssociatedUserAccount(t).then((function(n){var r=n.hasUser,i=e.model.userStorage,o=void 0===i?{}:i;if(r||e.completeDeferredAccountCreation(t)||TvrainAnalytics.eventc(t),r){if(o&&0===o.SWG_LOGIN_PROMT)return;e.service.$showLoginPrompt().then((function(){var t=n.authToken;Xa.authForToken(t).then((function(t){t.success?(cs.writeStorage(e.model.activeEntitlements,is({},"".concat("SWG_LOGIN_PROMT"),1)),window.location.reload(!0)):cs.writeStorage(e.model.activeEntitlements,is({},"".concat("SWG_LOGIN_PROMT"),0))}))})).catch((function(t){console.log(t)}))}}))}},{key:"onSubscribeResponse",value:function(t){var e=this;return[t].forEach((function(t){t.then((function(t){var n=t.json();Xa.postPurchaseAccountCreation(n).then((function(n){n.success&&t.complete().then((function(){cs.writeStorage(e.model.activeEntitlements,is({},"".concat("SWG_PURCHASE_SUCCESS"),1)),e.reset(),window.location.reload(!0)}))}))}),(function(t){throw console.log("subscription response failed: ",t),t}))})),this}},{key:"onFlowStarted",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.flow,n=t.data,r=void 0===n?{}:n;return e&&(this.flowState.data=r,this.flowState.started=e),this}},{key:"onFlowCanceled",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.flow,n=t.data;switch(e){case pa:cs.writeStorage(this.model.activeEntitlements,is({},"".concat("SWG_LOGIN_PROMT"),0));break;case ha:cs.writeStorage(this.model.activeEntitlements,is({},"".concat("SWG_DEFERED_PROMT"),0))}return this.flowState.data=n,this.flowState.cancled=e,this}},{key:"completeDeferredAccountCreation",value:function(t){var e=this,n=this.model.userStorage,r=void 0===n?{}:n;return!!t.enablesThis()&&(t.getEntitlementForSource("google")?0!==r.SWG_DEFERED_PROMT&&(Xa.hasAssociatedUserAccount(t).then((function(n){n.hasUser||(console.log("completeDeferredAccountCreation",n),e.service.$completeDeferredAccountCreation({entitlements:t,consent:!0}).then((function(t){var n=t.json();console.log("completeDeferredAccountCreation:response",{data:n,response:t}),Xa.deferredAccountCreation(n).then((function(n){console.log("deferredAccountCreation",n);var r=n.message,i=n.userId,o=n.success;i>0&&o&&t.complete().then((function(){r&&(console.log("deferredAccountCreation:message",r),cs.writeStorage(e.model.activeEntitlements,is({},"".concat("SWG_DEFERED_PROMT"),1)),e.reset(),window.location.reload())}))}),(function(e){var n=e.responseText;console.log(n),t.complete().then((function(){window.location.reload()}))}))}),(function(t){console.log(t),cs.writeStorage(e.model.activeEntitlements,is({},"".concat("SWG_DEFERED_PROMT"),0))})))})),!0):(console.log("No Google entitlement"),!1))}},{key:"onLoginRequest",value:function(t){return t&&this.service.$linkAccount(),this}},{key:"onLinkComplete",value:function(t){return t&&(this.closePaywall().reset(),Xa.linkComplete(),window.location.reload(!0)),this}},{key:"closePaywall",value:function(){return document.documentElement.classList.remove("open-paywall"),this}},{key:"openPaywall",value:function(){return document.documentElement.classList.add("open-paywall"),this.service.$showOffers({isClosable:!0}),this}},{key:"openPaySkuId",value:function(t){return!!t&&(this.service.$subscribe(t),this)}},{key:"reset",value:function(){return this.destroy(),this}},{key:"destroy",value:function(){return this.closePaywall(),this.service.$reset(),this}}]),t}();function ls(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var fs="data-tooltip-flow",ds=function(){function t(e){var n=e.parent;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.parent=n,this.tooltip=null,this.tooltipBody=null,this.tooltipText=null,this.tooltipType=null,this.tooltipWidth=null,this.flow=null,this.flowMobile=null,this.widthMobile=null,this.getParametrs(n),this.toggleStateClickableTooltip=this.toggleStateClickableTooltip.bind(this),this.handlerClick=this.handlerClick.bind(this),this.onBodyClick=this.onBodyClick.bind(this)}var e,n;return e=t,(n=[{key:"getParametrs",value:function(t){return this.tooltipBody=t.querySelector("[".concat("data-tooltip-body","]")),this.tooltipBody?(this.tooltipType="clickable",this.setStateClickable()):(this.tooltipType="hover",this.tooltipText=this.parent.getAttribute("data-tooltip-text"),this.parent.removeAttribute("data-tooltip-text"),this.tooltipWidth=this.parent.getAttribute("data-tooltip-width"),this.flow=this.parent.getAttribute(fs),this.flowMobile=this.parent.getAttribute("data-tooltip-flow-mobile"),this.widthMobile=this.parent.getAttribute("data-tooltip-width-mobile"),this.tooltipText&&this.setStateHover()),this}},{key:"toggleStateClickableTooltip",value:function(){"close"===this.parent.getAttribute("data-tooltip")||""===this.parent.getAttribute("data-tooltip")?(this.parent.setAttribute("data-tooltip","open"),document.addEventListener("click",this.onBodyClick)):(this.parent.setAttribute("data-tooltip","close"),document.removeEventListener("click",this.onBodyClick))}},{key:"onBodyClick",value:function(t){t.target.closest("[".concat("data-tooltip","]"))||this.toggleStateClickableTooltip()}},{key:"handlerClick",value:function(t){null!==t.currentTarget.getAttribute("data-tooltip")&&this.toggleStateClickableTooltip()}},{key:"setStateClickable",value:function(){this.handlerClick=this.handlerClick.bind(this),this.parent.addEventListener("click",this.handlerClick),this.parent.querySelector("a").addEventListener("click",(function(t){return t.preventDefault()}))}},{key:"setStateHover",value:function(){var t=window.DeviceDetect().isMobile();t&&this.flowMobile&&this.parent.setAttribute(fs,this.flowMobile),this.parent.removeAttribute("data-tooltip"),this.parent.setAttribute("tip",""),this.tooltip=document.createElement("div"),this.tooltip.setAttribute("tip-body",""),"#"===this.tooltipText[0]?(this.tooltipText=document.querySelector("".concat(this.tooltipText)).textContent,this.tooltip.insertAdjacentHTML("afterbegin","".concat(this.tooltipText))):this.tooltip.innerHTML=this.tooltipText,this.tooltip.style.width=this.tooltipWidth,t&&this.widthMobile&&(this.tooltip.style.width=this.widthMobile),this.parent.appendChild(this.tooltip)}},{key:"updateTooltip",value:function(t){this.parent=t,this.getParametrs(t)}}])&&ls(e.prototype,n),t}(),hs="data-open-modal";function ps(t){$(".layout").removeClass("layout--perspective"),$("body .wrap:first").removeClass("wrap--perspective"),t.addClass("modal--hidden")}function vs(t){t.removeClass("modal--hidden"),$(".layout").addClass("layout--perspective"),$("body .wrap:first").addClass("wrap--perspective")}function ms(t){var e=t.target.closest("[".concat(hs,"]"));if(e){var n=e.getAttribute("href");if(n&&-1!==n.indexOf("#")){var r=$("".concat(n,".modal"));r.modal().one($.modal.BEFORE_OPEN,vs.bind(null,r)),r.modal().one($.modal.BEFORE_CLOSE,ps.bind(null,r))}else{var i=e.getAttribute("href");(function(t){return new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.onload=function(){if(200===r.status)e(r.response);else{var t=new Error(r.statusText);t.code=r.status,n(t)}},r.onerror=function(){n(new Error("Ошибка при загрузке данных для создания модального окна"))},r.send()}))})(i).then((function(t){if("reload"!==t){var e=$('<div class="modal modal--hidden">'.concat(t,"</div>")).appendTo("body");e&&e[0]&&ys(e[0]),e.modal().one($.modal.BEFORE_OPEN,vs.bind(null,e)),e.modal().one($.modal.BEFORE_CLOSE,(function(){ps(e),e.remove()}))}else window.location.reload()})).catch((function(){window.location.replace(i)}))}t.preventDefault()}}function ys(t){var e=!0;if(!t)return!1;if(!("jQuery"in window)&&!("modal"in jQuery))return!1;var n=t.querySelectorAll("[".concat(hs,"]"));return Array.prototype.slice.call(n).forEach((function(t){t.addEventListener("click",ms)})),e}var gs={initial:0,current:0},bs=[],_s=Be,ws=new ce;function ks(t){return void 0!==bs.find((function(e){return e.id==t}))}function Es(t){return ks(t)?Promise.reject():_s.addMyProgram(t).then((function(t){if(t){var e=t.item_id;bs.push({id:e}),ws.publish("add",bs),gs.current=bs.length}return!0}))}function Ss(t){return _s.removeProgram(t).then((function(e){return e&&(bs.splice(bs.findIndex((function(e){return e.id===t})),1),ws.publish("del",bs)),gs.current=bs.length,e}))}function Os(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ks(t.getAttribute("data-id"))?(t.setAttribute("data-state","active"),t.innerHTML="".concat(e.active)):(t.setAttribute("data-state","unActive"),t.innerHTML="".concat(e.unActive))}function Ts(t){var e=t.getAttribute("data-id");ks(e)?Ss(e):Es(e)}var Ps={init:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];bs=Array.isArray(t)?bs.concat(t):bs.concat(Object.values(t)),gs.initial=gs.current=bs.length},cache:gs,existProgramList:ks,bindLabel:function(t,e){return t instanceof HTMLElement&&(Os(t,e),ws.subscribe("add",(function(){Os(t,e)})),ws.subscribe("del",(function(){Os(t,e)})),t.addEventListener("click",Ts.bind(null,t,e)),!0)},addProgram:Es,removeProgam:Ss,getAllProgram:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return gs.initial!==gs.current||t?_s.getMyProgram().then((function(t){return t.length&&(bs=t),gs.initial=bs.length,bs})):Promise.resolve(bs)},on:ws.subscribe.bind(ws),off:ws.unsubscribe.bind(ws)};function Cs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function As(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Cs(n,!0).forEach((function(e){Ns(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Cs(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ns(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ds(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Rs="https://frontend.vh.yandex.ru/player/41c50d5d90efce1297b9f0de98c1218d",Is="https://frontend.vh.yandex.ru/player/43096f1355fba59e95b1768877288f40",js=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange","msfullscreenchange"],xs={width:"100%",height:"100%",autoplay:!0,provider:"yandex",plugins:[{code:"button"}],container:"#liveplayer",is_demo:!1,ad:{no_ad:!1},mute:!1},Ms=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=As({},xs,{},e),this.container=document.querySelector(this.options.container),this.isDemo=this.options.is_demo,this.options.source=this.isDemo?Is:Rs,this.isFullScreen=!1,this.volume=null,this.manager=null,this.buttons=[],this.events={event:"live_streaming",duration:60,type:"",teleshow_id:""},window&&window.DeviceDetect&&"MacOS"===window.DeviceDetect().getOS()&&window.DeviceDetect().isMobile()&&(this.options.mobileMacOs=!0),this.init()}var e,n;return e=t,(n=[{key:"getPlayer",value:function(){return this.manager.getPlayer()}},{key:"init",value:function(){return this.buildPlayer(),this.setFullscreenEvents(),this}},{key:"buildPlayer",value:function(){var t=this;this.options.adConfig=this.setAdvertising(),this.manager||(this.manager=new io("yandex",this.options)),this.manager.createPlayer(),this.mount().then((function(){t.buttons.push(t.setFullScreenBtn())}))}},{key:"mount",value:function(){var t=this,e=new Promise((function(e,n){t.getPlayer().one(Fe.EVENT_MOUNTED,(function(){t.setupEvents(),e(t)})),t.getPlayer().one(Fe.EVENT_ERROR,n)}));return this.manager.mount(this.options.container),e}},{key:"reload",value:function(){this.buttons.forEach((function(t){return t.destroy()})),this.manager.unmount(),this.buildPlayer()}},{key:"setAdvertising",value:function(){return this.options.ad.no_ad?{}:{adBreaks:[{adType:"preroll",adFoxParameters:{ownerId:"167940",params:As({p1:"cmkkx",p2:"ekrg"},Ie.getVastYandex())}},{adType:"midroll",timeOffset:600,repeatAfter:600,adFoxParameters:{ownerId:"167940",params:As({p1:"cmkky",p2:"ekrg"},Ie.getVastYandex())}}]}}},{key:"setupEvents",value:function(){var t=this,e=this.getPlayer();this.setCounters(),e.one("playing",this.playHandler.bind(this)),e.on("play",this.playHandler.bind(this)),!this.isDemo&&"tnsCounterTvrain_ru"in window&&(e.on("pause",(function(){window.tnsCounterTvrain_ru.hit("tvrain_videoend")})),e.on("canplay",(function(){window.tnsCounterTvrain_ru.hit("tvrain_videoplayer")}))),e.on("adShown",(function(){t.volume&&t.volume>.5&&e.setVolume(.2)})),e.on("volumechange",(function(e,n){var r=n.data,i=(void 0===r?{}:r).volume;i&&i>.5&&(t.volume=i)})),e.on("adEnd",(function(){t.volume&&e.setVolume(t.volume)}))}},{key:"setFullscreenEvents",value:function(){var t=this;js.forEach((function(e){t.container.addEventListener(e,(function(){t.isFullScreen=!t.isFullScreen,t.container.classList.toggle("player--fullscreen")}))}))}},{key:"setCounters",value:function(){var t=this;return this.updaterEventData=window.countdowner({timeout:3e4,startInit:0,loop:!0,timerEndCallback:function(){TVRAIN.Serivices.OnAirService.getCurrent().then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e){var n=e.type,r=void 0===n?"":n,i=e.parent_id,o=void 0===i?"":i;t.events.type=r,t.events.teleshow_id=o}}))}}),this.counter=window.countdowner({timeout:6e4,startInit:0,loop:!0,timerEndCallback:function(){"playing"===t.getPlayer().getState()&&window.dataLayer.push(t.events)}}),this}},{key:"playHandler",value:function(){this.counter.start(),this.updaterEventData.start(),!this.isDemo&&"tnsCounterTvrain_ru"in window&&window.tnsCounterTvrain_ru.hit("tvrain_videostart"),TVRAIN.liveAnalytics.track()}},{key:"jwPlayerSubscribeButton",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.options.mobileMacOs){var n=this.setButton({className:"player_button__subscribe player_button__subscribe--live",text:e.text||"",tag:"a",href:t});this.buttons.push(n)}}},{key:"setFullScreenBtn",value:function(){var t=this,e=this.setButton({className:"player_button__fullscreen"});return e.node.addEventListener("click",(function(){var e;t.isFullScreen?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():(e=t.container).requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen()})),e}},{key:"setButton",value:function(t){var e=t.className,n=void 0===e?"":e,r=t.text,i=void 0===r?"":r,o=t.container,a=void 0===o?this.container:o,s=t.tag,c=void 0===s?"a":s,u=t.href,l=this.getPlayer().getPlugin("button")();l.create(n,i,a,c),"a"===c&&u&&(l.node.target="_blank",l.node.href=u);var f=this.getPlayer();return f.isAdPlaying||l.show(),f.on("adShown",(function(){l.hide()})),f.on("adEnd",(function(){l.show()})),l}}])&&Ds(e.prototype,n),t}(),Ls={NextVideoService:Pe,HistoryApiService:Ne,ArticleServiceView:Et,PaymentService:oe,VastService:Ie,OnAirService:Le,PlayerProvideService:Ao,TeleshowService:Be,YandexMetrikaService:Vo},Vs={UpdatePage:aa},Ys={SubscribeWithGoogle:us,initModal:function(){return ys(document)},Tooltip:ds,MyProgram:Ps,LivePlayer:Ms};function Bs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $s=null,Us=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,n=[{key:"setToken",value:function(t){return!!t&&($s=t,!0)}},{key:"buildSchedule",value:function(t){var e=t.list,n=void 0===e?[]:e,r=t.timestamp,i=void 0===r?Math.round((new Date).getTime()/1e3):r,o={prevBlock:void 0,currentBlock:void 0,nextBlock:void 0};if(o.timestamp=i,n.length){var a=JSON.parse(JSON.stringify(n));o.list=n;for(var s=0;s<a.length;s+=1){var c=n[s],u=c.timeEnd;c.content.length&&(i<u&&void 0===o.currentBlock&&(o.currentBlock=a[s],o.nextBlock=a[s+1],o.index=s+1),i>u&&void 0===o.prevBlock&&(o.prevBlock=a[o.index-1||s]))}if(o.currentBlock){var l=0,f=null;do{o.currentBlock.currentBlockEl=o.currentBlock.content[l],f=o.currentBlock.currentBlockEl.timeEnd,l+=1}while(i>f);o.currentBlock.content.splice(0,l),o.currentBlock.currentBlockEl.start_position=Math.abs(o.timestamp-o.currentBlock.currentBlockEl.timeStart)}}return o}},{key:"getPlaylistSchedule",value:function(t){return I.a.playlist({action:"getplaylistschedule",token:$s,input:t}).then((function(t){var e=t.success,n=t.data,r=t.timestamp;return e&&n&&{list:n,timestamp:r}}))}},{key:"getPlayLists",value:function(t){return I.a.playlist({action:"getplaylist",input:t,token:$s})}},{key:"hasEqualBlock",value:function(t,e){return I.a.playlist({action:"getplaylistsectionhash",input:t,token:$s}).then((function(t){var n=t.success,r=t.data,i=t.timestamp;return n&&r===e?{isEqual:!0,timestamp:i}:{isEqual:!1,timestamp:i}}))}}],null&&Bs(e.prototype,null),n&&Bs(e,n),t}();function Hs(t){return(Hs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ws(t){return(Ws=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gs(t,e){return(Gs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zs={content:[],hash:"",currentBlockEl:{},id:0,timeEnd:0,timeStart:0},Js={prevBlock:zs,currentBlock:zs,nextBlock:zs,list:[],timestamp:+new Date},Ks={currentState:null,prevState:[]},Zs="update",Qs="catch",Xs=function(t){function e(){var t,n,r,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"live",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,t=!(r=Ws(e).call(this))||"object"!==Hs(r)&&"function"!=typeof r?qs(n):r,Us.setToken(a),t.fields=_.merge({},Js,Us.buildSchedule(o)),t.code=i,t.retryQuote=5,t.interval=1e4,t.reaminder=0,t._update.bind(qs(t)),t}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gs(t,e)}(e,t),n=e,(r=[{key:"_saveState",value:function(){Ks.currentState&&Ks.prevState.push(Ks.currentState);try{return Ks.currentState=JSON.stringify(this.fields),!0}catch(t){return!1}}},{key:"init",value:function(){var t=this._saveState();return t?(this.lifeCycleRun(),this.publish("init"),t):t}},{key:"_build",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e?this.interval:200,r=_.throttle((function(){e?Us.getPlaylistSchedule(t.code).then((function(e){t.fields={},t.fields=_.merge({},Js,Us.buildSchedule(e)),t.init(),t.publish(Zs,t.getCurrentEl())})):(t.fields=_.merge({},Js,Us.buildSchedule({list:t.fields.list,timestamp:t.fields.timestamp})),t.init(),t.publish(Zs,t.getCurrentEl()))}),n);r()}},{key:"_update",value:function(){var t=this,e=this.fields,n=e.currentBlock,r=n.id,i=n.hash;if(0===this.retryQuote)return this.liefeCycleTimer&&(this.liefeCycleTimer.stop(),this.liefeCycleTimer=null),void this.publish(Qs,{error:!0,message:"Что-то пошло не так кол-во попыток исчерпано"});Us.hasEqualBlock(r,i).then((function(n){var r=n.isEqual,i=n.timestamp;if(e.timestamp=i,!r)return t.retryQuote-=1,void t._build(!0);if(r){if(t.isEmptyCurrentBlock()){if(t.isEmptyCurrentBlock()&&!e.nextBlock.length)return t.retryQuote-=1,void t._build();e.prevBlock=t.getState().prevState().prevBlock,e.currentBlock=e.nextBlock,e.nextBlock=e.currentBlock}if(!t.isEmptyCurrentBlock()){var o=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(e.currentBlock.content,1)[0],a=void 0===o?{}:o;e.currentBlock.currentBlockEl=a,t.publish(Zs,a),e.currentBlock.content.splice(0,1)}window.setTimeout((function(){t.lifeCycleRun()}),t.reaminder)}}))}},{key:"lifeCycleRun",value:function(){var t=this.getCurrentEl(),e=t.duration,n=void 0===e?0:e,r=t.start_position,i=void 0===r?0:r;this.liefeCycleTimer&&(this.liefeCycleTimer.stop(),this.liefeCycleTimer=null),this.reaminder=this.getInterval(n+i),this.liefeCycleTimer=window.countdowner({timeout:Math.abs(1e3*(n-i)-this.getInterval(n)),startInit:1,timerEndCallback:this._update.bind(this)})}},{key:"correctionTime",value:function(t){this.fields.timestamp+=t}},{key:"isEmptyCurrentBlock",value:function(){return!this.fields.currentBlock.content.length}},{key:"isEmptyList",value:function(){return!this.fields.list.length}},{key:"_computedCurrentEl",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getTimeStmap(),e=this.getCurrentBlock(),n=e.content,r={};if(this.isEmptyCurrentBlock())return this.getCurrentEl();var i=0,o=null;do{o=(r=n[i]).timeEnd,i+=1}while(t>o);return r}},{key:"hasCurrentEl",value:function(t){return _.isEqual(this.getCurrentEl(),t)}},{key:"getList",value:function(){return this.fields.list}},{key:"getCurrentBlock",value:function(){return this.fields.currentBlock||null}},{key:"getCurrentEl",value:function(){return this.fields.currentBlock.currentBlockEl||null}},{key:"getNextBlock",value:function(){return this.fields.nextBlock}},{key:"getPrevBlock",value:function(){return this.fields.prevBlock}},{key:"getInterval",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return 1e3*Math.round(t*e)}},{key:"getTimeStmap",value:function(){return this.fields.timestamp}},{key:"getState",value:function(){return{prevState:function(){return Ks.prevState.map((function(t){return t&&JSON.parse(t)}))},currentState:function(){return JSON.parse(Ks.currentState)}}}}])&&Fs(n.prototype,r),e}(ce);function tc(t){return(tc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ec(t,e){return!e||"object"!==tc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function nc(t){return(nc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function rc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ic(t,e,n){return e&&rc(t.prototype,e),n&&rc(t,n),t}function oc(t,e){return(oc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ac="add",sc="del",cc={counter:0,laters:[],data:{items:[]}},uc={},lc=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=ec(this,nc(e).call(this)),Object.assign(uc,cc,n),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&oc(t,e)}(e,t),ic(e,null,[{key:"intitalState",get:function(){return cc}}]),ic(e,[{key:"addWatchLater",value:function(t){var e=this;return I.a.userLinksData({action:"add"},{id:t}).then((function(n){var r=n.success,i=n.item;return console.log({success:r,item:i}),r&&i&&(uc.counter+=1,e.state.laters.push(i),e.publish(ac,n),e.publish("".concat(ac,":").concat(t),n)),n}))}},{key:"updateWatchLater",value:function(t){var e=t.items;return uc.data.items=e,uc.data.prevCounter=uc.counter,this.publish("update",t),uc}},{key:"deleteWatchLater",value:function(t){var e=this;return I.a.userLinksData({action:"remove"},{id:t}).then((function(n){var r=n.success,i=n.item;return r&&i&&(uc.counter-=1,e.state.laters=e.state.laters.filter((function(t){return Number(t.item_id)!==Number(i.item_id)})),e.publish(sc,n),e.publish("".concat(sc,":").concat(t),n)),n}))}},{key:"fetchAll",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.offset,r=void 0===n?0:n,i=e.limit,o=void 0===i?9:i;return I.a.userLinksData({action:"getItems"},{limit:o,offset:r}).then((function(e){return t.updateWatchLater(e),e}))}},{key:"getCounter",value:function(){return this.state.counter||0}},{key:"getLatersIds",value:function(){return this.state.laters}},{key:"fetchArticleWatchlaters",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.length?t.join(","):this.getLatersIds().map((function(t){return t.item_id})).join(",");return I.a.articleData({action:"list",input:e}).then((function(t){var e=t.success,n=t.articles;return e?n:[]}))}},{key:"getItems",value:function(){var t=this.state.data.items;return void 0===t?[]:t}},{key:"isAcitveLaterId",value:function(t){return this.getLatersIds().some((function(e){var n=e.item_id;return Number(t)===Number(n)}))}},{key:"instance",get:function(){return this}},{key:"state",get:function(){return uc}}]),e}(ce),fc=React.createElement("svg",{className:"bookmark-label__icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},React.createElement("path",{fill:"currentColor",d:"M18 24l-6-5.269-6 5.269v-24h12v24z"})),dc=React.createElement("svg",{className:"bookmark-label__icon",xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},React.createElement("path",{fill:"currentColor",d:"M16 2v17.582l-4-3.512-4 3.512v-17.582h8zm2-2h-12v24l6-5.269 6 5.269v-24z"}));function hc(t){return(hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function vc(t){return(vc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mc(t,e){return(mc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yc=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==hc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,vc(e).call(this,t));var r=t.watchlaterId,i=t.api;return n.state={api:i,id:r,isActive:i.isAcitveLaterId(r),isFetch:!1,currentTarget:null},n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mc(t,e)}(e,React.Component),n=e,(r=[{key:"componentWillReceiveProps",value:function(t){var e=t.watchlaterId,n=this.state,r=n.api;e!==n.id&&(this.unsubscribeAll(),this.setState({isActive:r.isAcitveLaterId(e),id:e},this.subscribe))}},{key:"componentDidMount",value:function(){this.subscribe()}},{key:"onLoginClick",value:function(t){t.preventDefault(),ms(t)}},{key:"unsubscribeAll",value:function(){var t=this.state.id;this.state.api.unsubscribe("".concat(sc,":").concat(t),this.remove),this.state.api.unsubscribe("".concat(ac,":").concat(t),this.add)}},{key:"subscribe",value:function(){var t=this.state.id;this.state.api.subscribe("".concat(sc,":").concat(t),this.remove,this),this.state.api.subscribe("".concat(ac,":").concat(t),this.add,this)}},{key:"onClick",value:function(t,e,n){var r=this.state,i=r.id,o=r.isFetch,a=n.currentTarget;"add"!==t&&(a=null),o||this.setState({isFetch:!0,currentTarget:a},(function(){return e(t,i)}))}},{key:"animate",value:function(){if(!($(window).width()<768)){var t=$(this.state.currentTarget);if(t.length){this.setState({currentTarget:null});var e=$('[data-watchlater-control="box"] .bookmark-control');t.clone().addClass("fly").offset({top:t.offset().top,left:t.offset().left}).css({position:"absolute",opacity:"0.9",zIndex:99999}).appendTo($("body")).animate({top:e.offset().top+5,left:e.offset().left,transform:"scale(1.1)"},400,"linear").animate({opacity:0},$(this).detach)}}}},{key:"add",value:function(){this.setState((function(){return{isActive:!0,isFetch:!1}}),this.animate)}},{key:"remove",value:function(){this.setState((function(){return{isActive:!1,isFetch:!1}}))}},{key:"render",value:function(){var t=this.props,e=t.action,n=t.title,r=void 0===n?null:n,i=(t.tooltip,t.icon),o=void 0===i?"strong":i,a=this.state,s=a.isActive,c=(a.id,this.onClick.bind(this,"add",e)),u=this.onClick.bind(this,"remove",e);return window.User.isGuest()?React.createElement("a",{"data-open-modal":!0,href:"/login/?from=watchlater",className:"bookmark-label",onClick:this.onLoginClick},"light"==o&&dc||"strong"==o&&fc,r?React.createElement("span",null,r):null):React.createElement("div",{className:"bookmark-label ".concat(s?"active":""),onClick:s?u:c},"light"==o&&dc||"strong"==o&&fc,r?React.createElement("span",null,r):null)}}])&&pc(n.prototype,r),e}(),gc=function(t){var e={w:Math.trunc(t/86400/7),d:Math.trunc(t/86400%7),h:Math.trunc(t/3600%24),m:Math.trunc(t/60%60),s:Math.trunc(t%60)};return["m","s"].map((function(t){if(void 0!==e[t])return e[t]<=9?"0".concat(e[t]):e[t]})).join(":")},bc=React.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"289px",height:"300px",viewBox:"0 0 289 300","enable-background":"new 0 0 289 300"},React.createElement("path",{fill:"#8E8E8E",d:"M289,190c0,5.523-4.478,10-10,10h-38c-5.522,0-10-4.477-10-10v-80c0-5.523,4.478-10,10-10h38 c5.522,0,10,4.477,10,10V190z"}),React.createElement("path",{fill:"#FFFFFF",d:"M21,300c-13.559,0-21-8.023-21-21V10C0,4.477,4.478,0,10,0h223c5.522,0,10,4.477,10,10v258 c0,5.522,28.522,32,23,32H21z"}),React.createElement("path",{fill:"#8E8E8E",d:"M289,277c0,12.702-10.297,23-22.999,23h-0.002C253.297,300,243,289.702,243,277V154 c0-12.702,10.297-12,22.999-12h0.002c12.702,0,22.999-0.702,22.999,12V277z"}),React.createElement("path",{fill:"#C1C1C1",d:"M212,30.5c0,3.038-2.463,5.5-5.5,5.5h-169c-3.037,0-5.5-2.462-5.5-5.5l0,0c0-3.038,2.463-5.5,5.5-5.5h169 C209.537,25,212,27.462,212,30.5L212,30.5z"}),React.createElement("path",{fill:"#C1C1C1",d:"M212,63.5c0,3.038-2.463,5.5-5.5,5.5h-59c-3.037,0-5.5-2.462-5.5-5.5l0,0c0-3.038,2.463-5.5,5.5-5.5h59 C209.537,58,212,60.462,212,63.5L212,63.5z"}),React.createElement("path",{fill:"#C1C1C1",d:"M212,96.5c0,3.038-2.463,5.5-5.5,5.5h-59c-3.037,0-5.5-2.462-5.5-5.5l0,0c0-3.038,2.463-5.5,5.5-5.5h59 C209.537,91,212,93.462,212,96.5L212,96.5z"}),React.createElement("path",{fill:"#C1C1C1",d:"M212,129.5c0,3.037-2.463,5.5-5.5,5.5h-59c-3.037,0-5.5-2.463-5.5-5.5l0,0c0-3.038,2.463-5.5,5.5-5.5h59 C209.537,124,212,126.462,212,129.5L212,129.5z"}),React.createElement("path",{fill:"#C1C1C1",d:"M212,162.5c0,3.037-2.463,5.5-5.5,5.5h-169c-3.037,0-5.5-2.463-5.5-5.5l0,0c0-3.037,2.463-5.5,5.5-5.5h169 C209.537,157,212,159.463,212,162.5L212,162.5z"}),React.createElement("path",{fill:"#C1C1C1",d:"M212,195.5c0,3.037-2.463,5.5-5.5,5.5h-169c-3.037,0-5.5-2.463-5.5-5.5l0,0c0-3.037,2.463-5.5,5.5-5.5h169 C209.537,190,212,192.463,212,195.5L212,195.5z"}),React.createElement("path",{fill:"#C1C1C1",d:"M212,228.5c0,3.037-2.463,5.5-5.5,5.5h-169c-3.037,0-5.5-2.463-5.5-5.5l0,0c0-3.037,2.463-5.5,5.5-5.5h169 C209.537,223,212,225.463,212,228.5L212,228.5z"}),React.createElement("path",{fill:"#C1C1C1",d:"M212,261.5c0,3.037-2.463,5.5-5.5,5.5h-169c-3.037,0-5.5-2.463-5.5-5.5l0,0c0-3.037,2.463-5.5,5.5-5.5h169 C209.537,256,212,258.463,212,261.5L212,261.5z"}),React.createElement("path",{fill:"#C1C1C1",d:"M122,125c0,5.523-4.477,10-10,10H42c-5.523,0-10-4.477-10-10V68c0-5.523,4.477-10,10-10h70 c5.523,0,10,4.477,10,10V125z"}),React.createElement("path",{fill:"#6D6D6D",d:"M32,88.56L96.803,135H42c0,0-7.741,0.105-10-8.433V88.56z"}),React.createElement("circle",{fill:"#A0A0A0",cx:"59.995",cy:"78.214",r:"15.005"}),React.createElement("polygon",{fill:"#F2F2F2",points:"87.619,115 107,115 107,76 97.07,76 "})),_c=function(t){var e=t.durationSec,n=t.image,r=t.name,i=t.url,o=t.teleshowUrl,a=t.teleshowName,s=t.alt,c=t.id,u=t.handlerRemove,l=void 0===u?function(){}:u,f=t.video;if(void 0===c)return React.createElement("div",null);var d="".concat(i,"?watchlater=").concat(c);return React.createElement("div",{className:"bookmark-tile"},React.createElement("a",{href:d,className:"bookmark-tile__image"},n?React.createElement("img",{src:n,alt:s}):React.createElement("span",{className:"bookmark-tile__imageplaceholder"},bc),function(t){var e=t[0]?t[0]:[],n=e.duration,r=void 0===n?0:n,i=e.position,o=void 0===i?0:i,a=Math.trunc(100*o/r),s=gc(r-o);return r?React.createElement("div",{className:"bookmark-timeline"},React.createElement("span",{className:"bookmark-timeline__left"},React.createElement("div",null,"Осталось"),React.createElement("div",null,s)),React.createElement("span",{className:"bookmark-timeline__line"},React.createElement("div",{className:"bookmark-timeline__fill"}),React.createElement("div",{className:"bookmark-timeline__filltime",style:{width:"".concat(a,"%")}}))):null}(f),e?React.createElement("span",{className:"bookmark-tile__duration"},e):null),React.createElement("div",{className:"bookmark-tile__content"},React.createElement("div",{className:"bookmark-tile__teleshow"},React.createElement("a",{href:o},a)),React.createElement("div",{className:"bookmark-tile__title"},React.createElement("a",{href:d},r)),React.createElement("span",{className:"bookmark-tile__remove",onClick:l},React.createElement(wc,null))))},wc=function(){return React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},React.createElement("path",{fill:"#ff494f",d:"M3 6v18h18v-18h-18zm5 14c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm5 0c0 .552-.448 1-1 1s-1-.448-1-1v-10c0-.552.448-1 1-1s1 .448 1 1v10zm4-18v2h-20v-2h5.711c.9 0 1.631-1.099 1.631-2h5.315c0 .901.73 2 1.631 2h5.712z"}))},kc=function(t){return t instanceof Date?t:new Date(t.substr(0,4),t.substr(5,2)-1,t.substr(8,2),t.substr(11,2),t.substr(14,2),t.substr(17,2))},Ec=function(){var t=[];function e(t){var e=(new Date).setHours(0,0,0,0)/1e3,n=24*t*3600;return 7===t?e=+new Date(function(){var t=[],e=new Date((new Date).setHours(0,0,0,0)),n=new Date(e.getTime()-864e5*(e.getDay()-1)),r=new Date(n.getTime()+5184e5);t.push(n),t.push(r);for(var i=1;i<6;i+=1)t.push(new Date(n.getTime()+864e5*i).getTime);return t}()[0])/1e3:Math.trunc(e-n)}return{default:function(e){t.push({time:0,title:e})},add:function(n,r){t.push({time:e(n),title:r})},getByTimeFromCollection:function(e){for(var n=0;n<t.length;n+=1){var r=t[n];if(r.time<e)return r}return{}},getCollection:function(){return t.sort((function(t,e){return t.time<e.time?1:t.time>e.time?-1:0}))}}}();Ec.default("Вы добавляли ранее"),Ec.add(0,"Вы добавили сегодня"),Ec.add(1,"Вы добавили вчера"),Ec.add(7,"Вы добавили неделю назад");var Sc=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add_date",n=JSON.parse(JSON.stringify(t)),r=function(t){var e=kc(t);return+new Date(e)/1e3},i=Ec.getCollection(),o={};return n.forEach((function(t){for(var n=r(t[e]),a=0;a<i.length;a++){var s=Ec.getByTimeFromCollection(n),c=s.title;if(void 0!==s.time){o[c]=o[c]||[],t.humanDate=c,o[c].push(t);break}}})),o},Oc=React.createElement("div",{className:"bookmark-box__tutorial"},React.createElement("div",{className:"bookmark-tutorial__button",onClick:function(){return User.info.promo.render("tutorial_watchlater")}},React.createElement("div",{className:"button button--brand button--inline"},"Как пользоваться?"))),Tc=React.createElement("div",{className:"bookmark-box__empty"},React.createElement("div",{className:"bookmark-box__text"},React.createElement("div",{className:"bookmark-box__title"},"Вы ещё ничего не добавляли"),React.createElement("div",{className:"bookmark-box__desc"},"Добавьте сюда выпуски, которые хотите посмотреть, но все никак. Они появятся в этом разделе на всех устройствах."),Oc));function Pc(t){return(Pc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ac(t){return(Ac=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nc(t,e){return(Nc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dc=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==Pc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ac(e).call(this,t));var r=t.items,i=void 0===r?[]:r,o=t.attachUpdate,a=t.model;return n.model=a,n.state={isOpen:!1,offset:0,limit:10,items:i},n.attachUpdate=o,n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nc(t,e)}(e,React.Component),n=e,(r=[{key:"componentDidMount",value:function(){var t=this;this.setState({isOpen:!0}),this.attachUpdate((function(e){var n=e.items;t.setState({items:n})}))}},{key:"remove",value:function(t,e,n){var r=this;n("remove",t).then((function(){r.setState((function(t,n){var r=t.items;return r.splice(e,1),{items:r}}))}))}},{key:"render",value:function(){var t=this,e=this.props,n=e.action,r=e.api,i=r.getItems(),o=Sc(r.getItems()),a=!i.length;return React.createElement("div",{className:"bookmark-box ".concat(a?"bookmark-box--empty":null)},React.createElement("div",{className:"bookmark-box__wrapp"},a?Tc:React.createElement("ul",{className:"bookmark-box__list"},Object.keys(o).map((function(e,r){return React.createElement("div",{className:"bookmark-box__element",key:r},React.createElement("div",{className:"bookmark-box__separatedate"},e),o[e].map((function(e,r){var i=e.small_img,o=e.name,a=e.url,s=e.teleshow_name,c=e.teleshow_url,u=e.id,l=e.video,f=e.hasVideo;return React.createElement("li",{className:"bookmark-box__item",key:r},React.createElement(_c,{id:u,hasVideo:f,url:a,image:i,name:o,video:l,teleshowName:s,teleshowUrl:c,handlerRemove:t.remove.bind(t,u,r,n)}))})))})))),i.length?React.createElement("a",{className:"bookmark-box__bottombutton",href:"/profile/watchlater/"},"Всё"):null)}}])&&Cc(n.prototype,r),e}();function Rc(t){return(Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ic(){return(Ic=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function jc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function xc(t,e){return!e||"object"!==Rc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mc(t){return(Mc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lc(t,e){return(Lc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vc=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),xc(this,Mc(e).apply(this,arguments))}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Lc(t,e)}(e,React.Component),n=e,(r=[{key:"componentWillMount",value:function(){var t=this,e=this.props,n=e.api,r=e.action;this.state={api:n,counter:n.getCounter(),showBox:!1},n.subscribe(ac,(function(e){t.setState({counter:n.getCounter()},(function(){t.state.showBox&&r("fetch")}))})),n.subscribe(sc,(function(e){t.setState({counter:n.getCounter()},(function(){t.state.showBox&&r("fetch")}))}))}},{key:"attachUpdate",value:function(t){this.state.api.subscribe("update",(function(e){t(e)}))}},{key:"toggle",value:function(){this.setState((function(t){return{showBox:!t.showBox}}))}},{key:"onClick",value:function(t,e){var n=this;this.state.showBox?this.toggle():e(t).then((function(t){n.toggle()}))}},{key:"componentDidMount",value:function(){var t=this;$(document).on("click",(function(e){e.target.closest(".bookmark-box")||e.target.closest(".bookmark-control")||!t.state.showBox||t.toggle()}))}},{key:"checkValueOfCounter",value:function(){var t=this.state.counter;return t>99?99:t<0?0:t}},{key:"render",value:function(){var t=this.props,e=t.action,n=t.watchlaterControl,r=(t.api,this.state.showBox),i=this.onClick.bind(this,"show",e);return React.createElement("div",{className:"bookmark-control"},React.createElement("span",{className:"bookmark-control__label",onClick:i},User.isGuest()?null:React.createElement("span",{className:"bookmark-control__circlecount"},this.checkValueOfCounter()),fc),"box"===n?React.createElement("div",{style:{display:r?"block":"none"}},React.createElement(Dc,Ic({action:e,toggle:this.toggle.bind(this),attachUpdate:this.attachUpdate.bind(this)},this.props))):null)}}])&&jc(n.prototype,r),e}(),Yc=n(105);function Bc(t){return(Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $c(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Uc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hc(t){return(Hc=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Fc(t,e){return(Fc=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Wc="".concat(Yc.a,"/static/svg/loadertvrain.svg");function qc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Gc(){return(Gc=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function zc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Jc=null,Kc={labels:yc,control:Vc,page:function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==Bc(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Hc(e).call(this,t));var r=t.api,i=t.action;return n.api=r,n.action=i,n.state={items:[],loading:!0},r.subscribe(sc,(function(t){var e=t.item;n.deleteItem(e)})),r.subscribe(ac,(function(t){var e=t.item;n.addItem(e)})),n.scrollController=null,n.scene=null,n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Fc(t,e)}(e,React.Component),n=e,(r=[{key:"initScrollMagic",value:function(){var t=this;if(window&&window.ScrollMagic)this.scrollController=new window.ScrollMagic.Controller,this.scene=new window.ScrollMagic.Scene({triggerElement:"#scroll-trigger",triggerHook:"onEnter",offset:-200}).addTo(this.scrollController).on("enter",(function(){var e=t.state.items;t.setState({loading:!0}),t.fetchItems(e.length).then((function(e){e.length?t.updateState(e):t.destroyScrollMagic()}))}));else{var e=this.state.items;this.fetchItems(e.length,0).then((function(e){t.updateState(e)}))}}},{key:"destroyScrollMagic",value:function(){this.setState({loading:!1}),this.scrollController.destroy(),this.scene.destroy(),this.scrollController=null,this.scene=null}},{key:"fetchItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.setState({loading:!0});var n=null===e?30:e;return this.action("fetch",{limit:n,offset:t}).then((function(t){var e=t.items;return t.success?e:[]}))}},{key:"addItem",value:function(t){var e=this,n=this.state.items,r=t.item_id;-1===n.findIndex((function(t){var e=t.id;return Number(e)===Number(r)}))&&this.action("fetch",{limit:1,offset:0}).then((function(t){var i=t.success,o=t.items;if(i){var a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}(o,1)[0],s=a.id;Number(r)===Number(s)&&e.setState({items:[a].concat($c(n))})}}))}},{key:"deleteItem",value:function(t){var e=this.state.items,n=t.item_id,r=e.filter((function(t){return t.id!==n}));this.setState({items:r})}},{key:"updateState",value:function(t){this.setState((function(e){var n=e.items;return t.forEach((function(t){n.push(t)})),{items:n}})),this.setState({loading:!1})}},{key:"componentDidMount",value:function(){var t=this;this.fetchItems().then((function(e){t.updateState(e),t.initScrollMagic()}))}},{key:"handlerRemove",value:function(t,e){var n=this;this.action("remove",t).then((function(){n.setState((function(t,n){var r=t.items;return r.splice(e,1),{items:r}}))}))}},{key:"render",value:function(){var t=this,e=this.state.items,n=Sc(e);return React.createElement("div",{className:"bookmark-container"},e.length?React.createElement("div",{className:"bookmark-head"},React.createElement("i",{className:"bookmark-haed__icon"},React.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24"},React.createElement("path",{fill:"#bbbbbb",d:"M18 24l-6-5.269-6 5.269v-24h12v24z"}))),React.createElement("h1",{className:"bookmark-head__title"},"Смотреть позже "),React.createElement("p",null,"Все материалы, добавленные в список того, что вы хотите посмотреть позже, будут ждать вас в идентичном разделе на всех устройствах"),Oc):React.createElement("div",{className:"bookmark-head"}),React.createElement("div",{className:"bookmark-page"},e.length?Object.keys(n).map((function(e,r){return React.createElement("div",{className:"bookmark-page__item",key:r},React.createElement("div",{className:"bookmark-page__separate"},e),n[e].map((function(e,n){var r=e.preview_img,i=e.name,o=e.url,a=e.teleshow_name,s=e.teleshow_url,c=e.id,u=e.video,l=void 0===u?[]:u,f=e.hasVideo,d=(l[0]?l[0]:[]).duration,h=void 0===d?0:d;return React.createElement("div",{className:"bookmark-page__tile",key:n},React.createElement(_c,{durationSec:h?gc(h):null,id:c,hasVideo:f,url:o,image:r,name:i,video:l,teleshowName:a,teleshowUrl:s,handlerRemove:t.handlerRemove.bind(t,c,n)}))})))})):Tc),React.createElement("div",{id:"scroll-trigger"},React.createElement("img",{className:this.state.loading?"bookmark__loader":"bookmark__loader--hidden",src:Wc})))}}])&&Uc(n.prototype,r),e}()},Zc=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n;return e=t,(n=[{key:"message",value:function(t){console.log(t)}}])&&qc(e.prototype,n),t}()),Qc=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Jc)return Jc;Jc=this,this.model=e,this.action=this.action.bind(this),this.model.subscribe(ac,(function(t){var e=t.item;if(e){var n=e.item_id;Zc.message("Успешно добавили ".concat(n))}})),this.model.subscribe(sc,(function(t){var e=t.item;if(e){var n=e.item_id;Zc.message("Успешно удалили ".concat(n))}}))}var e,n;return e=t,(n=[{key:"action",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(console.log(e),t){case"show":return this.model.fetchAll(e);case"fetch":var n=e.limit,r=void 0===n?10:n,i=e.offset,o=void 0===i?0:i;return this.model.fetchAll({limit:r,offset:o});case"add":return this.model.addWatchLater(e);case"remove":return this.model.deleteWatchLater(e)}}},{key:"render",value:function(t){var e=this,n=t.renders;(void 0===n?[]:n).forEach((function(t){var n=t.type,r=t.selector,i=Kc[n];Array.prototype.forEach.call(document.querySelectorAll(r),(function(t){if(t&&i){var n=$(t).data();ReactDOM.render(React.createElement(i,Gc({action:e.action,api:e.model.instance},n)),t)}}))}))}}])&&zc(e.prototype,n),t}();function Xc(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tu={renders:[{selector:"[data-watchlater]",type:"labels"},{selector:"[data-watchlater-control]",type:"control"},{selector:"[data-watchlater-page]",type:"page"}]},eu=null,nu=null,ru=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!eu&&!nu){var n=e.isInitialData;if(void 0===n||!n){var r=window.TVRAIN.app.user.links.favorites,i=r.counter,o=r.laters;Object.assign(e,{laters:o,counter:i})}eu=new lc(e),nu=new Qc(eu)}this.mount()}var e,n;return e=t,(n=[{key:"mount",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tu;nu.render(t)}},{key:"instance",get:function(){return eu.instance}}])&&Xc(e.prototype,n),t}();function iu(t){return(iu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ou(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function au(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function su(t,e){return!e||"object"!==iu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cu(t){return(cu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uu(t,e){return(uu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function lu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function fu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?lu(n,!0).forEach((function(e){du(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lu(n).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function du(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var hu="https://frontend.vh.yandex.ru/player/3401832091040820982",pu={width:"100%",height:"100%",ad_template_id:6851,autoplay:!0},vu="liveplayer-1",mu=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.eagle_id,r=e.start_position,i=e.source,o=e.provider,a=e.video_id;if(!n&&!i)throw new Error("source is empty");return t.getPlayer().pause(),t.rebuildPlayer({source:i,code:o,videoId:a,position:r,autoplay:!0,ad:{template:pu.ad_template_id,no_ad:!0}},"rebuild")},yu=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=su(this,cu(e).call(this,n));var r=n.code,i=n.list,o=n.fixedList,a=n.token,s=n.timestamp,c=n.config,u=n.placeholderOn;return t.state={code:r,token:a,list:i,fixedList:o,timestamp:s,placeholderOn:u,config:c,currentId:null},t.model=new Xs(t.state.code,{list:t.state.list,timestamp:t.state.timestamp},t.state.token),t.model.init(),t.model.subscribe(Zs,(function(e){t.playerHandlerUpdate(e),t.setCurrentId(e.article_id)})),t.model.subscribe(Qs,(function(e){t.setState({isEmpty:!0})})),t}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uu(t,e)}(e,React.Component),n=e,(r=[{key:"componentDidMount",value:function(){this.mountPlayer(),this.setCurrentId(this.model.getCurrentEl().article_id)}},{key:"setCurrentId",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.setState({currentId:t},(function(){new ru}))}},{key:"mountPlayer",value:function(){var t=this,e=fu({},pu,{YII_CSRF_TOKEN:this.state.token,handler:{gtm:{event:"potok_streaming",potok_url:this.model.getCurrentEl().url}}});this.state.placeholderOn&&(e.ad_template_id=6851,e.eagle_id=904222,e.source=hu,e.provider="yandex"),function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.source,r=void 0===n?hu:n,i=e.provider,o=void 0===i?"yandex":i,a=e.YII_CSRF_TOKEN,s=fu({},pu,{source:r,provider:o,token:a,plugins:[],ad:{template:pu.ad_template_id,no_ad:!0}});return(t=new Ao(s)).on("mount",(function(){t.getPlayer().on("ended",(function(){t.emit("stop")}))})),t.mount(".".concat(vu))}(e).then((function(e){t.state.fixedList.length?t.fixedPlayerInit(e):t.schedulePlayerInit(e)})).catch((function(e){t.setState({isEmpty:!0})}))}},{key:"fixedPlayerInit",value:function(t){var e=this,n=this.state.fixedList.slice(),r=Math.round(+new Date/1e3),i=ou(n,1)[0],o=i.eagle_id,a=i.video_id,s=i.source,c=i.provider;this.currentPlayer=t,TVRAIN.Content.video_id=a,this.state.placeholderOn||(mu(this.currentPlayer,{eagle_id:o,source:s,provider:c,video_id:a}),this.currentPlayer.on("stop",(function(){n.splice(0,1);var i=ou(n,1)[0];if(n.length){var o=i.eagle_id,a=i.video_id,s=i.source,c=i.provider;TVRAIN.Content.video_id=a,mu(e.currentPlayer,{eagle_id:o,source:s,provider:c,video_id:a})}else{e.model.getTimeStmap();var u=Math.round(+new Date/1e3);e.model.correctionTime(u-r),e.schedulePlayerInit(t)}})))}},{key:"schedulePlayerInit",value:function(t){var e=this.model.getCurrentEl(),n=e.eagle_id,r=e.start_position,i=void 0===r?0:r,o=e.video_id,a=e.source,s=e.provider;this.currentPlayer=t,TVRAIN.Content.video_id=o,this.state.placeholderOn||mu(this.currentPlayer,{eagle_id:n,start_position:i,source:a,provider:s,video_id:o})}},{key:"playerHandlerUpdate",value:function(t){var e=this;t&&"{}"!==JSON.stringify(t)&&!this.state.placeholderOn&&(this.currentPlayer.isHandler||(this.currentPlayer.isHandler=!0,this.currentPlayer.on("stop",(function(){var t=e.model.getCurrentEl(),n=t.eagle_id,r=t.start_position,i=void 0===r?0:r,o=t.video_id,a=t.source,s=t.provider;(n||a)&&(TVRAIN.Content.video_id=o,mu(e.currentPlayer,{eagle_id:n,start_position:i,source:a,provider:s,video_id:o}))}))))}},{key:"render",value:function(){var t=React.createElement("div",{style:{height:"100%"}},React.createElement("div",{"data-watchlater":!0,"data-watchlater-id":this.state.currentId}),React.createElement("div",{style:{height:"100%",width:"100%"},className:vu,"data-autoplay":"true","data-fullscreen":"true","data-width":"100%","data-height":"100%"})),e=React.createElement("div",{style:{height:"100%",width:"100%"},className:vu,"data-autoplay":"true","data-fullscreen":"true","data-width":"100%","data-height":"100%","data-id":904222}),n=React.createElement("img",{src:this.state.config.headbandEmptyContent});return React.createElement("div",{style:{height:"100%"}},this.state.isEmpty&&n,!this.state.isEmpty&&!this.state.placeholderOn&&t,this.state.placeholderOn&&e)}}])&&au(n.prototype,r),e}();function gu(t){return(gu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bu(t,e){return!e||"object"!==gu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _u(t){return(_u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wu(t,e){return(wu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ku=function(t){function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"live",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r.list.forEach((function(t,e){var n=0,i=[];t.content.forEach((function(t,e){var r=t.article_id;n!==r&&i.push(t),n=r})),r.list[e].content=i})),(t=bu(this,_u(e).call(this,n,r,i))).init(),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wu(t,e)}(e,t),e}(Xs);function Eu(t){return(Eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Su(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ou(t){return(Ou=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Tu(t,e){return(Tu=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pu=n(305);n(311);var Cu=function(t){function e(t){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=(n=function(t,e){return!e||"object"!==Eu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ou(e).call(this,t))).props,i=r.code,o=r.list,a=r.token,s=r.timestamp,c=r.description;return n.state={code:i,list:o,token:a,timestamp:s,description:c},n.countItems=0,n}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Tu(t,e)}(e,React.Component),n=e,(r=[{key:"setScroll",value:function(){var t=$(".player_shedulelist .frame"),e=t.parent(),n=new Sly(t,{scrollBar:e.find(".scrollbar"),nextPage:e.find(".player_shedulelist__arrowbottom"),prevPage:e.find(".player_shedulelist__arrowtop"),scrollBy:100,mouseDragging:1,touchDragging:1,minHandleSize:19});this.scroll=n,this.scroll.init()}},{key:"componentDidMount",value:function(){var t=this,e=new ku(this.state.code,{list:this.state.list,timestamp:this.state.timestamp},this.state.token);return e.subscribe("update",this.selectCurrent.bind(this)),e?this.setState({model:e},(function(){t.selectCurrent(),e.init()})):null}},{key:"selectCurrent",value:function(){var t=this.state.model.getCurrentEl().timeStart;$("[data-ts]").removeClass("active"),$('[data-ts="'.concat(t,'"]')).addClass("active")}},{key:"render",value:function(){var t=this,e="mobile"===(new AdaptiveHelper).getBreakpoint().name;if(this.state.model){var n=this.state.model,r=React.createElement("div",{className:"player_shedulelist__arrow"},React.createElement("div",{className:"player_shedulelist__arrowtop"}),React.createElement("div",{className:"player_shedulelist__arrowbottom"}));return React.createElement("div",{className:"player_shedulelist"},React.createElement("div",{className:"player_shedulelist__wrapp"},e&&r,React.createElement("div",{className:"player_shedulelist__desc"},this.state.description),React.createElement("div",{className:"scrollbar"},React.createElement("div",{className:"handle"},React.createElement("div",{className:"mousearea"}))),React.createElement("div",{className:"frame"},React.createElement("div",{className:"player_shedulelist__items slidee"},n.getList().map((function(e){return e.content.map((function(e,n){var r=e.name,i=e.url,o=e.timeStart,a=Pu(1e3*o).format("LT");return t.countItems+=1,React.createElement("div",{key:n+o,className:"player_shedulelist__item","data-ts":o},React.createElement("div",{className:"player_shedulelist__time"},a),React.createElement("a",{href:i,target:"_blank",className:"player_shedulelist__link"},React.createElement("span",{className:"player_shedulelist__name ".concat("")},r)))}))}))))))}return null}}])&&Su(n.prototype,r),e}();function Au(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Nu(t){return(Nu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Du(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ru(t,e){return!e||"object"!==Nu(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Iu(t){return(Iu=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ju(t,e){return(ju=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xu={lightbox:{backgroundColor:"rgba(36, 33, 32, 1)",position:"fixed",width:"100%",minWidth:"1001px",height:"100%",overflowX:"auto",top:0,left:0,zIndex:"99999"},head:{padding:"80px 20px",boxSizing:"border-box"},title:{color:"#fff"},caption:{marginTop:"15px",color:"#808080"},inner:{position:"relative",height:"100%",width:"calc(100% - 400px)",float:"left"},column:{backgroundColor:"#171514",overflow:"hidden",width:"400px",height:"100vh",position:"relative"},canvas:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},imgCanvas:{maxHeight:"100vh",maxWidth:"calc(100vw - 400px)",display:"inline-block",verticalAlign:"top",boxSizing:"border-box",zoom:1,position:"relative",opacity:1,padding:"15px"},close:{position:"absolute",top:"20px",height:"30px",width:"30px",right:"20px",cursor:"pointer"}},Mu=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ru(this,Iu(e).apply(this,arguments))}var n,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ju(t,e)}(e,React.Component),n=e,(r=[{key:"componentDidMount",value:function(){this.props.mount(),this.onKeyPress=this.onKeyPress.bind(this),document.addEventListener("keyup",this.onKeyPress)}},{key:"componentWillUnmount",value:function(){this.props.destroy()}},{key:"onOutClick",value:function(t){t.target.closest(".lightbox__canvas")||this.onClose()}},{key:"onClose",value:function(){document.removeEventListener("keyup",this.onKeyPress),ReactDOM.unmountComponentAtNode(this.props.container)}},{key:"onKeyPress",value:function(t){var e=t.which,n=t.keyCode;27!==e&&27!==n&&"Escape"!==key&&"Esc"!==key||this.onClose()}},{key:"render",value:function(){return React.createElement("div",{className:"lightbox",style:xu.lightbox},React.createElement("div",{className:"lightbox__inner",onClick:this.onOutClick.bind(this),style:xu.inner},React.createElement("div",{className:"lightbox__canvas",style:xu.canvas},React.createElement("img",{src:this.props.src,style:xu.imgCanvas}))),React.createElement("div",{className:"lightbox__column",style:xu.column},React.createElement("span",{className:"lightbox__close",style:xu.close,onClick:this.onClose.bind(this)},React.createElement("svg",{x:"0px",y:"0px",viewBox:"0 0 371.23 371.23"},React.createElement("polygon",{fill:"#fff",points:"371.23,21.213 350.018,0 185.615,164.402 21.213,0 0,21.213 164.402,185.615 0,350.018 21.213,371.23 185.615,206.828 350.018,371.23 371.23,350.018 206.828,185.615 "}))),React.createElement("div",{className:"lightbox__head",style:xu.head},React.createElement("div",{className:"lightbox__title",style:xu.title},this.props.title||window.document.title),this.props.desc?React.createElement("div",{className:"lightbox__caption",style:xu.caption},this.props.desc):null)))}}])&&Du(n.prototype,r),e}();function Lu(t,e){var n=document.createElement("div"),r=document.createElement("div"),i=t.parentNode.querySelector("figcaption");if(r.setAttribute("lightbox-fullscreen",""),n.setAttribute("lightbox",""),n.setAttribute("lightbox-src",t.src),n.setAttribute("lightbox-desc",i&&i.innerText||""),e){var o=t.parentNode.querySelector(e);n.setAttribute("lightbox-title",o&&o.innerText||"")}$(t).wrap(n),t.parentElement.insertBefore(r,null),i&&t.parentElement.insertBefore(i,null)}$(document).on("click",(function(t){var e,n,r,i,o,a=$(t.target);if(null!==a){var s=a.closest("[lightbox]");if(s.length){var c=s.attr("lightbox-src"),u=s.attr("lightbox-desc"),l=s.attr("lightbox-title");c&&(n=(e={src:c,desc:u,title:l}).title,r=e.src,i=e.desc,o=document.createElement("div"),ReactDOM.render(React.createElement(Mu,{desc:i,src:r,title:n,container:o,mount:function(){document.body.style.overflow="hidden"},destroy:function(){o.remove(),document.body.style.overflow="auto"}}),o),document.body.insertBefore(o,null))}}})),window.TVRAIN=window.TVRAIN||{},window.md5=h.a,window.UI=o,window.Menu=function(t,e,n,i,o){var a,s,c,u,l,f=[],d=[],h=$(".menu3__wrap");this.init=function(){var t=Array.prototype.slice.call(arguments);for(var e in t.shift(),a=t.shift(),c=t.shift(),s=t.shift(),t)f.push(t[e]);g(),p(),v(),$(window).resize(_.throttle(g,300))};var p=function(){$(".menu__items__burger").on("click",(function(t){$(".menu__items").toggleClass("menu__items--active"),t.preventDefault()})),$(".menu3__items__burger").on("click",(function(t){$(".menu3__items").toggleClass("menu3__items--active"),t.preventDefault()}))},v=function(){function t(t){(this.isEqualNode(t.target)||t.currentTarget.isEqualNode(t.target.parentNode))&&($(".menu3__items__item--active").removeClass("menu3__items__item--active"),c.toggleClass("menu__items__more--active")),0==$(t.target).closest(s).length&&c.removeClass("menu__items__more--active")}s.off("click"),$(document).off("click",t),s.on("click",t),$(document).on("click",t)},m=function(t){return t.reduce((function(t,e){var n="object"==r(t)?t.outerWidth(!0):t,i="object"==r(e)?e.outerWidth(!0):e;return Math.ceil(n)+Math.ceil(i)}),0)},y=function(){return u=h.width()-m(f),l=m(d),u>=l},g=function(){if("mobile"!==(new AdaptiveHelper).getBreakpointName()){c.find("> *").insertBefore(s);var t=a.find("> *").not(c);d=[],t.each((function(){d.push($(this))}));var e=0;do{var n=d[d.length-2];n&&(d.splice(d.length-2,1),n.prependTo(c)),e++}while(!y()&&e<100)}};this.init.apply(this,arguments)},window.atest=null,window.MobileVersionHelper=function(){return{toggleMode:function(){(function(){var t=window.sessionStorage;try{return t.setItem("test","1"),t.removeItem("test"),!0}catch(t){return!1}})()&&localStorage&&(1==localStorage.getItem("force_wide_version")?($("meta[name=viewport]").attr("content","user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1"),localStorage.setItem("force_wide_version",0)):($("meta[name=viewport]").attr("content","width=1280"),localStorage.setItem("force_wide_version",1)))}}},window.SvgHelper=a.a,window.ViewportHelper=function(){return{isElementFullyInViewport:function(t){if(null==t)return!1;var e=t.getBoundingClientRect(),n=document.documentElement;return e.top>=0&&e.bottom<=(window.innerHeight||n.clientHeight)},isElementPartiallyInViewport:function(t){if(null==t)return!1;var e=t.getBoundingClientRect(),n=document.documentElement;return(e.top>0||e.bottom>0)&&e.top<(window.innerHeight||n.clientHeight)},isElementInViewportAtLeast:function(t,e){if(null==t)return!1;var n=t.getBoundingClientRect(),r=document.documentElement,i=(n.bottom-n.top)*e/100;return(n.top+i>0||n.bottom-i>0)&&n.top+i<(window.innerHeight||r.clientHeight)},tabIsActive:function(){return!document.hidden}}},window.bLazy,window.User=new Ka,window.RegisterBundles=v,window.AdsManager=function(){var t={},e={template:"",init:!0,schedule:[0],schedule_rewind_to_value:null,storage_index_name:"",targetingHit:null,afterRender:null,cookie_exp_days:null,placeholder:null,template_variables:{}},n=function(){return _.indexOf(t.schedule,t.current_schedule_val)>-1},r=function(){t.targetingHit()&&(n()&&$.get(t.template).done((function(e){$(t.placeholder).length&&($(t.placeholder).append(_.template(e)(t.template_variables)),"function"==typeof t.afterRender&&t.afterRender())})),_.max(t.schedule)<t.current_schedule_val+1?"number"==typeof t.schedule_rewind_to_value?t.current_schedule_val=t.schedule_rewind_to_value:_.max(t.schedule)==t.current_schedule_val&&t.current_schedule_val++:t.current_schedule_val++,function(e){var n={path:"/"};"number"==typeof t.cookie_exp_days&&(n.expires=t.cookie_exp_days),$.cookie(t.storage_index_name,e,n)}(t.current_schedule_val))};return{createAd:function(i){!function(n){var r=(t=_.merge(e,n)).template.split("/");if(t.storage_index_name=r[r.length-1].split(".mst").join(""),0==t.schedule.length)throw new Error("Settings error: schedule is empty");if("string"!=typeof t.storage_index_name)throw new Error("Settings error: storage_index_name is not a string");if("function"!=typeof t.targetingHit)throw new Error("Settings error: targetingHit is not a function");if($(t.placeholder).length>1)throw new Error("Settings error: placeholder is not unique");t.current_schedule_val=parseInt($.cookie(t.storage_index_name))||0}(i);var o=!1;return 1==t.init?r():n()&&(o=!0),o},init:function(){r()}}},window.LivePlayerList=function(t){var e,n=t.code,r=t.player,i=t.token,o=t.config,a=t.timestamp,s=t.fixedList,c=t.list,u=t.schedule,l=t.description,f=t.placeholderOn;this.PlayerSchedule=ReactDOM.render(React.createElement(yu,(Au(e={code:n,token:i,list:c,config:o,fixedList:s,timestamp:a},"config",o),Au(e,"placeholderOn",f),e)),r.el),this.ScheduleList=ReactDOM.render(React.createElement(Cu,{code:n,token:i,list:c,timestamp:a,description:l}),u.el)},window.LightBox=function(t){var e=t.element,n=t.title;$(window).width()<768||Array.prototype.forEach.call(document.querySelectorAll(e),(function(t){var e;(e=t).complete&&0!==e.naturalHeight?Lu(t):new Promise((function(e){var n=new Image;n.onload=function(){e()},n.src=t.src})).then((function(){return Lu(t,n)}))}))},window.WatchLater=ru;var Vu,Yu=window.TVRAIN,Bu=void 0===Yu?{}:Yu;Vu=Bu,_.assign(Vu,{Serivices:Ls,Components:Vs,Modules:Ys,api:I.a}),Bu.geo={city:"",country:{code:"",name:""}},Bu.Content={_isPaid:null,artilce_id:null,video_id:null,publishDate:null,demo_video_test:null};try{Bu.User.isGuest()||Bu.app&&Bu.app.user&&Bu.app.user.links&&Bu.app.user.links.favorites&&Bu.Modules.MyProgram.init(Bu.app.user.links.favorites.teleshow||[]),$(document).ready((function(){Array.prototype.slice.call(document.querySelectorAll("[data-tooltip]")).forEach((function(t){new Bu.Modules.Tooltip({parent:t})})),Bu.Modules.initModal(),window.bLazy=new Blazy({selector:"[data-image]:not(.shares__item)",src:"data-image",offset:200,loadInvisible:!i().isMobile(),success:function(t){$(document).trigger("blaZyLoadSuccessful",[t])}}),o().initDropdowns(),o().initFileInputs(),o().initRadios(),o().initCheckboxes(),$(document).on("click","[data-favorite]",(function(){if($(this).hasClass("button--unfavorite")){$(this).removeClass("button--unfavorite").addClass("button--favorite"),$(this).data().gaParams.label="favorites_remove";var t="off"}else $(this).removeClass("button--favorite").addClass("button--unfavorite"),$(this).data().gaParams.label="favorites_add",t="on";var e=Bu.Content.article_id;e||(e=$(this).attr("data-article_id")),$.post("/profile/addfavorites/",{YII_CSRF_TOKEN:$(this).data("token"),article_id:e,action:t}),"on"==t&&gtag("event","article",{send_to:"widgetTracker",event_category:"article",event_action:"add_to_favorites",event_label:e})})),$("[data-docview]").on("click",(function(t){t.preventDefault();var e=Bu.googledocviewer(this);$("<div></div>").html(e).appendTo("body").modal().on($.modal.BEFORE_CLOSE,(function(t){$(t.target).remove()}))})),$(document).on("click",(function(t){var e="menu__items__item--active",n=$(t.target).closest(".".concat("menu__items__item--dropdown")),r=$(t.target).parent().find(".".concat(e)).length||$(t.target).parent().hasClass(e);null==n||r?$(".menu__items__item").removeClass("menu__items__item--active"):($(".".concat("menu__items__item--dropdown")).removeClass(e),t.target.classList.contains(e)?$(n).removeClass(e):$(n).addClass(e)),$(t.target).hasClass("menu__schedule__now")||$(t.target).closest(".menu__schedule__now").length>0?$(t.target).closest(".menu__schedule__now").toggleClass("menu__schedule__now--active"):0==$(t.target).closest(".menu__schedule").length&&$(".menu__schedule__now--active").removeClass("menu__schedule__now--active")})),$(".social-likes").socialLikes&&$(".social-likes").socialLikes({url:$('[rel="canonical"]').attr("href")||window.location.href,utm:null}),$(".social-likes").on("popup_opened.social-likes",(function(t){var e=$(this).attr("data-url")||$('[rel="canonical"]').attr("href")||window.location.href;gtag("event","social",{send_to:"default",event_category:t,event_action:"share",event_label:e})})),$(".shares__item.shares__item--whatsapp").click((function(){gtag("event","social",{send_to:"default",event_category:"whatsapp",event_action:"share",event_label:$(this).data("url")})})),$(".shares__item.shares__item--telegram").click((function(){gtag("event","social",{send_to:"default",event_category:"telegram",event_action:"share",event_label:$(this).data("url")})})),$(".shares__item.shares__item--livejournal").click((function(){gtag("event","social",{send_to:"default",event_category:"livejournal",event_action:"share",event_label:$(this).data("url")})})),function(){if(Bu.Url.matchActions&&Bu.Url.matchActions(["teleshow","news","articles"])){var t=$(".document-content__text p").map((function(){return parseInt($(this).height())})).get();(t=t.length?t.reduce((function(t,e){return(t=t||0)+e})):0)<500&&$("#news").parent().hide()}}(),Bu.UTMTrack.init(),Object(a.a)().apply(),$("[data-ga-track-player-relation]").on("click",(function(t){var e=$(t.currentTarget).data().gaParams;gtag("event","article",{send_to:"widgetTracker",event_category:"article",event_action:e.click,event_label:e.label,event_value:e.value})}))}))}catch(t){throw console.log(t),new function(t,e){this.name="ApplicationError",this.message="Ошибка инцилизации приложения",this.cause=e,this.stack=e.stack}("Ошибка инцилизации приложения",t)}}});